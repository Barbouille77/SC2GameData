include "TriggerLibs/NativeLib"
include "TriggerLibs/HeroesLib"
include "TriggerLibs/GameLib"
include "TriggerLibs/MapMechanicsLib"
include "TriggerLibs/AILib"
include "TriggerLibs/UILib"
include "TriggerLibs/SupportLib"

include "LibAtDe_h"

//--------------------------------------------------------------------------------------------------
// Library: AttackDefend
//--------------------------------------------------------------------------------------------------
// External Library Initialization
void libAtDe_InitLibraries () {
    libNtve_InitVariables();
    libCore_InitVariables();
    libGame_InitVariables();
    libMapM_InitVariables();
    libAIAI_InitVariables();
    libUIUI_InitVariables();
    libSprt_InitVariables();
}

// Variable Initialization
bool libAtDe_InitVariables_completed = false;

void libAtDe_InitVariables () {
    int init_i;
    int init_i1;
    int init_j1;

    if (libAtDe_InitVariables_completed) {
        return;
    }

    libAtDe_InitVariables_completed = true;

    libAtDe_gv_attackDefend.lv_currentRound = 1;
    libAtDe_gv_attackDefend.lv_attackingTeam = 1;
    libAtDe_gv_attackDefend.lv_defendingTeam = 2;
    libAtDe_gv_attackDefend.lv_totalRounds = 1;
    for (init_i = 0; init_i <= libCore_gv_bALMaxTeams; init_i += 1) {
        libAtDe_gv_mAtD_TeamInstructions[init_i].lv_instructionDialog = c_invalidDialogId;
        libAtDe_gv_mAtD_TeamInstructions[init_i].lv_instructionDialogItem = c_invalidDialogControlId;
        libAtDe_gv_mAtD_TeamInstructions[init_i].lv_oKButton = c_invalidDialogControlId;
        libAtDe_gv_mAtD_TeamInstructions[init_i].lv_oKButtonAttackText = StringExternal("Param/Value/lib_AtDe_9F3F0C22");
        libAtDe_gv_mAtD_TeamInstructions[init_i].lv_oKButtonDefendText = StringExternal("Param/Value/lib_AtDe_F7CD09A0");
    }
    libAtDe_gv_teamInstructionDisplayTimer = TimerCreate();
    for (init_i1 = 0; init_i1 <= libCore_gv_bALMaxTeams; init_i1 += 1) {
        for (init_j1 = 0; init_j1 <= 2; init_j1 += 1) {
            libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[init_i1][init_j1] = c_invalidDialogControlId;
        }
    }
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialog = c_invalidDialogId;
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialogLabel = c_invalidDialogControlId;
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialog = c_invalidDialogId;
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialogLabel = c_invalidDialogControlId;
}

// Functions
trigger auto_libAtDe_gf_MAtD_StartRoundStructureAnimations_Trigger = null;

void libAtDe_gf_MAtD_StartRoundStructureAnimations () {
    if (auto_libAtDe_gf_MAtD_StartRoundStructureAnimations_Trigger == null) {
        auto_libAtDe_gf_MAtD_StartRoundStructureAnimations_Trigger = TriggerCreate("auto_libAtDe_gf_MAtD_StartRoundStructureAnimations_TriggerFunc");
    }

    TriggerExecute(auto_libAtDe_gf_MAtD_StartRoundStructureAnimations_Trigger, false, false);
}

bool auto_libAtDe_gf_MAtD_StartRoundStructureAnimations_TriggerFunc (bool testConds, bool runActions) {
    int auto088799BB_ae;
    int auto088799BB_ai;
    int auto5AFE48A8_ae;
    int auto5AFE48A8_ai;
    int autoB91A214C_ae;
    int autoB91A214C_ai;
    int auto3F0CD926_ae;
    int auto3F0CD926_ai;
    int auto91BF150E_ae;
    int auto91BF150E_ai;
    int autoDA0BDC5E_ae;
    int autoDA0BDC5E_ai;

    // Variable Declarations
    int lv_itOrderStructures;
    int lv_itChaosStructures;

    // Variable Initialization

    // Implementation
    auto088799BB_ae = libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures;
    auto088799BB_ai = 1;
    lv_itOrderStructures = 1;
    for ( ; ( (auto088799BB_ai >= 0 && lv_itOrderStructures <= auto088799BB_ae) || (auto088799BB_ai <= 0 && lv_itOrderStructures >= auto088799BB_ae) ) ; lv_itOrderStructures += auto088799BB_ai ) {
        if ((UnitTypeTestFlag(UnitGetType(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]), c_unitFlagTownStructureMoonwell) == true)) {
            ActorSend(libNtve_gf_MainActorofUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]), "Signal MoonwellReset");
        }

    }
    auto5AFE48A8_ae = libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures;
    auto5AFE48A8_ai = 1;
    lv_itChaosStructures = 1;
    for ( ; ( (auto5AFE48A8_ai >= 0 && lv_itChaosStructures <= auto5AFE48A8_ae) || (auto5AFE48A8_ai <= 0 && lv_itChaosStructures >= auto5AFE48A8_ae) ) ; lv_itChaosStructures += auto5AFE48A8_ai ) {
        if ((UnitTypeTestFlag(UnitGetType(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]), c_unitFlagTownStructureMoonwell) == true)) {
            ActorSend(libNtve_gf_MainActorofUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]), "Signal MoonwellReset");
        }

    }
    libNtve_gf_WaitForTimer(libGame_gv_openTheGatesTimer, (libCore_gv_bALOpenTheGatesDelay - 4.0), false);
    ActorSend(libNtve_gf_MainActorofUnit(libGame_gv_teams[libGame_gv_teamChaosIndex_C].lv_core), "AnimBracketStop CoreStart");
    ActorSend(libNtve_gf_MainActorofUnit(libGame_gv_teams[libGame_gv_teamOrderIndex_C].lv_core), "AnimBracketStop CoreStart");
    libNtve_gf_WaitForTimer(libGame_gv_openTheGatesTimer, 15.0, false);
    autoB91A214C_ae = libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures;
    autoB91A214C_ai = 1;
    lv_itOrderStructures = 1;
    for ( ; ( (autoB91A214C_ai >= 0 && lv_itOrderStructures <= autoB91A214C_ae) || (autoB91A214C_ai <= 0 && lv_itOrderStructures >= autoB91A214C_ae) ) ; lv_itOrderStructures += autoB91A214C_ai ) {
        if ((UnitTypeTestFlag(UnitGetType(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]), c_unitFlagTownStructureCannonTower) == true)) {
            ActorSend(libNtve_gf_MainActorofUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]), "Signal PlayBuild");
        }

    }
    auto3F0CD926_ae = libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures;
    auto3F0CD926_ai = 1;
    lv_itChaosStructures = 1;
    for ( ; ( (auto3F0CD926_ai >= 0 && lv_itChaosStructures <= auto3F0CD926_ae) || (auto3F0CD926_ai <= 0 && lv_itChaosStructures >= auto3F0CD926_ae) ) ; lv_itChaosStructures += auto3F0CD926_ai ) {
        if ((UnitTypeTestFlag(UnitGetType(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]), c_unitFlagTownStructureCannonTower) == true)) {
            ActorSend(libNtve_gf_MainActorofUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]), "Signal PlayBuild");
        }

    }
    libNtve_gf_WaitForTimer(libGame_gv_openTheGatesTimer, 4.0, false);
    auto91BF150E_ae = libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures;
    auto91BF150E_ai = 1;
    lv_itOrderStructures = 1;
    for ( ; ( (auto91BF150E_ai >= 0 && lv_itOrderStructures <= auto91BF150E_ae) || (auto91BF150E_ai <= 0 && lv_itOrderStructures >= auto91BF150E_ae) ) ; lv_itOrderStructures += auto91BF150E_ai ) {
        if ((UnitTypeTestFlag(UnitGetType(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]), c_unitFlagTownStructureGate) == true)) {
            ActorSend(libNtve_gf_MainActorofUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]), "Signal PlayBuild");
        }

    }
    autoDA0BDC5E_ae = libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures;
    autoDA0BDC5E_ai = 1;
    lv_itChaosStructures = 1;
    for ( ; ( (autoDA0BDC5E_ai >= 0 && lv_itChaosStructures <= autoDA0BDC5E_ae) || (autoDA0BDC5E_ai <= 0 && lv_itChaosStructures >= autoDA0BDC5E_ae) ) ; lv_itChaosStructures += autoDA0BDC5E_ai ) {
        if ((UnitTypeTestFlag(UnitGetType(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]), c_unitFlagTownStructureGate) == true)) {
            ActorSend(libNtve_gf_MainActorofUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]), "Signal PlayBuild");
        }

    }
    return true;
}

void libAtDe_gf_AttackDefendGameStarts () {
    int autoAE82ED99_ae;
    int autoAE82ED99_ai;

    // Variable Declarations
    int lv_itPlayer;

    // Variable Initialization

    // Implementation
    autoAE82ED99_ae = libCore_gv_bALMaxPlayers;
    autoAE82ED99_ai = 1;
    lv_itPlayer = 1;
    for ( ; ( (autoAE82ED99_ai >= 0 && lv_itPlayer <= autoAE82ED99_ae) || (autoAE82ED99_ai <= 0 && lv_itPlayer >= autoAE82ED99_ae) ) ; lv_itPlayer += autoAE82ED99_ai ) {
        libGame_gv_players[lv_itPlayer].lv_xPRecievedFromCreeps = 0.0;
        libGame_gv_players[lv_itPlayer].lv_xPRecievedFromHeroes = 0.0;
        libGame_gv_players[lv_itPlayer].lv_xPRecievedFromMinions = 0.0;
        libGame_gv_players[lv_itPlayer].lv_xPRecievedFromStructures = 0.0;
        libGame_gv_players[lv_itPlayer].lv_xPRecievedFromTrickle = 0.0;
        libGame_gv_players[lv_itPlayer].lv_suppressLevelUpFXAndTeamXPTracking = true;
    }
    libCore_gv_sYSXPOn = false;
    libCore_gv_sYSHeroStartLevel = 10;
    libGame_gv_xPTrickleEnabled = false;
    SetTalentTierEnabled(1, false);
    SetTalentTierEnabled(2, false);
    SetTalentTierEnabled(3, false);
    SetTalentTierEnabled(4, true);
    SetTalentTierEnabled(5, false);
    SetTalentTierEnabled(6, false);
    SetTalentTierEnabled(7, false);
    libAtDe_gf_GameStartsSetStructureVariables();
    libAtDe_gf_GameStartsSetAttackingDefendingTeams();
}

void libAtDe_gf_GameStartsSetStructureVariables () {
    unitgroup auto6EF9BA68_g;
    int auto6EF9BA68_u;
    unitgroup autoB959442D_g;
    int autoB959442D_u;

    // Variable Declarations
    unit lv_itUnit;

    // Variable Initialization

    // Implementation
    libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures = 0;
    libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures = 0;
    auto6EF9BA68_g = UnitGroup(null, libCore_gv_cOMPUTER_TeamOrder, RegionEntireMap(), UnitFilter((1 << c_targetFilterStructure), 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0);
    auto6EF9BA68_u = 1;
    for ( ; auto6EF9BA68_u <= UnitGroupCount(auto6EF9BA68_g, c_unitCountAll) ; auto6EF9BA68_u += (lv_itUnit == UnitGroupUnit(auto6EF9BA68_g, auto6EF9BA68_u)) ) {
        lv_itUnit = UnitGroupUnit(auto6EF9BA68_g, auto6EF9BA68_u);
        libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures += 1;
        libAtDe_gv_resetRoundVariables.lv_structureUnits[libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures][libGame_gv_teamOrderIndex_C] = lv_itUnit;
        libAtDe_gv_resetRoundVariables.lv_structureUnitType[libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures][libGame_gv_teamOrderIndex_C] = UnitGetType(lv_itUnit);
        libAtDe_gv_resetRoundVariables.lv_structureFacing[libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures][libGame_gv_teamOrderIndex_C] = UnitGetFacing(lv_itUnit);
        libAtDe_gv_resetRoundVariables.lv_structureLocation[libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures][libGame_gv_teamOrderIndex_C] = UnitGetPosition(lv_itUnit);
        if ((UnitHasBehavior2(lv_itUnit, "AttackDefendCoreBehavior") == true)) {
            libAtDe_gv_resetRoundVariables.lv_structureIsCore[libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures][libGame_gv_teamOrderIndex_C] = true;
        }
        else {
            if ((UnitGetType(lv_itUnit) != "TownMoonwellL3")) {
                libNtve_gf_MakeUnitInvulnerable(lv_itUnit, true);
            }

        }
    }
    autoB959442D_g = UnitGroup(null, libCore_gv_cOMPUTER_TeamChaos, RegionEntireMap(), UnitFilter((1 << c_targetFilterStructure), 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 0);
    autoB959442D_u = 1;
    for ( ; autoB959442D_u <= UnitGroupCount(autoB959442D_g, c_unitCountAll) ; autoB959442D_u += (lv_itUnit == UnitGroupUnit(autoB959442D_g, autoB959442D_u)) ) {
        lv_itUnit = UnitGroupUnit(autoB959442D_g, autoB959442D_u);
        libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures += 1;
        libAtDe_gv_resetRoundVariables.lv_structureUnits[libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures][libGame_gv_teamChaosIndex_C] = lv_itUnit;
        libAtDe_gv_resetRoundVariables.lv_structureUnitType[libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures][libGame_gv_teamChaosIndex_C] = UnitGetType(lv_itUnit);
        libAtDe_gv_resetRoundVariables.lv_structureFacing[libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures][libGame_gv_teamChaosIndex_C] = UnitGetFacing(lv_itUnit);
        libAtDe_gv_resetRoundVariables.lv_structureLocation[libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures][libGame_gv_teamChaosIndex_C] = UnitGetPosition(lv_itUnit);
        if ((UnitHasBehavior2(lv_itUnit, "AttackDefendCoreBehavior") == true)) {
            libAtDe_gv_resetRoundVariables.lv_structureIsCore[libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures][libGame_gv_teamChaosIndex_C] = true;
        }
        else {
            if ((UnitGetType(lv_itUnit) != "TownMoonwellL3")) {
                libNtve_gf_MakeUnitInvulnerable(lv_itUnit, true);
            }

        }
    }
}

void libAtDe_gf_GameStartsSetAttackingDefendingTeams () {
    // Implementation
    libAtDe_gv_attackDefend.lv_attackingTeam = libGame_gv_teamOrderIndex_C;
    libAtDe_gv_attackDefend.lv_defendingTeam = libGame_gv_teamChaosIndex_C;
}

void libAtDe_gf_RoundEndsFadeInOut (bool lp_fadeInOut) {
    // Implementation
    if ((lp_fadeInOut == true)) {
        CinematicFade(true, 1.0, c_fadeStyleNormal, Color(0.00, 0.00, 0.00), 0.0, true);
        PlayerGroupLoopBegin(PlayerGroupAll());
        for ( ; !PlayerGroupLoopDone() ; PlayerGroupLoopStep() ) {
            UISetMode(libCore_gv_playerGroupFromPlayer[PlayerGroupLoopCurrent()], c_uiModeConsole, c_transitionDurationImmediate);
            libUIUI_gf_UIHeroConsoleShowHideForPlayer(true, PlayerGroupLoopCurrent());
            libUIUI_gf_UIHeroConsoleShowHideUnitStatusFrameForPlayer(true, PlayerGroupLoopCurrent());
            UnitGroupLoopBegin(libGame_gv_players[PlayerGroupLoopCurrent()].lv_heroUnitGroup);
            for ( ; !UnitGroupLoopDone() ; UnitGroupLoopStep() ) {
                libNtve_gf_SendActorMessageToUnit(UnitGroupLoopCurrent(), "SetShowStatusBar 1");
            }
            UnitGroupLoopEnd();
        }
        PlayerGroupLoopEnd();
    }
    else {
        PlayerGroupLoopBegin(PlayerGroupAll());
        for ( ; !PlayerGroupLoopDone() ; PlayerGroupLoopStep() ) {
            UISetMode(libCore_gv_playerGroupFromPlayer[PlayerGroupLoopCurrent()], c_uiModeFullscreen, c_transitionDurationImmediate);
            CinematicFade(false, 1.0, c_fadeStyleNormal, Color(0.00, 0.00, 0.00), 0.0, false);
            libUIUI_gf_UIHeroConsoleShowHideForPlayer(false, PlayerGroupLoopCurrent());
            libUIUI_gf_UIHeroConsoleShowHideUnitStatusFrameForPlayer(false, PlayerGroupLoopCurrent());
            UnitGroupLoopBegin(libGame_gv_players[PlayerGroupLoopCurrent()].lv_heroUnitGroup);
            for ( ; !UnitGroupLoopDone() ; UnitGroupLoopStep() ) {
                libNtve_gf_SendActorMessageToUnit(UnitGroupLoopCurrent(), "SetShowStatusBar");
            }
            UnitGroupLoopEnd();
        }
        PlayerGroupLoopEnd();
        Wait(1.125, c_timeGame);
    }
}

void libAtDe_gf_RoundEndsResetPoints () {
    int auto17E86745_ae;
    int auto17E86745_ai;
    int auto9B640578_ae;
    int auto9B640578_ai;
    int autoBC07838B_ae;
    int autoBC07838B_ai;
    int auto1A51DE0D_ae;
    int auto1A51DE0D_ai;
    int autoDDF6E04D_ae;
    int autoDDF6E04D_ai;

    // Variable Declarations
    int lv_iPlayer;
    int lv_iPuntPoint;
    int lv_iTeam;

    // Variable Initialization

    // Implementation
    auto17E86745_ae = libCore_gv_bALMaxPlayers;
    auto17E86745_ai = 1;
    lv_iPlayer = 1;
    for ( ; ( (auto17E86745_ai >= 0 && lv_iPlayer <= auto17E86745_ae) || (auto17E86745_ai <= 0 && lv_iPlayer >= auto17E86745_ae) ) ; lv_iPlayer += auto17E86745_ai ) {
        if ((libGame_gv_players[lv_iPlayer].lv_rosterSlot > 5)) {
            libGame_gv_players[lv_iPlayer].lv_spawnPoint = PlayerStartLocation((libGame_gv_players[lv_iPlayer].lv_rosterSlot - 5));
        }
        else {
            libGame_gv_players[lv_iPlayer].lv_spawnPoint = PlayerStartLocation((libGame_gv_players[lv_iPlayer].lv_rosterSlot + 5));
        }
    }
    auto9B640578_ae = libCore_gv_bALMaxTeams;
    auto9B640578_ai = 1;
    lv_iTeam = 1;
    for ( ; ( (auto9B640578_ai >= 0 && lv_iTeam <= auto9B640578_ae) || (auto9B640578_ai <= 0 && lv_iTeam >= auto9B640578_ae) ) ; lv_iTeam += auto9B640578_ai ) {
        autoBC07838B_ae = libMapM_gv_mMRepulseRegionPunchTargetMax_C;
        autoBC07838B_ai = 1;
        lv_iPuntPoint = 1;
        for ( ; ( (autoBC07838B_ai >= 0 && lv_iPuntPoint <= autoBC07838B_ae) || (autoBC07838B_ai <= 0 && lv_iPuntPoint >= autoBC07838B_ae) ) ; lv_iPuntPoint += autoBC07838B_ai ) {
            libAtDe_gv_resetRoundVariables.lv_puntPoints[lv_iTeam][lv_iPuntPoint] = libMapM_gv_mMRepulseRegionPunchTarget[lv_iTeam][lv_iPuntPoint];
        }
    }
    auto1A51DE0D_ae = libCore_gv_bALMaxTeams;
    auto1A51DE0D_ai = 1;
    lv_iTeam = 1;
    for ( ; ( (auto1A51DE0D_ai >= 0 && lv_iTeam <= auto1A51DE0D_ae) || (auto1A51DE0D_ai <= 0 && lv_iTeam >= auto1A51DE0D_ae) ) ; lv_iTeam += auto1A51DE0D_ai ) {
        autoDDF6E04D_ae = libMapM_gv_mMRepulseRegionPunchTargetMax_C;
        autoDDF6E04D_ai = 1;
        lv_iPuntPoint = 1;
        for ( ; ( (autoDDF6E04D_ai >= 0 && lv_iPuntPoint <= autoDDF6E04D_ae) || (autoDDF6E04D_ai <= 0 && lv_iPuntPoint >= autoDDF6E04D_ae) ) ; lv_iPuntPoint += autoDDF6E04D_ai ) {
            libMapM_gv_mMRepulseRegionPunchTarget[lv_iTeam][lv_iPuntPoint] = libAtDe_gv_resetRoundVariables.lv_puntPoints[libGame_gf_EnemyTeam(lv_iTeam)][lv_iPuntPoint];
        }
    }
}

void libAtDe_gf_RoundEndsResetRegions () {
    // Implementation
    libAtDe_gv_resetRoundVariables.lv_baseRegions[libGame_gv_teamOrderIndex_C] = libCore_gv_mAPOrderBaseRegion;
    libAtDe_gv_resetRoundVariables.lv_baseRegions[libGame_gv_teamChaosIndex_C] = libCore_gv_mAPChaosBaseRegion;
    libCore_gv_mAPOrderBaseRegion = libAtDe_gv_resetRoundVariables.lv_baseRegions[libGame_gv_teamChaosIndex_C];
    libCore_gv_mAPChaosBaseRegion = libAtDe_gv_resetRoundVariables.lv_baseRegions[libGame_gv_teamOrderIndex_C];
    libAtDe_gv_resetRoundVariables.lv_baseRegions[libGame_gv_teamOrderIndex_C] = libCore_gv_mAPOrderBaseRegion;
    libAtDe_gv_resetRoundVariables.lv_baseRegions[libGame_gv_teamChaosIndex_C] = libCore_gv_mAPChaosBaseRegion;
    libAtDe_gv_resetRoundVariables.lv_puntRegions[libGame_gv_teamOrderIndex_C] = libMapM_gv_mMRepulseRegions[libGame_gv_teamOrderIndex_C];
    libAtDe_gv_resetRoundVariables.lv_puntRegions[libGame_gv_teamChaosIndex_C] = libMapM_gv_mMRepulseRegions[libGame_gv_teamChaosIndex_C];
    libMapM_gv_mMRepulseRegions[libGame_gv_teamOrderIndex_C] = libAtDe_gv_resetRoundVariables.lv_puntRegions[libGame_gv_teamChaosIndex_C];
    libMapM_gv_mMRepulseRegions[libGame_gv_teamChaosIndex_C] = libAtDe_gv_resetRoundVariables.lv_puntRegions[libGame_gv_teamOrderIndex_C];
    libAtDe_gv_resetRoundVariables.lv_puntRegions[libGame_gv_teamOrderIndex_C] = libMapM_gv_mMRepulseRegions[libGame_gv_teamOrderIndex_C];
    libAtDe_gv_resetRoundVariables.lv_puntRegions[libGame_gv_teamChaosIndex_C] = libMapM_gv_mMRepulseRegions[libGame_gv_teamChaosIndex_C];
    libAtDe_gv_resetRoundVariables.lv_safeRegions[libGame_gv_teamOrderIndex_C] = libMapM_gv_mMSafeRegions[libGame_gv_teamOrderIndex_C];
    libAtDe_gv_resetRoundVariables.lv_safeRegions[libGame_gv_teamChaosIndex_C] = libMapM_gv_mMSafeRegions[libGame_gv_teamChaosIndex_C];
    libMapM_gv_mMSafeRegions[libGame_gv_teamOrderIndex_C] = libAtDe_gv_resetRoundVariables.lv_safeRegions[libGame_gv_teamChaosIndex_C];
    libMapM_gv_mMSafeRegions[libGame_gv_teamChaosIndex_C] = libAtDe_gv_resetRoundVariables.lv_safeRegions[libGame_gv_teamOrderIndex_C];
    libAtDe_gv_resetRoundVariables.lv_safeRegions[libGame_gv_teamOrderIndex_C] = libMapM_gv_mMSafeRegions[libGame_gv_teamOrderIndex_C];
    libAtDe_gv_resetRoundVariables.lv_safeRegions[libGame_gv_teamChaosIndex_C] = libMapM_gv_mMSafeRegions[libGame_gv_teamChaosIndex_C];
}

void libAtDe_gf_RoundEndsResetVisibility () {
    int autoE2FFFC12_ae;
    int autoE2FFFC12_ai;

    // Variable Declarations
    int lv_i;
    int lv_player;

    // Variable Initialization

    // Implementation
    autoE2FFFC12_ae = 12;
    autoE2FFFC12_ai = 1;
    lv_i = 1;
    for ( ; ( (autoE2FFFC12_ai >= 0 && lv_i <= autoE2FFFC12_ae) || (autoE2FFFC12_ai <= 0 && lv_i >= autoE2FFFC12_ae) ) ; lv_i += autoE2FFFC12_ai ) {
        VisRevealerEnable(libGame_gv_baseRevealers[lv_i], false);
        VisRevealerDestroy(libGame_gv_baseRevealers[lv_i]);
    }
    TriggerExecute(libGame_gt_InitializeVisibility, true, false);
}

void libAtDe_gf_RoundEndsResetStructures () {
    int auto1FFA8E7B_ae;
    int auto1FFA8E7B_ai;
    int autoFC2FCEF1_ae;
    int autoFC2FCEF1_ai;

    // Variable Declarations
    int lv_itOrderStructures;
    int lv_itChaosStructures;

    // Variable Initialization

    // Implementation
    auto1FFA8E7B_ae = libAtDe_gv_resetRoundVariables.lv_numberOfOrderStructures;
    auto1FFA8E7B_ai = 1;
    lv_itOrderStructures = 1;
    for ( ; ( (auto1FFA8E7B_ai >= 0 && lv_itOrderStructures <= auto1FFA8E7B_ae) || (auto1FFA8E7B_ai <= 0 && lv_itOrderStructures >= auto1FFA8E7B_ae) ) ; lv_itOrderStructures += auto1FFA8E7B_ai ) {
        if ((UnitIsAlive(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]) == true)) {
            if ((libAtDe_gv_resetRoundVariables.lv_structureIsCore[lv_itOrderStructures][libGame_gv_teamOrderIndex_C] == false)) {
                UnitRemove(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]);
            }
            else {
                libNtve_gf_PauseUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C], true);
                UnitRemove(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]);
            }
        }

        UnitCreate(1, libAtDe_gv_resetRoundVariables.lv_structureUnitType[lv_itOrderStructures][libGame_gv_teamOrderIndex_C], c_unitCreateIgnorePlacement, 12, libAtDe_gv_resetRoundVariables.lv_structureLocation[lv_itOrderStructures][libGame_gv_teamOrderIndex_C], libAtDe_gv_resetRoundVariables.lv_structureFacing[lv_itOrderStructures][libGame_gv_teamOrderIndex_C]);
        if ((libAtDe_gv_resetRoundVariables.lv_structureIsCore[lv_itOrderStructures][libGame_gv_teamOrderIndex_C] == true)) {
            libGame_gv_teams[libGame_gv_teamChaosIndex_C].lv_core = UnitLastCreated();
        }

    }
    autoFC2FCEF1_ae = libAtDe_gv_resetRoundVariables.lv_numberOfChaosStructures;
    autoFC2FCEF1_ai = 1;
    lv_itChaosStructures = 1;
    for ( ; ( (autoFC2FCEF1_ai >= 0 && lv_itChaosStructures <= autoFC2FCEF1_ae) || (autoFC2FCEF1_ai <= 0 && lv_itChaosStructures >= autoFC2FCEF1_ae) ) ; lv_itChaosStructures += autoFC2FCEF1_ai ) {
        if ((UnitIsAlive(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]) == true)) {
            if ((UnitIsAlive(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]) == true)) {
                UnitRemove(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]);
            }
            else {
                libNtve_gf_PauseUnit(libAtDe_gv_resetRoundVariables.lv_structureUnits[lv_itChaosStructures][libGame_gv_teamChaosIndex_C], true);
            }
        }

        UnitCreate(1, libAtDe_gv_resetRoundVariables.lv_structureUnitType[lv_itChaosStructures][libGame_gv_teamChaosIndex_C], c_unitCreateIgnorePlacement, 11, libAtDe_gv_resetRoundVariables.lv_structureLocation[lv_itChaosStructures][libGame_gv_teamChaosIndex_C], libAtDe_gv_resetRoundVariables.lv_structureFacing[lv_itChaosStructures][libGame_gv_teamChaosIndex_C]);
        if ((libAtDe_gv_resetRoundVariables.lv_structureIsCore[lv_itChaosStructures][libGame_gv_teamChaosIndex_C] == true)) {
            libGame_gv_teams[libGame_gv_teamOrderIndex_C].lv_core = UnitLastCreated();
        }

    }
}

void libAtDe_gf_RoundEndsResetDoodads () {
    // Implementation
    libCore_gf_SendActorMessageToDoodadsInRegion("Signal SwapDoodadOwner", RegionEntireMap(), null);
}

trigger auto_libAtDe_gf_RoundEndsResetGateConfinement_Trigger = null;

void libAtDe_gf_RoundEndsResetGateConfinement () {
    if (auto_libAtDe_gf_RoundEndsResetGateConfinement_Trigger == null) {
        auto_libAtDe_gf_RoundEndsResetGateConfinement_Trigger = TriggerCreate("auto_libAtDe_gf_RoundEndsResetGateConfinement_TriggerFunc");
    }

    TriggerExecute(auto_libAtDe_gf_RoundEndsResetGateConfinement_Trigger, false, false);
}

bool auto_libAtDe_gf_RoundEndsResetGateConfinement_TriggerFunc (bool testConds, bool runActions) {
    int auto2C332F4C_ae;
    int auto2C332F4C_ai;

    // Variable Declarations
    int lv_i;

    // Variable Initialization

    // Implementation
    libGame_gv_gameStarted = false;
    TimerStart(libGame_gv_openTheGatesTimer, libCore_gv_bALOpenTheGatesDelay, false, c_timeGame);
    auto2C332F4C_ae = libCore_gv_bALMaxPlayers;
    auto2C332F4C_ai = 1;
    lv_i = 1;
    for ( ; ( (auto2C332F4C_ai >= 0 && lv_i <= auto2C332F4C_ae) || (auto2C332F4C_ai <= 0 && lv_i >= auto2C332F4C_ae) ) ; lv_i += auto2C332F4C_ai ) {
        libNtve_gf_SetUpgradeLevelForPlayer(lv_i, "GatesAreOpen", 0);
    }
    Wait(1.0, c_timeGame);
    TriggerEnable(libGame_gt_ConfineHeroesToBaseUntilCountdownEnds, true);
    TriggerEnable(libGame_gt_ConfineOtherStuffToBaseUntilCountdownEnds, true);
    TriggerAddEventUnitRegion(libGame_gt_ConfineOtherStuffToBaseUntilCountdownEnds, null, libCore_gv_mAPOrderBaseRegion, false);    
    TriggerAddEventUnitRegion(libGame_gt_ConfineOtherStuffToBaseUntilCountdownEnds, null, libCore_gv_mAPChaosBaseRegion, false);    
    return true;
}

void libAtDe_gf_RoundEndsResetAttackingDefendingTeams () {
    // Variable Declarations
    int lv_oldAttackingTeam;
    int lv_oldDefendingTeam;

    // Variable Initialization

    // Implementation
    lv_oldAttackingTeam = libAtDe_gv_attackDefend.lv_attackingTeam;
    lv_oldDefendingTeam = libAtDe_gv_attackDefend.lv_defendingTeam;
    libAtDe_gv_attackDefend.lv_attackingTeam = lv_oldDefendingTeam;
    libAtDe_gv_attackDefend.lv_defendingTeam = lv_oldAttackingTeam;
}

void libAtDe_gf_AttackDefendRoundEnds (trigger t) {
    // Implementation
    TriggerAddEventGeneric(t, libAtDe_gv_eventID_AttackDefendRoundEnds_C);
}

void libAtDe_gf_SendEventAttackDefendRoundEnds (int lp_team) {
    // Implementation
    DataTableSetInt(false, TriggerEventParamName(libAtDe_gv_eventID_AttackDefendRoundEnds_C, libAtDe_gv_eventParam_AttackDefendRoundWinner_Team_C), lp_team);
    TriggerSendEvent(libAtDe_gv_eventID_AttackDefendRoundEnds_C);
}

int libAtDe_gf_AttackDefendWinningTeamForRound () {
    // Implementation
    return DataTableGetInt(false, TriggerEventParamName(libAtDe_gv_eventID_AttackDefendRoundEnds_C, libAtDe_gv_eventParam_AttackDefendRoundWinner_Team_C));
}

void libAtDe_gf_AttackDefendRoundResetOccurring (trigger t) {
    // Implementation
    TriggerAddEventGeneric(t, libAtDe_gv_EventID_AttackDefendRoundResetOccurring_C);
}

void libAtDe_gf_SendEventAttackDefendRoundResetOccurring () {
    // Implementation
    TriggerSendEvent(libAtDe_gv_EventID_AttackDefendRoundResetOccurring_C);
}

void libAtDe_gf_AttackDefendRoundResetComplete (trigger t) {
    // Implementation
    TriggerAddEventGeneric(t, libAtDe_gv_EventID_AttackDefendRoundResetComplete_C);
}

void libAtDe_gf_SendEventAttackDefendRoundResetComplete () {
    // Implementation
    TriggerSendEvent(libAtDe_gv_EventID_AttackDefendRoundResetComplete_C);
}

void libAtDe_gf_AttackDefendGameOver (trigger t) {
    // Implementation
    TriggerAddEventGeneric(t, libAtDe_gv_EventID_AttackDefendGameOver_C);
}

void libAtDe_gf_SendEventAttackDefendGameOver () {
    // Implementation
    TriggerSendEvent(libAtDe_gv_EventID_AttackDefendGameOver_C);
}

void libAtDe_gf_DisplayTeamInstructionsForTeams () {
    int autoA5B57C7C_ae;
    int autoA5B57C7C_ai;

    // Variable Declarations
    int lv_itPlayer;

    // Variable Initialization

    // Implementation
    CinematicFade(true, 0.0, c_fadeStyleNormal, Color(0.00, 0.00, 0.00), 0.0, false);
    autoA5B57C7C_ae = 10;
    autoA5B57C7C_ai = 1;
    lv_itPlayer = 1;
    for ( ; ( (autoA5B57C7C_ai >= 0 && lv_itPlayer <= autoA5B57C7C_ae) || (autoA5B57C7C_ai <= 0 && lv_itPlayer >= autoA5B57C7C_ae) ) ; lv_itPlayer += autoA5B57C7C_ai ) {
        libAtDe_gv_pausePlayerForInstructions[lv_itPlayer] = true;
    }
    libAtDe_gf_DisplayTeamInstructionsForAttack();
    libAtDe_gf_DisplayTeamInstructionsForDefend();
    libAtDe_gf_SetOKButtonTextForTeams();
    TimerStart(libAtDe_gv_teamInstructionDisplayTimer, 20.0, false, c_timeGame);
    libAtDe_gv_teamInstructionDisplayTimer = TimerLastStarted();
}

void libAtDe_gf_DisplayTeamInstructionsForAttack () {
    // Implementation
    DialogCreate(500, 400, c_anchorCenter, 0, 0, true);
    libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialog = DialogLastCreated();
    DialogSetImageVisible(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialog, false);
    DialogSetFullscreen(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialog, true);
    DialogControlCreateFromTemplate(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialog, c_triggerControlTypePanel, "BlackheartsRevenge_LoadingAttackers/ScreenMapLoading_BlackheartsBay");
    libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialogItem = DialogControlLastCreated();
    DialogControlSetFullDialog(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialogItem, PlayerGroupAll(), true);
    DialogSetVisible(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialog, libGame_gf_PlayersOnTeamHeroes(libAtDe_gv_attackDefend.lv_attackingTeam, false), true);
    DialogControlHookup(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_instructionDialogItem, c_triggerControlTypeButton, "OKButton");
    libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_oKButton = DialogControlLastCreated();
    DialogControlSetEnabled(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_oKButton, PlayerGroupAll(), false);
}

void libAtDe_gf_DisplayTeamInstructionsForDefend () {
    // Implementation
    DialogCreate(500, 400, c_anchorCenter, 0, 0, true);
    libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialog = DialogLastCreated();
    DialogSetImageVisible(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialog, false);
    DialogSetFullscreen(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialog, true);
    DialogControlCreateFromTemplate(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialog, c_triggerControlTypePanel, "BlackheartsRevenge_LoadingDefenders/ScreenMapLoading_BlackheartsBay");
    libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialogItem = DialogControlLastCreated();
    DialogControlSetFullDialog(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialogItem, PlayerGroupAll(), true);
    DialogSetVisible(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialog, libGame_gf_PlayersOnTeamHeroes(libAtDe_gv_attackDefend.lv_defendingTeam, false), true);
    DialogControlHookup(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_instructionDialogItem, c_triggerControlTypeButton, "OKButton");
    libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_oKButton = DialogControlLastCreated();
    DialogControlSetEnabled(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_oKButton, PlayerGroupAll(), false);
}

trigger auto_libAtDe_gf_SetOKButtonTextForTeams_Trigger = null;

void libAtDe_gf_SetOKButtonTextForTeams () {
    if (auto_libAtDe_gf_SetOKButtonTextForTeams_Trigger == null) {
        auto_libAtDe_gf_SetOKButtonTextForTeams_Trigger = TriggerCreate("auto_libAtDe_gf_SetOKButtonTextForTeams_TriggerFunc");
    }

    TriggerExecute(auto_libAtDe_gf_SetOKButtonTextForTeams_Trigger, false, false);
}

bool auto_libAtDe_gf_SetOKButtonTextForTeams_TriggerFunc (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_timerCounter;

    // Variable Initialization
    lv_timerCounter = 10;

    // Implementation
    while ((lv_timerCounter > 0)) {
        libNtve_gf_SetDialogItemText(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_oKButton, IntToText(lv_timerCounter), PlayerGroupAll());
        libNtve_gf_SetDialogItemText(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_oKButton, IntToText(lv_timerCounter), PlayerGroupAll());
        lv_timerCounter -= 1;
        Wait(1.0, c_timeGame);
    }
    libNtve_gf_SetDialogItemText(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_oKButton, libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_oKButtonAttackText, PlayerGroupAll());
    libNtve_gf_SetDialogItemText(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_oKButton, libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_oKButtonDefendText, PlayerGroupAll());
    DialogControlSetEnabled(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_attackingTeam].lv_oKButton, PlayerGroupAll(), true);
    DialogControlSetEnabled(libAtDe_gv_mAtD_TeamInstructions[libAtDe_gv_attackDefend.lv_defendingTeam].lv_oKButton, PlayerGroupAll(), true);
    return true;
}

void libAtDe_gf_MapMechanicHelpPanelShowHide (int lp_team, playergroup lp_players) {
    // Variable Declarations
    int lv_team;

    // Variable Initialization

    // Implementation
    DialogControlSetVisible(libAtDe_gv_mAtD_TeamInstructions[lp_team].lv_instructionDialogItem, lp_players, false);
    SoundChannelMute(lp_players, c_soundCategoryAmbient, false);
    SoundChannelMute(lp_players, c_soundCategoryVoice, false);
    SoundChannelMute(lp_players, c_soundCategoryBuild, false);
    SoundChannelMute(lp_players, c_soundCategorySAmbient, false);
    SoundChannelMute(lp_players, c_soundCategoryUser11, false);
    SoundChannelMute(lp_players, c_soundCategoryAlert, false);
    SoundChannelMute(lp_players, c_soundCategoryMission, false);
    SoundChannelMute(PlayerGroupAll(), c_soundCategoryFoley, false);
    SoundChannelMute(PlayerGroupAll(), c_soundCategoryMovie, false);
}

void libAtDe_gf_DisplayAttackDefendForTeam () {
    // Variable Declarations
    int lv_itPlayer;

    // Variable Initialization

    // Implementation
}

void libAtDe_gf_AtDe_UI_TeamScoreInit () {
    int autoBE457FA6_ae;
    int autoBE457FA6_ai;
    int auto9A272711_ae;
    int auto9A272711_ai;

    // Variable Declarations
    int lv_panel;
    int lv_itTeam;
    int lv_enemyTeam;
    int lv_itImage;

    // Variable Initialization
    lv_panel = c_invalidDialogControlId;

    // Implementation
    DialogControlCreateInPanelFromTemplate(libUIUI_gv_topBarPanel.lv_mainPanel, c_triggerControlTypePanel, "AttackDefendTeamScore/AttackDefendTeamScoreTemplate");
    lv_panel = DialogControlLastCreated();
    DialogControlSetPositionRelative(DialogControlLastCreated(), PlayerGroupAll(), c_anchorTop, libUIUI_gv_topBarPanel.lv_mainPanel, c_anchorTop, 0, 0);
    autoBE457FA6_ae = 2;
    autoBE457FA6_ai = 1;
    lv_itTeam = 1;
    for ( ; ( (autoBE457FA6_ai >= 0 && lv_itTeam <= autoBE457FA6_ae) || (autoBE457FA6_ai <= 0 && lv_itTeam >= autoBE457FA6_ae) ) ; lv_itTeam += autoBE457FA6_ai ) {
        lv_enemyTeam = libGame_gf_EnemyTeam(lv_itTeam);
        auto9A272711_ae = 2;
        auto9A272711_ai = 1;
        lv_itImage = 1;
        for ( ; ( (auto9A272711_ai >= 0 && lv_itImage <= auto9A272711_ae) || (auto9A272711_ai <= 0 && lv_itImage >= auto9A272711_ae) ) ; lv_itImage += auto9A272711_ai ) {
            DialogControlHookup(lv_panel, c_triggerControlTypeImage, libNtve_gf_ConvertStringToUILayoutFrameName(("Team" + IntToString(lv_itTeam) + "ScoreImage" + IntToString(lv_itImage))));
            libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage] = DialogControlLastCreated();
            if ((lv_itTeam == libGame_gv_teamChaosIndex_C)) {
                libNtve_gf_SetDialogItemImage(libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage], "Assets\\Textures\\hud_arena_bluemarker_left.dds", libGame_gf_PlayersOnTeamHeroes(lv_itTeam, false));
                libNtve_gf_SetDialogItemImage(libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage], "Assets\\Textures\\hud_arena_redmarker.dds", libGame_gf_PlayersOnTeamHeroes(lv_enemyTeam, false));
            }
            else {
                libNtve_gf_SetDialogItemImage(libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage], "Assets\\Textures\\hud_arena_bluemarker.dds", libGame_gf_PlayersOnTeamHeroes(lv_itTeam, false));
                libNtve_gf_SetDialogItemImage(libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage], "Assets\\Textures\\hud_arena_bluemarker.dds", libCore_gv_playerGroupFromPlayer[libCore_gv_oBSERVER_ObserverUIPlayer]);
                libNtve_gf_SetDialogItemImage(libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage], "Assets\\Textures\\hud_arena_redmarker_right.dds", libGame_gf_PlayersOnTeamHeroes(lv_enemyTeam, false));
            }
        }
        DialogControlSetAnimationState(libUIUI_gv_uIGameUIHandles.lv_gameUIContainer, libGame_gv_teams[lv_itTeam].lv_teamPlayerGroupNoNPCPlayers, "TeamColors", ("Team" + IntToString(lv_itTeam) + "IsBlue"));
    }
    libAtDe_gf_AtDe_UI_TeamScoreUpdate();
}

void libAtDe_gf_AtDe_UI_TeamScoreUpdate () {
    int auto8D5E0DD7_ae;
    int auto8D5E0DD7_ai;
    int autoE41BFCB8_ae;
    int autoE41BFCB8_ai;

    // Variable Declarations
    int lv_itTeam;
    int lv_enemyTeam;
    int lv_itImage;

    // Variable Initialization

    // Implementation
    auto8D5E0DD7_ae = 2;
    auto8D5E0DD7_ai = 1;
    lv_itTeam = 1;
    for ( ; ( (auto8D5E0DD7_ai >= 0 && lv_itTeam <= auto8D5E0DD7_ae) || (auto8D5E0DD7_ai <= 0 && lv_itTeam >= auto8D5E0DD7_ae) ) ; lv_itTeam += auto8D5E0DD7_ai ) {
        lv_enemyTeam = libGame_gf_EnemyTeam(lv_itTeam);
        autoE41BFCB8_ae = 2;
        autoE41BFCB8_ai = 1;
        lv_itImage = 1;
        for ( ; ( (autoE41BFCB8_ai >= 0 && lv_itImage <= autoE41BFCB8_ae) || (autoE41BFCB8_ai <= 0 && lv_itImage >= autoE41BFCB8_ae) ) ; lv_itImage += autoE41BFCB8_ai ) {
            if ((libAtDe_gv_attackDefend.lv_roundScore[lv_itTeam] >= lv_itImage)) {
                DialogControlSetVisible(libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage], PlayerGroupAll(), true);
            }
            else {
                DialogControlSetVisible(libAtDe_gv_AtDe_UI_TeamScorePanel.lv_scoreImage[lv_itTeam][lv_itImage], PlayerGroupAll(), false);
            }
        }
    }
}

void libAtDe_gf_AtDe_UI_RoundOverDisplay () {
    // Variable Declarations
    int lv_victoryTeam;
    int lv_defeatTeam;
    int lv_victoryPanel;
    int lv_defeatPanel;

    // Variable Initialization
    lv_victoryPanel = c_invalidDialogControlId;
    lv_defeatPanel = c_invalidDialogControlId;

    // Implementation
    lv_victoryTeam = libAtDe_gv_attackDefend.lv_currentRoundWinner;
    lv_defeatTeam = libGame_gf_EnemyTeam(lv_victoryTeam);
    if ((libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialog != c_invalidDialogId)) {
        DialogSetVisible(libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialog, libGame_gf_PlayersOnTeamHeroes(lv_victoryTeam, false), true);
        DialogSetVisible(libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialog, libGame_gf_PlayersOnTeamHeroes(lv_defeatTeam, false), true);
        return ;
    }

    DialogCreate(500, 400, c_anchorCenter, 0, 0, true);
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialog = DialogLastCreated();
    DialogSetImageVisible(DialogLastCreated(), false);
    DialogSetFullscreen(DialogLastCreated(), true);
    DialogControlCreateFromTemplate(DialogLastCreated(), c_triggerControlTypePanel, "AttackDefendRoundOver/AttackDefendRoundOverVictoryPanelTemplate");
    lv_victoryPanel = DialogControlLastCreated();
    DialogControlSetFullDialog(lv_victoryPanel, libGame_gf_PlayersOnTeamHeroes(lv_victoryTeam, false), true);
    DialogControlSetVisible(lv_victoryPanel, libGame_gf_PlayersOnTeamHeroes(lv_victoryTeam, false), true);
    DialogControlHookup(lv_victoryPanel, c_triggerControlTypeLabel, "TitleLabel");
    libNtve_gf_SetDialogItemText(DialogControlLastCreated(), StringExternal("Param/Value/lib_AtDe_9C0920B0"), libGame_gf_PlayersOnTeamHeroes(lv_victoryTeam, false));
    DialogSetVisible(DialogLastCreated(), libGame_gf_PlayersOnTeamHeroes(lv_victoryTeam, false), true);
    DialogControlHookup(lv_victoryPanel, c_triggerControlTypeLabel, "TeamScoreTextLabel");
    DialogSetVisible(DialogLastCreated(), libGame_gf_PlayersOnTeamHeroes(lv_victoryTeam, false), true);
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialogLabel = DialogControlLastCreated();
    DialogCreate(500, 400, c_anchorCenter, 0, 0, true);
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialog = DialogLastCreated();
    DialogSetImageVisible(DialogLastCreated(), false);
    DialogSetFullscreen(DialogLastCreated(), true);
    DialogControlCreateFromTemplate(DialogLastCreated(), c_triggerControlTypePanel, "AttackDefendRoundOver/AttackDefendRoundOverDefeatPanelTemplate");
    lv_defeatPanel = DialogControlLastCreated();
    DialogControlSetFullDialog(lv_defeatPanel, libGame_gf_PlayersOnTeamHeroes(lv_defeatTeam, false), true);
    DialogControlHookup(lv_defeatPanel, c_triggerControlTypeLabel, "TitleLabel");
    libNtve_gf_SetDialogItemText(DialogControlLastCreated(), StringExternal("Param/Value/lib_AtDe_B0642BAB"), libGame_gf_PlayersOnTeamHeroes(lv_defeatTeam, false));
    DialogSetVisible(DialogLastCreated(), libGame_gf_PlayersOnTeamHeroes(lv_defeatTeam, false), true);
    DialogControlHookup(lv_defeatPanel, c_triggerControlTypeLabel, "TeamScoreTextLabel");
    DialogSetVisible(DialogLastCreated(), libGame_gf_PlayersOnTeamHeroes(lv_defeatTeam, false), true);
    libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialogLabel = DialogControlLastCreated();
    libAtDe_gf_AtDe_UI_RoundOverShowTeamScore(lv_victoryPanel, lv_victoryTeam);
    libAtDe_gf_AtDe_UI_RoundOverShowTeamScore(lv_defeatPanel, lv_defeatTeam);
}

void libAtDe_gf_AtDe_UI_RoundOverShowTeamScore (int lp_parentPanel, int lp_forTeam) {
    int init_i;
    int init_j;

    int auto97CC3CD7_ae;
    int auto97CC3CD7_ai;
    int autoAD898A69_ae;
    int autoAD898A69_ai;

    // Variable Declarations
    int lv_scorePanel;
    int[libCore_gv_bALMaxTeams + 1][3] lv_scoreImages;
    int lv_itTeam;
    int lv_itImage;
    int lv_winningTeam;
    int lv_losingTeam;
    int lv_teamOrder;
    int lv_teamChaos;

    // Variable Initialization
    lv_scorePanel = c_invalidDialogControlId;
    for (init_i = 0; init_i <= libCore_gv_bALMaxTeams; init_i += 1) {
        for (init_j = 0; init_j <= 2; init_j += 1) {
            lv_scoreImages[init_i][init_j] = c_invalidDialogControlId;
        }
    }

    // Implementation
    DialogControlHookup(lp_parentPanel, c_triggerControlTypePanel, "TeamScore");
    lv_scorePanel = DialogControlLastCreated();
    if ((lp_forTeam == libAtDe_gv_attackDefend.lv_currentRoundWinner)) {
        lv_winningTeam = lp_forTeam;
        lv_losingTeam = libGame_gf_EnemyTeam(lv_winningTeam);
        if ((lp_forTeam == libGame_gv_teamOrderIndex_C)) {
            TextExpressionSetToken("Param/Expression/lib_AtDe_0809C161", "A", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_winningTeam]));
            TextExpressionSetToken("Param/Expression/lib_AtDe_0809C161", "B", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_losingTeam]));
            libNtve_gf_SetDialogItemText(libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialogLabel, TextExpressionAssemble("Param/Expression/lib_AtDe_0809C161"), libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false));
        }
        else {
            TextExpressionSetToken("Param/Expression/lib_AtDe_E36A260E", "A", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_losingTeam]));
            TextExpressionSetToken("Param/Expression/lib_AtDe_E36A260E", "B", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_winningTeam]));
            libNtve_gf_SetDialogItemText(libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialogLabel, TextExpressionAssemble("Param/Expression/lib_AtDe_E36A260E"), libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false));
        }
    }
    else {
        lv_losingTeam = lp_forTeam;
        lv_winningTeam = libGame_gf_EnemyTeam(lv_losingTeam);
        if ((lp_forTeam == libGame_gv_teamOrderIndex_C)) {
            TextExpressionSetToken("Param/Expression/lib_AtDe_40A47B28", "A", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_losingTeam]));
            TextExpressionSetToken("Param/Expression/lib_AtDe_40A47B28", "B", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_winningTeam]));
            libNtve_gf_SetDialogItemText(libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialogLabel, TextExpressionAssemble("Param/Expression/lib_AtDe_40A47B28"), libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false));
        }
        else {
            TextExpressionSetToken("Param/Expression/lib_AtDe_3BCEE988", "A", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_winningTeam]));
            TextExpressionSetToken("Param/Expression/lib_AtDe_3BCEE988", "B", IntToText(libAtDe_gv_attackDefend.lv_roundScore[lv_losingTeam]));
            libNtve_gf_SetDialogItemText(libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialogLabel, TextExpressionAssemble("Param/Expression/lib_AtDe_3BCEE988"), libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false));
        }
    }
    auto97CC3CD7_ae = 2;
    auto97CC3CD7_ai = 1;
    lv_itTeam = 1;
    for ( ; ( (auto97CC3CD7_ai >= 0 && lv_itTeam <= auto97CC3CD7_ae) || (auto97CC3CD7_ai <= 0 && lv_itTeam >= auto97CC3CD7_ae) ) ; lv_itTeam += auto97CC3CD7_ai ) {
        autoAD898A69_ae = 2;
        autoAD898A69_ai = 1;
        lv_itImage = 1;
        for ( ; ( (autoAD898A69_ai >= 0 && lv_itImage <= autoAD898A69_ae) || (autoAD898A69_ai <= 0 && lv_itImage >= autoAD898A69_ae) ) ; lv_itImage += autoAD898A69_ai ) {
            DialogControlHookup(lv_scorePanel, c_triggerControlTypeImage, libNtve_gf_ConvertStringToUILayoutFrameName(("Team" + IntToString(lv_itTeam) + "ScoreImage" + IntToString(lv_itImage))));
            lv_scoreImages[lv_itTeam][lv_itImage] = DialogControlLastCreated();
            if ((lv_itTeam != lp_forTeam)) {
                libNtve_gf_SetDialogItemImage(lv_scoreImages[lv_itTeam][lv_itImage], "Assets\\Textures\\hud_arena_roundscreen_trophyframe_enable_red.dds", libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false));
            }

            if ((libAtDe_gv_attackDefend.lv_roundScore[lv_itTeam] >= lv_itImage)) {
                DialogControlSetVisible(lv_scoreImages[lv_itTeam][lv_itImage], libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false), true);
            }
            else {
                DialogControlSetVisible(lv_scoreImages[lv_itTeam][lv_itImage], libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false), false);
            }
        }
    }
    DialogControlSetVisible(lv_scorePanel, libGame_gf_PlayersOnTeamHeroes(lp_forTeam, false), true);
    libAtDe_gf_AtDe_UI_TeamScoreUpdate();
}

void libAtDe_gf_AtDe_UI_RoundOverDestroy () {
    // Implementation
    if ((libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialog != c_invalidDialogId)) {
        DialogDestroy(libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialog);
        libAtDe_gv_atDe_UI_RoundOverPanel.lv_victoryDialog = c_invalidDialogId;
    }

    if ((libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialog != c_invalidDialogId)) {
        DialogDestroy(libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialog);
        libAtDe_gv_atDe_UI_RoundOverPanel.lv_defeatDialog = c_invalidDialogId;
    }

}

void libAtDe_gf_AtDe_UI_RoundOver_ShowWinLossConditions (bool lp_boatDocked, int lp_boatTeam) {
    // Variable Declarations
    int lv_enemyTeam;

    // Variable Initialization

    // Implementation
    lv_enemyTeam = libGame_gf_EnemyTeam(lp_boatTeam);
    if ((lp_boatDocked == true)) {
        libMapM_gf_MapMechanicDisplayAnnouncementMultipleAllowed(StringExternal("Param/Value/lib_AtDe_CEE88B01"), false, 0.5, 3.5, libMapM_ge_MapMechanicAnnouncementAllyOptions_AllySmall, libGame_gv_teams[lp_boatTeam].lv_teamPlayerGroup);
        libMapM_gf_MapMechanicDisplayAnnouncementMultipleAllowed(StringExternal("Param/Value/lib_AtDe_B45ACECB"), false, 0.5, 3.5, libMapM_ge_MapMechanicAnnouncementAllyOptions_AllySmall, libGame_gv_teams[lv_enemyTeam].lv_teamPlayerGroup);
    }
    else {
        libMapM_gf_MapMechanicDisplayAnnouncementMultipleAllowed(StringExternal("Param/Value/lib_AtDe_3AAA6B9C"), false, 0.5, 3.5, libMapM_ge_MapMechanicAnnouncementAllyOptions_AllySmall, libGame_gv_teams[lp_boatTeam].lv_teamPlayerGroup);
        libMapM_gf_MapMechanicDisplayAnnouncementMultipleAllowed(StringExternal("Param/Value/lib_AtDe_413E2BEA"), false, 0.5, 3.5, libMapM_ge_MapMechanicAnnouncementAllyOptions_AllySmall, libGame_gv_teams[lv_enemyTeam].lv_teamPlayerGroup);
    }
}

void libAtDe_gf_AtDe_UI_RoundOver_ShowRoundOverText () {
    // Implementation
    libMapM_gf_MapMechanicDisplayAnnouncementMultipleAllowed(StringExternal("Param/Value/lib_AtDe_A09369B1"), false, 0.5, 3.5, libMapM_ge_MapMechanicAnnouncementAllyOptions_Ally, PlayerGroupAll());
}

// Triggers
//--------------------------------------------------------------------------------------------------
// Trigger: #Include AttackDefend
//--------------------------------------------------------------------------------------------------
bool libAtDe_gt_IncludeAttackDefend_Func (bool testConds, bool runActions) {
    return true;
}

//--------------------------------------------------------------------------------------------------
void libAtDe_gt_IncludeAttackDefend_Init () {
    libAtDe_gt_IncludeAttackDefend = TriggerCreate("libAtDe_gt_IncludeAttackDefend_Func");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hero Spawned - Pause Hero Units
//--------------------------------------------------------------------------------------------------
bool libAtDe_gt_HeroSpawnedPauseHeroUnits_Func (bool testConds, bool runActions) {
    // Conditions
    if (testConds) {
        if (!((libCore_gv_sYSGameMode == libCore_ge_GameModes_AttackDefend))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    if ((libAtDe_gv_pausePlayerForInstructions[libGame_gf_HeroSpawnPlayer()] == true)) {
        libNtve_gf_PauseUnit(libGame_gv_players[libGame_gf_HeroSpawnPlayer()].lv_heroUnit, true);
        UnitGroupLoopBegin(libGame_gv_players[libGame_gf_HeroSpawnPlayer()].lv_heroUnitGroup);
        for ( ; !UnitGroupLoopDone() ; UnitGroupLoopStep() ) {
            libNtve_gf_PauseUnit(UnitGroupLoopCurrent(), true);
        }
        UnitGroupLoopEnd();
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libAtDe_gt_HeroSpawnedPauseHeroUnits_Init () {
    libAtDe_gt_HeroSpawnedPauseHeroUnits = TriggerCreate("libAtDe_gt_HeroSpawnedPauseHeroUnits_Func");
    libGame_gf_HeroSpawn(libAtDe_gt_HeroSpawnedPauseHeroUnits);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Game Starts
//--------------------------------------------------------------------------------------------------
bool libAtDe_gt_GameStarts_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    libAtDe_gf_DisplayAttackDefendForTeam();
    libAtDe_gf_MAtD_StartRoundStructureAnimations();
    return true;
}

//--------------------------------------------------------------------------------------------------
void libAtDe_gt_GameStarts_Init () {
    libAtDe_gt_GameStarts = TriggerCreate("libAtDe_gt_GameStarts_Func");
    libGame_gf_GameOpenTimerStarted(libAtDe_gt_GameStarts);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Round Ends
//--------------------------------------------------------------------------------------------------
bool libAtDe_gt_RoundEnds_Func (bool testConds, bool runActions) {
    int auto8FF9F7FA_ae;
    int auto8FF9F7FA_ai;
    int auto2B335E9A_ae;
    int auto2B335E9A_ai;

    // Variable Declarations
    int lv_itPlayer;
    int lv_winningTeam;

    // Variable Initialization
    lv_winningTeam = libAtDe_gf_AttackDefendWinningTeamForRound();

    // Actions
    if (!runActions) {
        return true;
    }

    libAtDe_gv_attackDefend.lv_currentRoundWinner = lv_winningTeam;
    libAtDe_gv_attackDefend.lv_roundScore[lv_winningTeam] += 1;
    UnitPauseAll(true);
    TriggerEnable(libAtDe_gt_HeroSpawnedPauseHeroUnits, true);
    libAIAI_gf_TowerTurnTowerSystemOnOff(false);
    libUIUI_gf_DeathTimerPanelPauseTimerAnimations();
    auto8FF9F7FA_ae = 10;
    auto8FF9F7FA_ai = 1;
    lv_itPlayer = 1;
    for ( ; ( (auto8FF9F7FA_ai >= 0 && lv_itPlayer <= auto8FF9F7FA_ae) || (auto8FF9F7FA_ai <= 0 && lv_itPlayer >= auto8FF9F7FA_ae) ) ; lv_itPlayer += auto8FF9F7FA_ai ) {
        if ((libGame_gv_players[lv_itPlayer].lv_heroUnit != null)) {
            libNtve_gf_StopTimer(libGame_gv_players[lv_itPlayer].lv_respawnTimer);
        }

    }
    if ((libAtDe_gv_attackDefend.lv_currentRound < 2)) {
        libAtDe_gf_RoundEndsFadeInOut(false);
    }

    libAtDe_gv_attackDefend.lv_currentRoundWinner = 0;
    Wait(4.0, c_timeGame);
    if ((libAtDe_gv_attackDefend.lv_currentRound < libAtDe_gv_attackDefend.lv_totalRounds)) {
        libAtDe_gf_RoundEndsResetAttackingDefendingTeams();
        libAtDe_gf_RoundEndsResetPoints();
        libAtDe_gf_RoundEndsResetRegions();
        libAtDe_gf_RoundEndsResetStructures();
        libAtDe_gf_RoundEndsResetDoodads();
        libAtDe_gf_RoundEndsResetVisibility();
        libAtDe_gf_GameStartsSetStructureVariables();
        libAIAI_gf_TowerTurnTowerSystemOnOff(true);
        libAtDe_gf_SendEventAttackDefendRoundResetOccurring();
        Wait(1.0, c_timeGame);
        PlayerGroupLoopBegin(libCore_gv_activeHumanPlayers);
        for ( ; !PlayerGroupLoopDone() ; PlayerGroupLoopStep() ) {
            CameraLockInput(PlayerGroupLoopCurrent(), false);
            PlayerOptionOverride(PlayerGroupLoopCurrent(), "camerafollow", "1");
            libGame_gf_HeroDeathEnableDisableDeadSoundStateForPlayer(true, PlayerGroupLoopCurrent());
        }
        PlayerGroupLoopEnd();
        Wait(0.0625, c_timeGame);
        auto2B335E9A_ae = 10;
        auto2B335E9A_ai = 1;
        lv_itPlayer = 1;
        for ( ; ( (auto2B335E9A_ai >= 0 && lv_itPlayer <= auto2B335E9A_ae) || (auto2B335E9A_ai <= 0 && lv_itPlayer >= auto2B335E9A_ae) ) ; lv_itPlayer += auto2B335E9A_ai ) {
            if ((libGame_gv_players[lv_itPlayer].lv_heroUnit != null)) {
                libUIUI_gf_UIDebugPanelSpawnOrSwapHeroForPlayer(libCore_gf_GetIndexFromHero(PlayerHero(lv_itPlayer)), libCore_gf_DataSkinsGetSkinIndexFromSkinLink(PlayerSkin(lv_itPlayer)), libCore_gf_DataMountGetMountIndexFromMountLink(PlayerMount(lv_itPlayer)), UnitLevel(libGame_gv_players[lv_itPlayer].lv_heroUnit), lv_itPlayer, 0);
                CameraPan(lv_itPlayer, libGame_gv_players[lv_itPlayer].lv_spawnPoint, 0.0, -1, 10.0, false);
                libNtve_gf_StopTimer(libGame_gv_players[lv_itPlayer].lv_respawnTimer);
                libNtve_gf_StopTimer(libGame_gv_players[lv_itPlayer].lv_deathToastTimer);
                UnitGroupLoopBegin(libGame_gv_players[lv_itPlayer].lv_heroUnitGroup);
                for ( ; !UnitGroupLoopDone() ; UnitGroupLoopStep() ) {
                    libNtve_gf_SendActorMessageToUnit(UnitGroupLoopCurrent(), "SetShowStatusBar");
                }
                UnitGroupLoopEnd();
            }

        }
        libAtDe_gf_RoundEndsResetGateConfinement();
    }
    else {
        libAtDe_gf_SendEventAttackDefendGameOver();
    }
    if ((libAtDe_gv_attackDefend.lv_currentRound < libAtDe_gv_attackDefend.lv_totalRounds)) {
        libAtDe_gf_RoundEndsFadeInOut(true);
        libAtDe_gf_MAtD_StartRoundStructureAnimations();
        libAtDe_gf_DisplayAttackDefendForTeam();
        UnitPauseAll(false);
    }

    libAtDe_gv_attackDefend.lv_currentRound += 1;
    libAtDe_gf_SendEventAttackDefendRoundResetComplete();
    return true;
}

//--------------------------------------------------------------------------------------------------
void libAtDe_gt_RoundEnds_Init () {
    libAtDe_gt_RoundEnds = TriggerCreate("libAtDe_gt_RoundEnds_Func");
    libAtDe_gf_AttackDefendRoundEnds(libAtDe_gt_RoundEnds);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Team Instruction Closed Button Clicked
//--------------------------------------------------------------------------------------------------
bool libAtDe_gt_TeamInstructionClosedButtonClicked_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_team;

    // Variable Initialization

    // Conditions
    if (testConds) {
        if (!(((EventDialogControl() == libAtDe_gv_mAtD_TeamInstructions[1].lv_oKButton) || (EventDialogControl() == libAtDe_gv_mAtD_TeamInstructions[2].lv_oKButton)))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    lv_team = libGame_gf_TeamNumberOfPlayer(EventPlayer());
    libAtDe_gv_pausePlayerForInstructions[EventPlayer()] = false;
    libAtDe_gf_MapMechanicHelpPanelShowHide(lv_team, PlayerGroupSingle(EventPlayer()));
    libNtve_gf_PauseUnit(libGame_gv_players[EventPlayer()].lv_heroUnit, false);
    UnitGroupLoopBegin(libGame_gv_players[EventPlayer()].lv_heroUnitGroup);
    for ( ; !UnitGroupLoopDone() ; UnitGroupLoopStep() ) {
        libNtve_gf_PauseUnit(UnitGroupLoopCurrent(), false);
    }
    UnitGroupLoopEnd();
    return true;
}

//--------------------------------------------------------------------------------------------------
void libAtDe_gt_TeamInstructionClosedButtonClicked_Init () {
    libAtDe_gt_TeamInstructionClosedButtonClicked = TriggerCreate("libAtDe_gt_TeamInstructionClosedButtonClicked_Func");
    TriggerAddEventDialogControl(libAtDe_gt_TeamInstructionClosedButtonClicked, c_playerAny, c_invalidDialogControlId, c_triggerControlEventTypeClick);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Hero Select Init
//--------------------------------------------------------------------------------------------------
bool libAtDe_gt_HeroSelectInit_Func (bool testConds, bool runActions) {
    // Actions
    if (!runActions) {
        return true;
    }

    DialogCreate(500, 400, c_anchorCenter, 0, 0, true);
    DialogSetFullscreen(DialogLastCreated(), true);
    DialogSetVisible(DialogLastCreated(), PlayerGroupAll(), true);
    DialogSetImageVisible(DialogLastCreated(), false);
    DialogControlCreateFromTemplate(DialogLastCreated(), c_triggerControlTypePanel, "FullPickInGameheroSelectionUI/HeroUnrankedPanel");
    DialogControlSetVisible(DialogControlLastCreated(), PlayerGroupAll(), true);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libAtDe_gt_HeroSelectInit_Init () {
    libAtDe_gt_HeroSelectInit = TriggerCreate("libAtDe_gt_HeroSelectInit_Func");
    TriggerAddEventChatMessage(libAtDe_gt_HeroSelectInit, c_playerAny, "-initheroselect", true);
}

void libAtDe_InitTriggers () {
    libAtDe_gt_IncludeAttackDefend_Init();
    libAtDe_gt_HeroSpawnedPauseHeroUnits_Init();
    libAtDe_gt_GameStarts_Init();
    libAtDe_gt_RoundEnds_Init();
    libAtDe_gt_TeamInstructionClosedButtonClicked_Init();
    libAtDe_gt_HeroSelectInit_Init();
}

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
bool libAtDe_InitLib_completed = false;

void libAtDe_InitLib () {
    if (libAtDe_InitLib_completed) {
        return;
    }

    libAtDe_InitLib_completed = true;

    libAtDe_InitLibraries();
    libAtDe_InitVariables();
    libAtDe_InitTriggers();
}

