<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<Catalog>
    <!--    Medivh Abilities   -->
    <CAbilEffectInstant id="MedivhTransformRaven">
        <Effect value="MedivhTransformRavenChannelPersistent"/>
        <CastIntroTime value="1.5"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhTransformRaven" Requirements="MedivhNoTransformRavenActive"/>
        <PrepEffect value="HeroGenericMountAbilityUsePrepareEffectSet"/>
        <ShowProgressArray index="Cast" value="1"/>
        <SetLastTarget value="Move"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <Activity value="Abil/MedivhTransformRaven/Activity"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="1"/>
        </Cost>
        <AbilityCategories index="Mount" value="1"/>
        <AbilityCategories index="RequiresCastTime" value="1"/>
        <AbilityCategories index="InterruptedByDamage" value="1"/>
    </CAbilEffectInstant>
    <CAbilEffectInstant id="MedivhTransformRavenFountain">
        <PrepEffect value="HeroGenericMountAbilityUsePrepareEffectSet"/>
        <Effect value="MedivhTransformRavenFountainSet"/>
        <SetLastTarget value="Move"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhTransformRaven" Requirements="MedivhTransformRavenAtFountain"/>
        <ParentAbil value="MedivhTransformRaven"/>
    </CAbilEffectInstant>
    <CAbilEffectInstant id="MedivhTransformRavenLand">
        <OrderArray index="0" LineTexture="Assets\Textures\WayPointLine.dds"/>
        <PrepEffect value="HeroGenericMountAbilityUsePrepareEffectSet"/>
        <Effect value="MedivhTransformRavenLandChannelPersistent"/>
        <SetLastTarget value="Move"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhTransformRavenLand" Requirements="MedivhTransformRavenActive"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="0.0625"/>
        </Cost>
        <ParentAbil value="MedivhTransformRaven"/>
        <AbilityCategories index="Dismount" value="1"/>
    </CAbilEffectInstant>
    <CAbilEffectTarget id="MedivhForceOfWill">
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhForceOfWillInitialSet"/>
        <Cost>
            <Vital index="Energy" value="50"/>
            <Cooldown Location="Unit" TimeUse="5"/>
        </Cost>
        <TargetFilters value="Heroic;Neutral,Enemy,Missile,Item,Stasis,Dead,Hidden"/>
        <Range value="13"/>
        <Arc value="360"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <ValidatedArray index="Approach" value="0"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhForceOfWill" Requirements="MedivhAbilityCastLocationPathable"/>
    </CAbilEffectTarget>
    <CAbilMorph id="MedivhTransformRavenMorph" parent="StormMorph">
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhTransformRavenMorph">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <CmdButtonArray index="Cancel" DefaultButtonFace="Cancel"/>
        <ActorKey value="HeroMedivhRaven"/>
        <Flags index="IgnoreFacing" value="1"/>
        <Flags index="SuppressMovement" value="1"/>
        <Flags index="Transient" value="1"/>
        <InfoArray Unit="HeroMedivhRaven"/>
        <ParentAbil value="MedivhTransformRaven"/>
    </CAbilMorph>
    <CAbilMorph id="MedivhTransformRavenGuardianMorph" parent="StormMorph">
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhTransformRavenGuardianMorph">
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <CmdButtonArray index="Cancel" DefaultButtonFace="Cancel"/>
        <ActorKey value="HeroMedivh"/>
        <Flags index="IgnoreFacing" value="1"/>
        <Flags index="SuppressMovement" value="1"/>
        <Flags index="Transient" value="1"/>
        <InfoArray Unit="HeroMedivh"/>
        <ParentAbil value="MedivhTransformRaven"/>
    </CAbilMorph>
    <CAbilEffectTarget id="MedivhPortal1">
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhPortalCreateMarkerUnit"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Cost>
            <Vital index="Energy" value="75"/>
            <Cooldown Location="Unit" TimeUse="1"/>
        </Cost>
        <Placeholder value="MedivhPortal"/>
        <Range value="16"/>
        <Arc value="360"/>
        <ErrorAlert value="Error"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhPortal" Requirements="MedivhPortalPortalMasteryLearned"/>
        <PlaceUnit value="MedivhPortalPlacementMarker"/>
        <ValidatedArray index="Approach" value="0"/>
        <ParentAbil value="MedivhPortalInstant"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="MedivhPortal2">
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhPortalCreateCreationUnit"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="20"/>
        </Cost>
        <Placeholder value="MedivhPortal"/>
        <Range value="16"/>
        <Arc value="360"/>
        <ValidatedArray index="Approach" value="0"/>
        <ErrorAlert value="Error"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhPortal" Requirements="MedivhPortalMarkerActive">
            <Flags index="AllowSelfCast" value="0"/>
            <Flags index="ToSelection" value="1"/>
        </CmdButtonArray>
        <PlaceUnit value="MedivhPortalPlacementMarker"/>
        <MinimumRange value="7.5"/>
        <CursorRangeMode value="Clamp"/>
        <ParentAbil value="MedivhPortalInstant"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="MedivhPortalInstant">
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhPortalCreationInstantSet"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Cost>
            <Vital index="Energy" value="75"/>
            <Cooldown Location="Unit" TimeUse="20"/>
        </Cost>
        <Range value="16"/>
        <Arc value="219.9902"/>
        <ErrorAlert value="Error"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhPortal" Requirements="AbilityCastLocationPathableAndNoPortalsActive"/>
        <PlaceUnit value="MedivhPortalPlacementMarker"/>
        <ValidatedArray index="Approach" value="0"/>
        <MinimumRange value="7"/>
        <CursorRangeMode value="Clamp"/>
        <!-- CastOutroTime changes should also be made to the MedivhPortalPortalMasteryCastStun behavior's duration. -->
        <CastOutroTime value="0.1"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="MedivhPortalCancel">
        <OrderArray index="0" LineTexture="Assets\Textures\WayPointLine.dds"/>
        <Effect value="MedivhPortalMarkerCarryRemove"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhPortalCancel" Requirements="MedivhPortalMarkerCancel"/>
        <Cost>
            <Vital index="Energy" value="-75"/>
        </Cost>
        <ParentAbil value="MedivhPortalInstant"/>
    </CAbilEffectInstant>
    <CAbilEffectTarget id="MedivhArcaneRift">
        <PrepEffect value="MedivhArcaneRiftAbilityPrepareSet"/>
        <Effect value="MedivhArcaneRiftCreatePersistent"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Cost>
            <Vital index="Energy" value="50"/>
            <Cooldown Location="Unit" TimeUse="7"/>
        </Cost>
        <Range value="500"/>
        <Arc value="360"/>
        <CastIntroTime value="0.125"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <ValidatedArray index="Approach" value="0"/>
        <CursorEffect value="MedivhArcaneRiftMissileScan"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhArcaneRift" Requirements="MedivhAbilityCastLocationPathable">
            <Flags index="AllowSelfCast" value="0"/>
        </CmdButtonArray>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="MedivhLeyLineSeal">
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhLeyLineSealInitialSet"/>
        <Flags index="ClearLastAttackTarget" value="1"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Cost>
            <Vital index="Energy" value="75"/>
            <Cooldown Location="Unit" TimeUse="80"/>
        </Cost>
        <Range value="500"/>
        <Arc value="219.9902"/>
        <CastIntroTime value="0.5"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhLeyLineSeal" Requirements="MedivhSpecialCaseUltimate2Unlocked">
            <Flags index="AllowSelfCast" value="0"/>
        </CmdButtonArray>
        <CursorEffect value="MedivhLeyLineSealMissileScan"/>
        <Activity value="Abil/MedivhLeyLineSeal/Activity"/>
        <ShowProgressArray index="Cast" value="1"/>
        <ValidatedArray index="Approach" value="0"/>
        <InterruptArray index="Cast" value="1"/>
        <InterruptCost>
            <Cooldown Location="Unit" Operation="Set" TimeUse="10"/>
        </InterruptCost>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="MedivhLeyLineSealMedivhCheats">
        <Activity value="Abil/MedivhLeyLineSealMedivhCheats/Activity"/>
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhLeyLineSealMedivhCheatsInitialPersistent"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="10"/>
        </Cost>
        <Range value="500"/>
        <Arc value="219.9902"/>
        <ShowProgressArray index="Cast" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <ValidatedArray index="Approach" value="0"/>
        <CursorEffect value="MedivhLeyLineSealMissileScan"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhLeyLineSealRedirect" Requirements="MedivhLeyLineSealMedivhCheatsAvailable">
            <Flags index="AllowSelfCast" value="0"/>
        </CmdButtonArray>
        <InterruptArray index="Cast" value="1"/>
        <InterruptCost>
            <Cooldown Location="Unit" Operation="Set" TimeUse="10"/>
        </InterruptCost>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="MedivhDustOfAppearance">
        <OrderArray index="0" Model="Assets\Units\Test\InvisibleUnit\InvisibleUnit.m3" LineTexture="Assets\Textures\Storm_WayPointLine.dds"/>
        <Effect value="MedivhDustOfAppearanceSearch"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="45"/>
        </Cost>
        <PrepEffect value="DecloakCasterSet"/>
        <ValidatedArray index="Approach" value="0"/>
    </CAbilEffectInstant>
    <CAbilEffectInstant id="MedivhTransformRavenBirdsEyeView">
        <OrderArray index="0" Model="Assets\Units\Test\InvisibleUnit\InvisibleUnit.m3" LineTexture="Assets\Textures\Storm_WayPointLine.dds"/>
        <Effect value="MedivhTransformRavenBirdsEyeViewApply"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="30"/>
        </Cost>
        <CmdButtonArray index="Execute" Requirements="MedivhTransformRavenBirdsEyeView"/>
        <ParentAbil value="MedivhTransformRaven"/>
    </CAbilEffectInstant>
    <CAbilEffectTarget id="MedivhPolyBomb">
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhPolyBombSet"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Cost>
            <Vital index="Energy" value="75"/>
            <Cooldown Location="Unit" TimeUse="40"/>
        </Cost>
        <TargetFilters value="Heroic;Player,Ally,Neutral,Minion,Merc,ImmuneToAOE,Structure,Missile,Item,Stasis,Dead,Hidden,Invulnerable,Unstoppable"/>
        <Range value="7"/>
        <Arc value="360"/>
        <CastIntroTime value="0.15"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhPolyBomb" Requirements="MedivhSpecialCaseUltimate1Unlocked">
            <Flags index="AllowSelfCast" value="0"/>
        </CmdButtonArray>
        <ValidatedArray index="Approach" value="0"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="MedivhInvisibility">
        <Activity value="Abil/MedivhInvisibility/Activity"/>
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhInvisibilityCloakApplySet"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Cost>
            <Vital index="Energy" value="40"/>
            <Charge>
                <CountMax value="2"/>
                <CountStart value="2"/>
                <CountUse value="1"/>
                <Location value="Unit"/>
                <TimeUse value="10"/>
            </Charge>
        </Cost>
        <TargetFilters value="Heroic;Neutral,Enemy,Stasis,Summoned"/>
        <Range value="9"/>
        <Arc value="219.9902"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <ValidatedArray index="Approach" value="0"/>
        <CursorEffect value="MedivhArcaneRiftMissileScan"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhInvisibility" Requirements="MedivhAbilityCastLocationPathable"/>
        <CastIntroTime value="0.1"/>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="MedivhArcaneBrilliance">
        <PrepEffect value="MedivhDismountDecloakCasterSet"/>
        <Effect value="MedivhArcaneBrillianceApplySearch"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="60"/>
        </Cost>
        <ValidatedArray index="Approach" value="0"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="MedivhArcaneBrilliance"/>
    </CAbilEffectInstant>
    <CActorAction id="MedivhArcaneRiftImpactAction" parent="RangedHeroAttack" effectAttack="MedivhArcaneRiftDamage">
        <ImpactMap index="None" Model="MedivhArcaneRiftImpact" Sound="Medivh_ArcaneRift_Impact"/>
    </CActorAction>
    <CActorAction id="MedivhArcaneRiftArcaneChargeImpact" parent="RangedHeroAttack" effectAttack="MedivhArcaneRiftArcaneChargeDamage">
        <ImpactMap index="None" Model="MedivhArcaneRiftImpact" Sound="Medivh_ArcaneRift_Impact"/>
    </CActorAction>
    <CActorAction id="MedivhArcaneRiftGuardianOfTirisfalImpact" parent="RangedHeroAttack" effectAttack="MedivhArcaneRiftGuardianOfTirisfalMinionKill">
        <ImpactMap index="None" Model="MedivhArcaneRiftImpact" Sound="Medivh_ArcaneRift_Impact"/>
    </CActorAction>
    <CActorScene id="SYSTEM_Scene">
        <On Terms="SceneEffectSearchNotifyResults.MedivhArcaneRiftMissileScan" Send="SceneEffectSearchResponse DoodadImpactable"/>
        <On Terms="SceneEffectSearchNotifyResults.MedivhPolyBombSpreadSearchArea" Send="SceneEffectSearchResponse DoodadImpactable"/>
        <On Terms="SceneEffectSearchNotifyResults.MedivhLeyLineSealMissileScan" Send="SceneEffectSearchResponse DoodadImpactable"/>
    </CActorScene>
    <CActorRegionCircle id="DoodadImpactSearch2">
        <On Terms="Effect.MedivhForceOfWillApply.Start; At Effect" Send="Create"/>
    </CActorRegionCircle>
    <CActorRegionCircle id="DoodadImpactSearch3">
        <On Terms="Effect.MedivhPortalCreateRealUnit.Start; At Effect" Send="Create"/>
    </CActorRegionCircle>
    <!--    Medivh Actors    -->
    <CActorUnit id="HeroMedivh" parent="StormHeroBase" unitName="HeroMedivh">
        <On Terms="ActorCreation" Send="AnimPlay DefaultFace DefaultFace PlayForever"/>
        <!-- Auto-Attack -->
        <On Terms="WeaponStart.*.AttackStart" Send="AnimPlay Attack Attack"/>
        <On Terms="UnitMovementUpdate.*.Walk" Send="AnimClear Attack"/>
        <!-- Spell Animation Clear On Movement Update -->
        <On Terms="ActorCreation" Send="StatusSet Stationary 1"/>
        <On Terms="UnitMovementUpdate.*.Walk" Send="StatusSet Stationary 0"/>
        <On Terms="UnitMovementUpdate.*.Stand" Send="StatusSet Stationary 1"/>
        <On Terms="Abil" Send="TimerSet 0.650000 QuickCapeSettle"/>
        <On Terms="Abil" Send="TimerSet 3.000000 LongCapeSettle"/>
        <On Terms="TimerExpired; TimerName QuickCapeSettle; IsStatus Stationary 0" Send="AnimClear Spell 0.200000"/>
        <On Terms="TimerExpired; TimerName QuickCapeSettle; IsStatus Stationary 0" Send="TimerKill QuickCapeSettle"/>
        <On Terms="TimerExpired; TimerName QuickCapeSettle; IsStatus Stationary 1" Send="TimerSet 0.200000 QuickCapeSettle"/>
        <On Terms="TimerExpired; TimerName LongCapeSettle" Send="TimerKill QuickCapeSettle"/>
        <!-- Transform: Raven -->
        <On Terms="Abil.MedivhTransformRaven.SourceCastStart" Send="Create MedivhTransformRavenStartSound"/>
        <On Terms="Abil.MedivhTransformRaven.SourceCastStop" Target="MedivhTransformRavenStartSound" Send="Destroy"/>
        <On Terms="Effect.MedivhTransformRavenChannelPersistent.Start" Target="MedivhTransformRavenCancelSound" Send="Destroy"/>
        <On Terms="Abil.MedivhTransformRaven.SourceCastStart" Send="$Spell,F,A"/>
        <!--<On Terms="Abil.MedivhTransformRaven.SourceCastStop" Target="MedivhTransformRavenChannelSound" Send="Destroy"/>-->
        <!--<On Terms="Abil.MedivhTransformRaven.SourceCastFinish" Target="MedivhTransformRavenChannelSound" Send="Destroy"/>-->
        <On Terms="Behavior.MedivhTransformRavenPending.On" Send="StatusIncrement StatusBarHide"/>
        <On Terms="Behavior.MedivhTransformRavenPending.Create" Send="Destroy"/>
        <On Terms="Effect.MedivhTransformRavenApply.Start; ValidateEffect MedivhCasterHasNoTransformRavenPending" Send="Destroy"/>
        <!--On Terms="AbilMorph.*.Start; MorphTo HeroMedivhRaven" Send="Destroy"/-->
        <On Terms="AbilMorph.*.Finish; MorphTo HeroMedivh" Send="Create"/>
        <On Terms="AbilMorph.*.Finish; MorphTo HeroMedivh" Send="ModelMaterialApply MedivhTransformRavenLandGlaze"/>
        <On Terms="Effect.MedivhTransformRavenLandDummy.Start" Send="AnimPlay Spell Morph,Alternate 0 -1.000000 -1.000000 3.500000 AsTimeScale"/>
        <On Terms="Effect.MedivhTransformRavenChannelPersistent.Start" Send="Create MedivhTransformRavenShrinkSound"/>
        <!-- Portal -->
        <On Terms="Abil.MedivhPortalInstant.SourceCastStart" Send="$Spell,C 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="Signal.*.Portal2CastFX" Send="$Spell,C 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="Signal.*.Portal2CastFX" Send="Create MedivhPortalCast"/>
        <!-- Force Of Will -->
        <On Terms="Abil.MedivhForceOfWill.SourceCastStart" Send="$Spell,A 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!-- Arcane Rift -->
        <On Terms="Abil.MedivhArcaneRift.SourceCastStart" Send="$Spell,B 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!-- Poly Bomb -->
        <On Terms="Abil.MedivhPolyBomb.SourceCastStart" Send="$Spell,D 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!-- Ley Line Seal -->
        <On Terms="Abil.MedivhLeyLineSeal.SourceCastStart" Send="$Spell,E 0 -1.000000 -1.000000 0.850000 AsTimeScale"/>
        <On Terms="Abil.MedivhLeyLineSeal.SourceCastStart" Send="Create MedivhLeyLineSealLaunchSound"/>
        <On Terms="Abil.MedivhLeyLineSeal.SourceCastStart" Send="Create MedivhLeyLineSealMissileLaunchSound"/>
        <On Terms="Effect.MedivhLeyLineSealMedivhCheatsControllerApply.Start" Send="Create MedivhLeyLineSealMedivhCheatsSiteModel"/>
        <On Terms="Abil.MedivhLeyLineSealMedivhCheats.TargetOn" Send="Create MedivhLeyLineSealMedivhCheatsGuide"/>
        <On Terms="Abil.MedivhLeyLineSealMedivhCheats.TargetOff" Target="MedivhLeyLineSealMedivhCheatsGuide" Send="Destroy"/>
        <!-- Dust of Appearance -->
        <On Terms="Abil.MedivhDustOfAppearance.SourceCastStart" Send="$Spell,A 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!-- Invisibility -->
        <On Terms="Abil.MedivhInvisibility.SourceCastStart" Send="$Spell,A 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!-- Arcane Brilliance -->
        <On Terms="Abil.MedivhArcaneBrilliance.SourceCastStart" Send="$Spell,A 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!-- Ultimate Evolution Actor Special Cases -->
        <On Terms="ActorCreation; ValidateUnit SourceHasAbathurUltimateEvolutionControl" Target="AbathurUltimateEvolutionBuff" Send="SetVisibility 1"/>
        <On Terms="ActorCreation; ValidateUnit SourceHasAbathurUltimateEvolutionControl" Target="_Unit" Send="SetTintColor 209,165,239 1.000000"/>
        <On Terms="ActorCreation" Send="Signal SpeedRibbonCheck"/>
        <PortraitActor value="MedivhPortrait"/>
        <PortraitModel value="MedivhPortrait"/>
        <GroupIcon>
            <Image value="Assets\Textures\storm_ui_ingame_partyframe_medivh.dds"/>
        </GroupIcon>
        <HeroIcon value="Assets\Textures\storm_ui_ingame_hero_icon_medivh.dds"/>
        <MinimapIcon value="Assets\Textures\storm_ui_minimapicon_medivh.dds"/>
        <MinimapIconBackgroundScale value="0.950000"/>
        <UnitIcon value="Assets\Textures\storm_ui_ingame_hero_icon_medivh.dds"/>
        <Wireframe>
            <Image value="Assets\Textures\storm_ui_ingame_hero_icon_medivh.dds"/>
        </Wireframe>
        <ModelFlags index="AutomateGlobalLoops" value="0"/>
        <AbilSoundArray AbilCmd="MedivhPortal1,Execute" Sound="MedivhBase_VOX_CastingE"/>
        <AbilSoundArray AbilCmd="MedivhPortal2,Execute" Sound="MedivhBase_VOX_CastingE"/>
        <AbilSoundArray AbilCmd="MedivhPortalInstant,Execute" Sound="MedivhBase_VOX_CastingE"/>
        <AbilSoundArray AbilCmd="MedivhPortalCancel,Execute" Sound="StormNoSound"/>
        <AbilSoundArray AbilCmd="MedivhArcaneRift,Execute" Sound="MedivhBase_VOX_CastingQ"/>
        <AbilSoundArray AbilCmd="MedivhLeyLineSeal,Execute" Sound="MedivhBase_Ultimate2Used"/>
        <AbilSoundArray AbilCmd="MedivhLeyLineSealMedivhCheats,Execute" Sound="MedivhBase_Ultimate1Used"/>
        <AbilSoundArray AbilCmd="MedivhPolyBomb,Execute" Sound="MedivhBase_Ultimate1Used"/>
        <AbilSoundArray AbilCmd="MedivhForceOfWill,Execute" Sound="MedivhBase_VOX_CastingW"/>
        <ErrorArray Error="NotEnoughEnergy" Sound="MedivhBase_LowMana"/>
        <SoundArray index="Yes" value="MedivhBase_Yes"/>
        <SoundArray index="Attack" value="MedivhBase_Attack"/>
        <SoundArray index="Pissed" value="MedivhBase_Pissed"/>
        <Macros value="TipableKnockbackMacro"/>
    </CActorUnit>
    <CActorUnit id="HeroMedivhRaven" parent="StormHeroBasePredictive" unitName="HeroMedivhRaven">
        <!-- Transform: Raven -->
        <On Terms="Behavior.MedivhTransformRavenPending.Create" Send="Create"/>
        <On Terms="ActorCreation" Send="Create MedivhTransformRavenMedivhImage"/>
        <On Terms="ActorCreation" Send="AnimPlay Spell Birth 0 0.000000"/>
        <On Terms="Effect.MedivhTransformRavenApply.Start; At Target; ValidateEffect MedivhCasterHasNoTransformRavenPending" Send="Create"/>
        <!--On Terms="AbilMorph.*.Finish; MorphTo HeroMedivhRaven" Send="Create"/-->
        <On Terms="AbilMorph.*.Start; MorphTo HeroMedivh" Send="Destroy"/>
        <!--<On Terms="AbilMorph.*.Finish; MorphTo HeroMedivhRaven" Send="Create MedivhTransformRavenChannelSound"/>-->
        <On Terms="ActorCreation" Send="Create MedivhTransformRavenTeamColor"/>
        <On Terms="ActorDestruction" Target="MedivhTransformRavenTeamColor" Send="AnimBracketStop BSD"/>
        <On Terms="ActorCreation" Send="Create MedivhTransformRavenFlyerHelperSplat"/>
        <On Terms="ActorDestruction" Target="MedivhTransformRavenFlyerHelperSplat" Send="Destroy"/>
        <On Terms="ActorCreation" Send="Create MedivhTransformRavenHeroRing"/>
        <On Terms="ActorDestruction" Target="MedivhTransformRavenHeroRing" Send="Destroy"/>
        <On Terms="ActorCreation" Target="RevealedBuff" Send="Destroy"/>
        <!-- Ultimate Evolution Actor Special Cases -->
        <On Terms="ActorCreation; ValidateUnit SourceHasAbathurUltimateEvolutionControl" Target="AbathurUltimateEvolutionBuff" Send="SetVisibility"/>
        <On Terms="ActorCreation; ValidateUnit SourceHasAbathurUltimateEvolutionControl" Target="_Unit" Send="SetTintColor 209,165,239 1.000000"/>
        <On Terms="ActorCreation" Target="StormMoveSpeedRibbonGreater" Send="Destroy"/>
        <On Terms="ActorCreation" Target="StormMoveSpeedRibbonMinor" Send="Destroy"/>
        <PortraitActor value="MedivhPortrait"/>
        <PortraitModel value="MedivhPortrait"/>
        <GroupIcon>
            <Image value="Assets\Textures\storm_ui_ingame_partyframe_medivh.dds"/>
        </GroupIcon>
        <HeroIcon value="Assets\Textures\storm_ui_ingame_hero_icon_medivh.dds"/>
        <MinimapIcon value="Assets\Textures\storm_ui_minimapicon_medivh_raven.dds"/>
        <MinimapIconBackgroundScale value="0.950000"/>
        <UnitIcon value="Assets\Textures\storm_ui_ingame_hero_icon_medivh.dds"/>
        <Wireframe>
            <Image value="Assets\Textures\storm_ui_ingame_hero_icon_medivh.dds"/>
        </Wireframe>
        <Remove Terms="ActorCreation" Send="Create Storm_HeroRing"/>
        <Remove Terms="ActorDestruction" Target="Storm_HeroRing" Send="Destroy"/>
        <Remove Terms="ActorCreation" Send="HostSiteOpsSet ::Host {SOpBasicScopeFollow SOpTipability}"/>
        <HostSiteOps Ops="MedivhTransformRavenSOpBanker"/>
        <CustomUnitStatusFrame value="Medivh/MedivhRavenFormStatusFrame"/>
        <BarOffset value="70"/>
        <Macros value="StormRemoveMoveSpeedRibbonMacro"/>
    </CActorUnit>
    <CActorModel id="MedivhTransformRavenMedivhImage" parent="StormModelAnimationStyleOneShot">
        <Remove Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce"/>
        <On Terms="ActorCreation" Send="ModelMaterialApply MedivhTransformRavenMedivhImageGlaze"/>
        <On Terms="ActorCreation" Send="AnimBracketStart BSD Spell,F,B {} {} ContentPlayOnce"/>
        <On Terms="ActorDestruction" Target="MedivhTransformRavenMedivhImageGlaze" Send="AnimBracketStop BSD"/>
        <HostSiteOps Ops="SOpShadow" HoldPosition="1" HoldRotation="1"/>
        <Flags index="VisionTestCenterOnly" value="1"/>
    </CActorModel>
    <CActorModel id="MedivhHomescreenFog" parent="StormModelAnimationStyleContinuous"/>
    <CActorUnitRing id="MedivhTransformRavenHeroRing" parent="Storm_HeroRing_Parent">
        <Host Subject="HeroMedivhRaven"/>
        <HostSiteOps Ops="SOpBasicScopeFollow SOpShadow SOpMoveDownByDot502"/>
        <ModelAspectSets>
            <Aspects RegardsAs="Friendly" Model="Storm_HeroRing_Teammate"/>
            <Aspects RegardsAs="Self" Model="Storm_HeroRing_Player"/>
            <Aspects RegardsAs="Enemy" Model="Storm_HeroRing_Enemy"/>
        </ModelAspectSets>
    </CActorUnitRing>
    <CActorBeamSimple id="MedivhTransformRavenFlyerHelperBeam" parent="BeamSimpleAnimationStyleContinuous">
        <Filter index="Ally" value="1"/>
        <Filter index="Enemy" value="1"/>
        <Inherits index="TeamColor" value="1"/>
        <Supporter Subject="_Unit" Actor="Find"/>
        <On Terms="ActorCreation" Send="SetTintColor 243,211,33"/>
        <On Terms="ActorOrphan" Send="Destroy"/>
        <Host Subject="::Creator"/>
        <HostLaunch Subject="_Unit" Actor="Find"/>
        <HostLaunchSiteOps Ops="SOp2DRotation"/>
        <HostImpact Subject="::Creator" Actor="Find"/>
    </CActorBeamSimple>
    <CActorSplat id="MedivhTransformRavenFlyerHelperSplat" parent="GenericUnitSplat">
        <Filter index="Ally" value="1"/>
        <Filter index="Enemy" value="1"/>
        <Inherits index="Visibility" value="0"/>
        <On Terms="UnitDeath" Send="Destroy"/>
        <On Terms="ActorCreation" Send="Create MedivhTransformRavenFlyerHelperBeam"/>
        <On Terms="ActorCreation" Send="SetTintColor 243,211,33"/>
        <On Terms="ActorDestruction" Target="MedivhTransformRavenFlyerHelperBeam" Send="Destroy"/>
        <On Terms="ActorOrphan" Send="Destroy"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpShadow SOpShadowRespectsBaseHeight SOp2DRotation"/>
    </CActorSplat>
    <CActorModel id="MedivhTransformRavenTeamColor" parent="StormModelAnimationStyleContinuousUnit">
        <Host Subject="HeroMedivhRaven"/>
        <HostSiteOps Ops="SOpAttachHardPoint" HoldRotation="1"/>
    </CActorModel>
    <CActorSiteOpBankerUnit id="MedivhTransformRavenSOpBanker" parent="SOpBankerUnit">
        <RollMax value="33.000000"/>
        <RollInActivationAngle value="6.500000"/>
        <RollInArc value="83.000000"/>
        <RollOutDuration value="1.000000"/>
    </CActorSiteOpBankerUnit>
    <CActorRange id="MedivhDustOfAppearanceCastRange" parent="StormRangeAbilPlusSplat" abil="MedivhDustOfAppearance"/>
    <CActorSplat id="MedivhDustOfAppearanceCastRangeSplat" parent="StormRangeSplat">
        <Scale value="12.750000"/>
    </CActorSplat>
    <CActorModel id="MedivhPortalEnemy" parent="StormModelAnimationStyleContinuousUnit">
        <Model value="MedivhPortal"/>
        <Filter index="Self" value="1"/>
        <Filter index="Ally" value="1"/>
        <Inherits index="Visibility" value="0"/>
        <HostSiteOps Ops="SOpPointSouthWorld"/>
        <Remove Terms="ActorOrphan" Send="Destroy"/>
    </CActorModel>
    <CActorBeamSimple id="MedivhPortalDirectionBeam" parent="BeamSimpleAnimationStyleContinuous">
        <Filter index="Enemy" value="1"/>
        <On Terms="Effect.MedivhPortalDirectionDummy.Start; At Target" Send="Create"/>
        <On Terms="Effect.MedivhPortalPingSoundDummy.Start" Send="$Stand,Work 3"/>
        <HostLaunch>
            <Subject value="_Unit"/>
            <Scope value="Target"/>
            <Actor value="Find"/>
            <Effect value="MedivhPortalDirectionPersistent"/>
        </HostLaunch>
        <HostLaunchSiteOps Ops="SOpShadow"/>
        <HostImpact>
            <Subject value="_Unit"/>
            <Scope value="Target"/>
            <Actor value="Find"/>
            <Effect value="MedivhPortalDirectionDummy"/>
        </HostImpact>
        <HostImpactSiteOps Ops="SOpShadow"/>
        <ModelFlags index="AutomateGlobalLoops" value="1"/>
    </CActorBeamSimple>
    <CActorBeamSimple id="MedivhPortalBirthBeam" parent="BeamSimpleAnimationStyleContinuous">
        <Filter index="Enemy" value="1"/>
        <On Terms="Effect.MedivhPortalBirthBeamDummy.Start; At Target" Send="Create"/>
        <On Terms="Behavior.MedivhPortalCreationTimedLife.Off" Send="AnimBracketStop BSD"/>
        <HostLaunch>
            <Subject value="_Unit"/>
            <Scope value="Target"/>
            <Actor value="Find"/>
            <Effect value="MedivhPortalBirthBeamPortalUnitSearch"/>
        </HostLaunch>
        <HostLaunchSiteOps Ops="SOpAttachOrigin SOpMoveForwardByDot15 SOpMoveForwardByDot1"/>
        <HostImpact>
            <Subject value="_Unit"/>
            <Scope value="Target"/>
            <Actor value="Find"/>
            <Effect value="MedivhPortalBirthBeamDummy"/>
        </HostImpact>
        <HostImpactSiteOps Ops="SOpAttachOrigin SOpMoveForwardByDot15 SOpMoveForwardByDot1"/>
        <ModelFlags index="AutomateGlobalLoops" value="1"/>
    </CActorBeamSimple>
    <CActorBeamSimple id="MedivhPortalChannelBeam" parent="BeamSimpleAnimationStyleContinuous">
        <On Terms="Behavior.MedivhPortalEnter.Create" Send="Create"/>
        <On Terms="Behavior.MedivhPortalEnter.Destroy" Send="Destroy Immediate"/>
        <Model value="CaptureMacGuffinBeamRavenCourt"/>
        <ModelFlags index="AutomatedGlobalLoopsIgnoreOrphan" value="1"/>
        <ModelFlags index="AutomateGlobalLoops" value="1"/>
        <HostLaunch Subject="_Unit" Scope="Caster" Actor="Find"/>
        <HostLaunchSiteOps Ops="SOpMacGuffin"/>
        <HostImpact>
            <Subject value="_Unit"/>
            <Scope value="Target"/>
            <Actor value="Find"/>
            <Effect value="SmartCommandUnitInteractionSwitch"/>
        </HostImpact>
        <HostImpactSiteOps Ops="SOpAttachCenter SOpMoveUpBy1"/>
    </CActorBeamSimple>
    <CActorModel id="MedivhTransformRavenChannel" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Abil.MedivhTransformRaven.SourceCastStart" Send="Create"/>
        <On Terms="ActorCreation" Send="AnimBracketStart BSD Birth Spell,A Death ContentPlayOnce"/>
        <On Terms="Effect.MedivhTransformRavenPendingApply.Start" Send="StatusSet CastComplete 1"/>
        <On Terms="Abil.MedivhTransformRaven.SourceCastStop" Send="TimerSet 0.062500 StopDelay"/>
        <On Terms="TimerExpired; TimerName StopDelay; IsStatus CastComplete 0" Send="AnimBracketStop BSD"/>
        <HostSiteOps Ops="SOpShadow" HoldRotation="1"/>
        <Remove Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce"/>
        <AnimBlendTime value="0.000000"/>
    </CActorModel>
    <CActorModelMaterial id="MedivhTransformRavenMedivhImageGlaze" parent="ModelAnimationStyleOneShot">
        <MaterialType value="Replacement"/>
    </CActorModelMaterial>
    <CActorModelMaterial id="MedivhTransformRavenLandGlaze" parent="ModelAnimationStyleOneShot"/>
    <CActorModel id="MedivhTransformRavenLand" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="AbilMorph.*.Start; MorphTo HeroMedivh" Send="Create"/>
        <HostSiteOps Ops="SOpAttachCenter" HoldPosition="1" HoldRotation="1"/>
    </CActorModel>
    <CActorModel id="MedivhTransformRavenChannelWeapon" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Abil.MedivhTransformRaven.SourceCastStart" Send="Create"/>
        <On Terms="Effect.MedivhTransformRavenPendingApply.Start" Send="StatusSet CastComplete 1"/>
        <On Terms="Abil.MedivhTransformRaven.SourceCastStop" Send="TimerSet 0.062500 StopDelay"/>
        <On Terms="TimerExpired; TimerName StopDelay; IsStatus CastComplete 0" Send="AnimBracketStop BSD"/>
        <HostSiteOps Ops="SOpAttachWeapon"/>
    </CActorModel>
    <CActorModel id="MedivhTransformRavenBirdsEyeViewBuff" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Effect.MedivhTransformRavenBirdsEyeViewApply.Start" Send="Create"/>
        <On Terms="ActorCreation" Send="Create MedivhTransformRavenBirdsEyeViewCastSound"/>
        <HostSiteOps Ops="SOpShadow SOp2DRotation" HoldPosition="1" HoldRotation="1"/>
        <Model value="MedivhTransformRavenBirdsEyeViewActive"/>
    </CActorModel>
    <CActorSound id="MedivhTransformRavenBirdsEyeViewCastSound" parent="SoundOneShot">
        <Sound value="Medivh_TransformRavenBirdsEyeView_Cast"/>
        <Layers Sound="Medivh_TransformRavenBirdsEyeView_Caw"/>
        <Layers Sound="Medivh_TransformRavenBirdsEyeView_Launch"/>
    </CActorSound>
    <CActorModel id="MedivhDustOfAppearanceSearch" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.MedivhDustOfAppearanceSearch.Start" Send="Create"/>
        <Model value="MedivhDustOfAppearanceSearchFX"/>
        <HostSiteOps Ops="SOpShadow"/>
    </CActorModel>
    <CActorSimple id="MedivhPortalTeleportGlazeApplySimple">
        <On Terms="Behavior.MedivhPortalEnter.Create" Send="Create"/>
        <On Terms="ActorCreation" Target="_Unit" Send="ModelMaterialApply MedivhPortalTeleportGlaze"/>
        <On Terms="ActorCreation" Send="Destroy"/>
    </CActorSimple>
    <CActorModelMaterial id="MedivhPortalTeleportGlaze" parent="BuffContinuous">
        <On Terms="Behavior.MedivhPortalEnter.Destroy" Send="TimerSet 0.062500 TeleportCheck"/>
        <On Terms="TimerExpired; TimerName TeleportCheck" Send="AnimBracketStop BSD"/>
    </CActorModelMaterial>
    <CActorModel id="MedivhPortalEntranceImpact" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.MedivhPortalSmartCommandDummy.Start; At Caster" Send="Create"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachCenter" HoldPosition="1"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillArcaneExplosionSearch" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.MedivhForceOfWillArcaneExplosionSearch.Start" Send="Create"/>
        <On Terms="ActorCreation" Send="Create MedivhForceOfWillArcaneExplosionSearchSound"/>
        <HostSiteOps Ops="SOpSourceUnit SOpAttachCenter" HoldPosition="1" HoldRotation="1"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillArcaneExplosionImpact" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.MedivhForceOfWillArcaneExplosionDamage.Start; At Target" Send="Create"/>
        <On Terms="ActorCreation" Send="Create MedivhForceOfWillArcaneExplosionImpactSound"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
    </CActorModel>
    <CActorModel id="MedivhTransformRavenSpeedRibbon" parent="StormMoveSpeedRibbon">
        <On Terms="Behavior.MedivhTransformRavenSpeedBoost.On" Send="Create"/>
        <On Terms="Behavior.MedivhTransformRavenSpeedBoost.Off" Send="AnimBracketStop BSD"/>
        <Model value="MedivhTransformRavenSpeedRibbon"/>
    </CActorModel>
    <CActorModel id="MedivhPortalPingImpact" parent="StormModelAnimationStyleOneShotUnit">
        <Filter index="Enemy" value="1"/>
        <On Terms="ActorCreation" Send="SetTintColor {255,255,255 3.000000}"/>
        <!-- Commenting this out while art is in flux. If the effect gets baked into the art, delete related data. BB -->
        <!--On Terms="Effect.MedivhPortalPingSoundDummy.Start" Send="Create"/-->
        <On Terms="ActorCreation" Send="Create MedivhPortalPingSound"/>
        <HostSiteOps Ops="SOpAttachOrigin SOpMoveUpBy1"/>
    </CActorModel>
    <CActorModel id="MedivhPortalFuzzyDummy" parent="ModelAddition">
        <On Terms="ActorCreation" Send="SetOpacity"/>
        <Model value="HitTestFuzzy_Disc"/>
        <Scale value="2.000000,2.000000,1.000000"/>
    </CActorModel>
    <CActorModel id="MedivhPortalCreationDummy" parent="ModelAddition">
        <Filter index="Enemy" value="1"/>
        <Inherits index="Visibility" value="0"/>
        <FogVisibility value="Visible"/>
    </CActorModel>
    <CActorModel id="MedivhPortalCreationDummyEnemy" parent="ModelAddition">
        <Filter index="Self" value="1"/>
        <Filter index="Ally" value="1"/>
        <Inherits index="Visibility" value="0"/>
        <Model value="MedivhPortalCreationDummy"/>
        <HostSiteOps Ops="SOpForwardSouth"/>
        <Flags index="VisionTestCenterOnly" value="1"/>
    </CActorModel>
    <!-- RagDolls -->
    <CActorModel id="HeroMedivhDeathRagdoll" parent="StormHeroDeathRagdoll"/>
    <!-- Portraits -->
    <CActorPortrait id="MedivhPortrait" parent="StormCompositePortrait"/>
    <CActorModel id="MedivhPortraitAddition" parent="StormCompositePortraitAddition"/>
    <CActorSound id="MedivhTransformRavenEndSound" parent="SoundOneShot">
        <On Terms="Behavior.MedivhTransformRaven.Off" Send="Create"/>
        <Sound value="Medivh_TransformRaven_End"/>
    </CActorSound>
    <CActorSound id="MedivhTransformRavenStartSound" parent="SoundOneShot">
        <Sound value="Medivh_TransformRaven_Start"/>
    </CActorSound>
    <CActorSound id="MedivhTransformRavenCancelSound" parent="SoundOneShot">
        <On Terms="Abil.MedivhTransformRaven.SourceCastStop" Send="Create"/>
        <Sound value="Medivh_TransformRaven_Cancel"/>
    </CActorSound>
    <CActorSound id="MedivhTransformRavenChannelSound" parent="SoundContinuous">
        <On Terms="Behavior.MedivhTransformRaven.On" Send="Create"/>
        <On Terms="Behavior.MedivhTransformRaven.Off" Send="Destroy"/>
        <Sound value="Medivh_TransformRaven_Channel"/>
    </CActorSound>
    <CActorSound id="MedivhTransformRavenShrinkSound" parent="SoundOneShot">
        <Sound value="Medivh_TransformRaven_Transform"/>
        <Layers Sound="Medivh_TransformRaven_Flight"/>
    </CActorSound>
    <CActorSound id="MedivhDustOfAppearanceImpactSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhDustOfAppearanceSearch.Start" Send="Create"/>
        <Sound value="Medivh_DustOfAppearance_Impact"/>
        <Layers Sound="Medivh_DustOfAppearance_Sweetener"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealImpactSound" parent="SoundOneShot">
        <Sound value="Medivh_LeyLineSeal_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealImpactLandSound" parent="SoundOneShot">
        <On Terms="Behavior.MedivhLeyLineSealStasis.Off" Send="Create"/>
        <Sound value="Medivh_LeyLineSeal_Impact_Land"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealEndSound" parent="SoundOneShot">
        <On Terms="Behavior.MedivhLeyLineSealMissileScan.Off" Send="Create"/>
        <Sound value="Medivh_LeyLineSeal_End"/>
    </CActorSound>
    <CActorSound id="MedivhForceOfWillImpactSound" parent="SoundOneShot">
        <Sound value="Medivh_ForceOfWill_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhForceOfWillEWImpactSound" parent="SoundOneShot">
        <Sound value="Medivh_ForceOfWill_EnduringWill_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhPortalRavenFamiliarImpactSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhPortalRavenFamiliarImpactDamage.Start" Send="Create"/>
        <Sound value="Medivh_Portal_RavenFamiliar_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhForceOfWillReabsorptionImpactSound" parent="SoundOneShot">
        <Sound value="Medivh_ForceOfWill_Reabsorption_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhForceofWillLaunchWhooshSound" parent="SoundOneShot">
        <Sound value="Medivh_ForceOfWill_LaunchWhoosh"/>
    </CActorSound>
    <CActorSound id="MedivhForceofWillLaunchSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhForceOfWillApply.Start; At Target" Send="Create"/>
        <Sound value="Medivh_ForceOfWill_Launch"/>
    </CActorSound>
    <CActorModel id="MedivhForceOfWillBuffFX" parent="StormModelAnimationStyleContinuousUnit">
        <On Terms="Effect.MedivhForceOfWillApply.Start; At Target" Send="Create"/>
        <On Terms="Effect.MedivhForceOfWillBaseApply.Start; At Target" Send="Create"/>
        <!-- Shield Impact FX -->
        <On Terms="Effect.MedivhForceOfWillShieldImpactDummy.Start; At Source; IsStatus ImpactLimiter 0" Send="StatusSet ImpactLimiter 1"/>
        <On Terms="StatusOn.*.ImpactLimiter" Send="TimerSet 0.330000 ImpactLimitTimer"/>
        <On Terms="StatusOn.*.ImpactLimiter" Send="Create MedivhForceOfWillShieldImpact"/>
        <On Terms="TimerExpired; TimerName ImpactLimitTimer" Send="StatusSet ImpactLimiter 0"/>
        <!-- Variations -->
        <On Terms="ActorCreation" Send="StatusSet Variation 1"/>
        <On Terms="ActorCreation; ValidatePlayer MedivhHasForceOfWillEnduringWillTalent" Send="StatusSet Variation 2"/>
        <On Terms="ActorCreation; !ValidatePlayer MedivhHasMedivhForceOfWillCircleOfProtectionTalent" Send="Create MedivhForceOfWillBirth"/>
        <On Terms="ActorCreation; ValidateEffect MedivhHasForceOfWillReabsorptionTalent" Send="Create MedivhForceOfWillReabsorption"/>
        <On Terms="Effect.MedivhForceOfWillStandWorkDummy.Start" Send="$Stand,Work 3"/>
        <On Terms="Behavior.MedivhForceOfWill.Off" Send="AnimBracketStop BSD"/>
        <On Terms="Behavior.MedivhForceOfWill.Off" Send="ModelFlagsClear UseForShieldImpacts"/>
        <On Terms="Behavior.MedivhForceOfWill.Off" Target="MedivhForceOfWillReabsorption" Send="AnimBracketStop BSD"/>
        <On Terms="ActorCreation; IsStatus Variation 1" Send="Create MedivhForceOfWillImpactSound"/>
        <On Terms="ActorCreation; IsStatus Variation 2" Send="Create MedivhForceOfWillEWImpactSound"/>
        <HostSiteOps Ops="SOpAttachOrigin" HoldRotation="1"/>
        <ModelFlags index="UseForShieldImpacts" value="1"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillCastFX" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Abil.MedivhForceOfWill.SourceCastStart" Send="Create"/>
        <HostSiteOps Ops="SOpMacGuffin"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillReabsorption" parent="StormModelAnimationStyleContinuousUnit">
        <HostSiteOps Ops="SOpAttachOrigin" HoldRotation="1"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillBirth" parent="StormModelAnimationStyleOneShotUnit">
        <HostSiteOps HoldPosition="1" HoldRotation="1"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillShieldImpact" parent="StormModelAnimationStyleOneShot">
        <Flags index="VisionTestCenterOnly" value="1"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachOrigin" HoldRotation="1"/>
        <AutoScaleFactor value="1.000000"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillReabsorptionHealImpact" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Effect.MedivhForceOfWillReabsorptionHeal.Start; At Target" Send="Create"/>
        <On Terms="ActorCreation" Send="Create MedivhForceOfWillReabsorptionImpactSound"/>
    </CActorModel>
    <CActorModel id="MedivhForceOfWillCircleOfProtectionCast" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.MedivhForceOfWillCircleOfProtectionSearch.Start" Send="Create"/>
    </CActorModel>
    <CActorRange id="MedivhForceOfWillCastRange" parent="StormRangeAbilPlusSplat" abil="MedivhForceOfWill"/>
    <CActorSplat id="MedivhForceOfWillCastRangeSplat" parent="StormRangeSplat">
        <Scale value="13.750000"/>
    </CActorSplat>
    <CActorForceSphere id="MedivhForceOfWillForce">
        <On Terms="Effect.MedivhForceOfWillApply.Start; At Effect" Send="Create"/>
        <Host Subject="SOpTargetPoint"/>
        <Duration value="0.150000"/>
        <Magnitude value="50.000000,10.000000"/>
        <Radius value="2.500000"/>
    </CActorForceSphere>
    <CActorUnit id="MedivhPortalPlacementMarker" parent="StormMinionStandard" unitName="MedivhPortalPlacementMarker">
        <Aliases value="_Hero"/>
        <Filter index="Enemy" value="1"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalInstantCastRangeOuter"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalPlacementSound"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalPlacementLoopSound"/>
        <On Terms="Effect.MedivhPortalMarkerActualCarryApply.Start" Send="RefSetFromRequest ::actor.Medivh _Unit Caster Find"/>
        <On Terms="Abil.MedivhPortal2.SourceCastStart" Target="::actor.Medivh" Send="Signal Portal2CastFX"/>
        <On Terms="ActorDestruction" Target="MedivhPortalInstantCastRangeOuter" Send="Destroy"/>
        <On Terms="ActorDestruction" Target="MedivhPortalPlacementLoopSound" Send="Destroy"/>
        <Model value="MedivhPortalMarker"/>
        <ModelFlags index="OutlineEmitter" value="1"/>
        <PlacementModel value="MedivhPortalPreplacementMarker"/>
        <GroupIcon>
            <Image value="Assets\Textures\storm_ui_ingame_hero_icon_placeholder.dds"/>
        </GroupIcon>
        <HeroIcon value="Assets\Textures\storm_temp_btn-techupgrade-terran-extramines.dds"/>
        <StatusBarFlags index="Shields" value="0"/>
        <StatusBarFlags index="Life" value="0"/>
        <StatusBarFlags index="Energy" value="0"/>
        <StatusBarFlags index="Cargo" value="0"/>
        <StatusBarFlags index="Progress" value="0"/>
        <StatusBarFlags index="Magazine" value="0"/>
        <StatusBarFlags index="Custom" value="0"/>
        <Wireframe>
            <Image value="Assets\Textures\storm_ui_ingame_hero_icon_placeholder.dds"/>
        </Wireframe>
        <PlacementActorModel value="MedivhPortalPlacementModel"/>
    </CActorUnit>
    <CActorModel id="MedivhPortalPlacementModel" parent="PlacementModel">
        <On Terms="ActorCreation" Send="SetOpacity 0.700000"/>
        <HostSiteOps Ops="SOpShadow"/>
        <ModelFlags index="AutomateGlobalLoops" value="1"/>
        <VisibleTo index="Ally" value="1"/>
    </CActorModel>
    <CActorUnit id="MedivhPortalCreationUnit" parent="StormMinionStandard" unitName="MedivhPortalCreation">
        <On Terms="ActorCreation" Send="Create MedivhPortalCreationDummyEnemy"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalBirthSound"/>
        <Filter index="Enemy" value="1"/>
        <FogVisibility value="Visible"/>
        <Aliases value="_Hero"/>
        <Model value="MedivhPortalCreationDummy"/>
        <ModelFlags index="OutlineEmitter" value="1"/>
        <StatusBarFlags index="Shields" value="0"/>
        <StatusBarFlags index="Life" value="0"/>
        <StatusBarFlags index="Energy" value="0"/>
        <StatusBarFlags index="Cargo" value="0"/>
        <StatusBarFlags index="Progress" value="0"/>
        <StatusBarFlags index="Magazine" value="0"/>
        <StatusBarFlags index="Custom" value="0"/>
        <BuildModel value="MedivhPortalCreationDummy"/>
        <DeathArray index="Normal" ModelLink="MedivhPortalCreationDummy"/>
        <PlacementModel value="MedivhPortalCreationDummy"/>
        <HostSiteOps Ops="SOpPointSouthWorld"/>
    </CActorUnit>
    <CActorUnit id="MedivhPortalRealUnit" parent="StormMinionStandard" unitName="MedivhPortal">
        <On Terms="ActorCreation" Send="Create MedivhPortalEnemy"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalFuzzyDummy"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalLaunchSound"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalLoopSound"/>
        <On Terms="ActorCreation" Send="Create StatusBarStabilizer"/>
        <On Terms="Effect.MedivhPortalPingSoundDummy.Start" Send="$Stand,Work 3"/>
        <On Terms="Effect.MedivhPortalPingSoundDummy.Start" Send="Create MedivhPortalPingSound"/>
        <On Terms="Effect.MedivhPortalTeleport.Start" Send="RefSet ::actor.HeroUnitTeleported ::LastTargetUnit"/>
        <On Terms="Effect.MedivhPortalRavenFamiliarTimedLifeApply.Start" Send="RefSet ::actor.RavenUnit ::LastTargetUnit"/>
        <On Terms="Effect.MedivhPortalRavenFamiliarTimedLifeApply.Start" Target="::actor.RavenUnit" Send="RefSet ::actor.HeroUnitTeleported ::actor.HeroUnitTeleported"/>
        <On Terms="Effect.MedivhPortalRavenFamiliarTimedLifeApply.Start" Target="::actor.RavenUnit" Send="Signal HostedPropsUpdate"/>
        <On Terms="UnitDeathCustomize" Target="MedivhPortalEnemy" Send="AnimBracketStop BSD"/>
        <On Terms="ActorDestruction" Target="StatusBarStabilizer" Send="Destroy"/>
        <ModelFlags index="OutlineEmitter" value="1"/>
        <HighlightTooltip value="Unit/Name/MedivhPortalRealUnit"/>
        <StatusBarFlags index="Shields" value="0"/>
        <StatusBarFlags index="Life" value="0"/>
        <StatusBarFlags index="Energy" value="0"/>
        <StatusBarFlags index="Cargo" value="0"/>
        <StatusBarFlags index="Progress" value="0"/>
        <StatusBarFlags index="Magazine" value="0"/>
        <CustomUnitStatusFrame value="Medivh/MedivhPortalDurationBar"/>
        <CustomUnitStatusActor value="StatusBarStabilizer"/>
        <Inherits index="TeamColor" value="1"/>
        <Filter index="Enemy" value="1"/>
        <DeathArray index="Normal" SoundLink="Medivh_Portal_End"/>
        <HostSiteOps Ops="SOpPointSouthWorld"/>
    </CActorUnit>
    <CActorRange id="MedivhPortalCastRangeOuter" parent="StormRangeAbil" abil="MedivhPortal1">
        <Icon value="Assets\Textures\storm_fx_medivh_base_portal_outerrange.dds"/>
        <IconArcLength value="3.000000"/>
        <Inherits index="TeamColor" value="1"/>
        <Filter index="Ally" value="1"/>
        <Filter index="Neutral" value="1"/>
        <Filter index="Enemy" value="1"/>
    </CActorRange>
    <CActorModel id="MedivhPortalCast" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Abil.MedivhPortalInstant.SourceCastStart" Send="Create"/>
        <HostSiteOps Ops="SOpAttachHandRight"/>
    </CActorModel>
    <CActorModel id="MedivhPortalMageArmor" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Effect.MedivhPortalMageArmorApply.Start; At Target" Send="Create"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
        <Model value="BlockBuff"/>
    </CActorModel>
    <CActorRange id="MedivhPortalInstantCastRangeOuter" parent="StormRangeAbil" abil="MedivhPortalInstant">
        <Icon value="Assets\Textures\storm_fx_medivh_base_portal_outerrange.dds"/>
        <On Terms="ActorDestruction" Target="MedivhPortalInstantCastRangeInner" Send="StatusDecrement Created"/>
        <On Terms="ActorCreation" Send="Create MedivhPortalInstantCastRangeInner"/>
        <On Terms="ActorCreation" Target="MedivhPortalInstantCastRangeInner" Send="StatusIncrement Created"/>
        <IconArcLength value="3.000000"/>
        <Inherits index="TeamColor" value="1"/>
        <Filter index="Ally" value="1"/>
        <Filter index="Neutral" value="1"/>
        <Filter index="Enemy" value="1"/>
    </CActorRange>
    <CActorRange id="MedivhPortalInstantCastRangeInner">
        <Icon value="Assets\Textures\storm_fx_medivh_base_portal_innerrange.dds"/>
        <IconArcLength value="2.000000"/>
        <Range value="6.500000"/>
        <Inherits index="TeamColor" value="1"/>
        <On Terms="StatusDecrement.*.Created; !HasStatus Created" Send="Destroy"/>
        <Filter index="Ally" value="1"/>
        <Filter index="Neutral" value="1"/>
        <Filter index="Enemy" value="1"/>
    </CActorRange>
    <CActorSplat id="MedivhPortalPlacementRangeSplat" parent="StormRangeSplat">
        <On Terms="ActorCreation" Send="Create MedivhPortalCastRangeSplatNull"/>
        <On Terms="ActorDestruction" Target="MedivhPortalCastRangeSplatNull" Send="Destroy"/>
        <Scale value="16.000000"/>
        <Filter index="All" value="1"/>
        <VisibleTo index="Self" value="1"/>
    </CActorSplat>
    <CActorModel id="MedivhPortalTeamColorSplat" parent="StormModelAnimationStyleContinuous">
        <Inherits index="CastShadows" value="1"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="CreepEngulfment" value="1"/>
        <Inherits index="Decal" value="1"/>
        <Inherits index="Opacity" value="1"/>
        <Inherits index="TeamColor" value="1"/>
        <Inherits index="TimeScale" value="1"/>
        <Inherits index="TintColor" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <Inherits index="WarpGroup" value="1"/>
        <Filter index="Enemy" value="1"/>
    </CActorModel>
    <CActorSound id="MedivhPortalPlacementSound" parent="SoundOneShot">
        <Sound value="Medivh_Portal_Placement"/>
        <Filter index="Enemy" value="1"/>
    </CActorSound>
    <CActorSound id="MedivhPortalPlacementLoopSound" parent="SoundContinuous">
        <Sound value="Medivh_Portal_Placement_Loop"/>
        <Filter index="Enemy" value="1"/>
        <FogVisibility value="Visible"/>
        <Layers Sound="Medivh_Portal_Placement_Swirl"/>
    </CActorSound>
    <CActorSound id="MedivhPortalLaunchSound" parent="SoundOneShot">
        <Sound value="Medivh_Portal_Cast"/>
    </CActorSound>
    <CActorSound id="MedivhPortalRavenFamiliarLaunchSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhPortalRavenFamiliarKineticApply.Start" Send="Create"/>
        <Sound value="Medivh_Portal_RavenFamiliar_Launch"/>
        <Layers Sound="Medivh_Portal_RavenFamiliar_Sweetener"/>
    </CActorSound>
    <CActorSound id="MedivhPortalRavenFamiliarEndSound" parent="SoundOneShot">
        <Sound value="Medivh_Portal_RavenFamiliar_End"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealLaunchSound" parent="SoundOneShot">
        <Sound value="Medivh_LeyLineSeal_Launch"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealMissileLaunchSound" parent="SoundOneShot">
        <Sound value="Medivh_LeyLineSeal_Missile_Launch"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealMissileRedirectSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhLeyLineSealMedivhCheatsMissileFoundPersistent.Start; At Target" Send="Create"/>
        <Sound value="Medivh_LeyLineSeal_Missile_Redirect"/>
        <Layers Sound="Medivh_LeyLineSeal_Missile_Redirect_Sweetener"/>
    </CActorSound>
    <CActorSound id="MedivhPortalLoopSound" parent="SoundContinuous">
        <Sound value="Medivh_Portal_Loop"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealLiftLoopSound" parent="SoundContinuous">
        <Sound value="Medivh_LeyLineSeal_Lift_Loop"/>
    </CActorSound>
    <CActorSound id="MedivhPortalBirthSound" parent="SoundOneShot">
        <Sound value="Medivh_Portal_Birth"/>
        <Layers Sound="Medivh_Portal_Birth_Ping" PlayDelay="1100,1100" PlayDelaySource="Actor"/>
    </CActorSound>
    <CActorSound id="MedivhPortalPingSound" parent="SoundOneShot">
        <Sound value="Medivh_Portal_Ping"/>
        <Filter index="Enemy" value="1"/>
    </CActorSound>
    <CActorSound id="MedivhPortalTeleportSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhPortalTeleportSet.Start; At Target" Send="Create"/>
        <Sound value="Medivh_PortalTeleport_Cast_Exit"/>
        <Layers Sound="Medivh_PortalTeleport_Cast_Element"/>
    </CActorSound>
    <CActorForceCylinder id="MedivhPortalForce">
        <On Terms="Effect.MedivhPortalCreateRealUnit.Start" Send="Create"/>
        <HostSiteOps Ops="SOpTargetPoint"/>
        <Duration value="0.150000"/>
        <Magnitude value="45.000000"/>
        <HostEndSiteOps Ops="SOpTargetPoint SOpHigherBy3"/>
        <Radius value="2.000000"/>
    </CActorForceCylinder>
    <CActorSound id="MedivhForceOfWillArcaneExplosionSearchSound" parent="SoundOneShot">
        <Sound value="Medivh_ForceOfWillArcaneExplosion_Cast"/>
    </CActorSound>
    <CActorSound id="MedivhForceOfWillArcaneExplosionImpactSound" parent="SoundOneShot">
        <Sound value="Medivh_ForceOfWillArcaneExplosion_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhPortalPlacementEndSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhPortalMarkerCleanupSet.Start; At Target" Send="Create"/>
        <Sound value="Medivh_Portal_Placement_End"/>
        <Filter index="Enemy" value="1"/>
    </CActorSound>
    <CActorSound id="MedivhPortalEndSound" parent="SoundOneShot">
        <Sound value="Medivh_Portal_End"/>
    </CActorSound>
    <CActorSound id="MedivhAttackMissileSound" parent="SoundOneShot">
        <Sound value="Medivh_Attack_Missile"/>
    </CActorSound>
    <CActorSound id="MedivhLeyLineSealMissileSound" parent="SoundOneShot">
        <On Terms="Behavior.MedivhLeyLineSealMissileScan.On" Send="Create"/>
        <On Terms="Behavior.MedivhLeyLineSealMissileScan.Off" Send="Destroy"/>
        <Sound value="Medivh_LeyLineSeal_Missile_Loop"/>
    </CActorSound>
    <CActorModel id="StormGuideVisualQuadTriangle" parent="StormGuideVisualQuadModel">
        <Model value="Storm_UI_AOETriangle_Fantasy"/>
    </CActorModel>
    <CActorQuad id="MedivhLeyLineSealGuide" parent="StormGuideVisualQuadDownFantasy" abil="MedivhLeyLineSeal">
        <LaunchHeight value="3.000000"/>
        <CenterHeight value="3.000000"/>
        <ImpactHeight value="3.000000"/>
        <Height value="30.950001"/>
        <Width value="4.000000"/>
    </CActorQuad>
    <CActorUnit id="MedivhPortalRavenFamiliar" parent="StormMinionStandard" unitName="MedivhPortalRavenFamiliar">
        <On Terms="Effect.MedivhPortalRavenFamiliarKineticRemove.Start" Send="$Spell,H 3 0.000000 0.000000"/>
        <On Terms="Effect.MedivhPortalRavenFamiliarKineticRemove.Start" Send="StatusSet RavenLaunched 1"/>
        <On Terms="Signal.*.HostedPropsUpdate" Send="RefSet ::HostForProps ::actor.HeroUnitTeleported"/>
        <On Terms="UnitDeathCustomize; IsStatus RavenLaunched 1" Send="DeathCustomize Variation0"/>
        <DeathCustoms AnimProps="Death,Alternate" ModelLink="MedivhPortalRavenFamiliar" Name="Variation0"/>
        <Macros value="HeroGenericSummonedUnitStasisMacro"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="TeamColor" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <StatusBarFlags index="Shields" value="0"/>
        <StatusBarFlags index="Life" value="0"/>
        <StatusBarFlags index="Energy" value="0"/>
        <StatusBarFlags index="Cargo" value="0"/>
        <StatusBarFlags index="Progress" value="0"/>
        <StatusBarFlags index="Duration" value="0"/>
        <StatusBarFlags index="Magazine" value="0"/>
        <CustomUnitStatusFrame value=""/>
    </CActorUnit>
    <CActorMissile id="MedivhLeyLineSealMissile" parent="StormMissileWithDeathEarly" unitName="MedivhLeyLineSealMissile">
        <On Terms="Effect.MedivhLeyLineSealMedivhCheatsMissileFoundPersistent.Start" Send="AnimPlay Redirect Death 0 -1.000000 -1.000000 0.125000 AsDuration"/>
        <On Terms="AnimDone; AnimPlayingName Redirect" Send="AnimPlay Reborn Birth 0 -1.000000 -1.000000 0.187500 AsDuration"/>
    </CActorMissile>
    <CActorModel id="MedivhLeyLineSealLift" parent="StormModelAnimationStyleContinuousUnit">
        <On Terms="Behavior.MedivhLeyLineSealStasis.On" Send="Create"/>
        <On Terms="Behavior.MedivhLeyLineSealStasis.Off" Send="AnimBracketStop BSD"/>
        <On Terms="ActorCreation" Send="Create MedivhLeyLineSealImpactSound"/>
        <On Terms="ActorCreation" Send="Create MedivhLeyLineSealLiftLoopSound"/>
        <HostSiteOps Ops="SOpShadow SOpPointSouthWorld" HoldPosition="1" HoldRotation="1"/>
    </CActorModel>
    <CActorModel id="MedivhLeyLineSealMedivhCheatsSiteModel">
        <Aliases value="_MedivhCheatsSiteModel"/>
        <On Terms="Effect.MedivhLeyLineSealMedivhCheatsControllerRemove.Start" Send="Destroy"/>
        <HostSiteOps Ops="SOpSourceUnit SOpAttachCenter"/>
        <Model value="Invisible"/>
    </CActorModel>
    <CActorQuad id="MedivhLeyLineSealMedivhCheatsGuide" parent="StormGuideVisualQuadDownFantasy" abil="MedivhLeyLineSealMedivhCheats">
        <Remove Terms="Abil.MedivhLeyLineSealMedivhCheats.Guide" Send="Create"/>
        <Remove Terms="ActorCreation" Send="Create StormGuideRegionQuadDown"/>
        <Remove Terms="ActorCreation" Send="SetTintColor 225,160,25 0.000000 OneShot BaseTint"/>
        <On Terms="ActorCreation; IsActorLocalPlayer" Send="Create MedivhLeyLineSealMedivhCheatsGuideRegionQuadDown"/>
        <On Terms="ActorCreation; IsActorLocalPlayer" Target="MedivhLeyLineSealMedivhCheatsGuideRegionQuadDown" Send="HostSiteOpsSet ::Host {SOpLookAtCursor SOp2DRotation}"/>
        <On Terms="ActorCreation" Send="SetTintColor 225,160,25 0.000000 OneShot BaseTint 149.000000"/>
        <Host Subject="_MedivhCheatsSiteModel" Actor="Find"/>
        <HostSiteOps Ops="SOpLookAtCursor SOp2DRotation"/>
        <!-- When we let a missile get relaunched from any point along its path, we can't guarentee the asynchronous side. -->
        <!-- So, we have to approximate the guide height - sometimes it will be spot on, sometimes it will go further. -->
        <Height value="14.750000"/>
        <Width value="4.000000"/>
    </CActorQuad>
    <CActorRegionQuad id="MedivhLeyLineSealMedivhCheatsGuideRegionQuadDown" parent="GuideRegionNormal">
        <Host Subject="_MedivhCheatsSiteModel"/>
        <HostSiteOps Ops="SOp2DRotation"/>
    </CActorRegionQuad>
    <CActorModel id="MedivhLeyLineSealMedivhCheatsRedirectVeil" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.MedivhLeyLineSealMedivhCheatsMissileFoundPersistent.Start" Send="Create"/>
    </CActorModel>
    <CActorSiteOpRotator id="MedivhLeyLineSealRotator">
        <LocalAxis value="0.000000,0.000000,1.000000" Z="1.000000"/>
        <Rate value="720.000000"/>
    </CActorSiteOpRotator>
    <CActorForceConeRoundedEnd id="MedivhLeyLineSealForce">
        <On Terms="Effect.MedivhLeyLineSealMissileScan.Start; At Caster" Send="Create"/>
        <Host Subject="MedivhLeyLineSealMissile"/>
        <HostSiteOps Ops="SOpShadow" HoldPosition="1" HoldRotation="1"/>
        <Duration value="0.125500"/>
        <Magnitude value="40.000000"/>
        <ForceFlags index="FallOff" value="0"/>
        <HostEndSiteOps Ops="SOpMoveBy5Dot5"/>
        <Angle value="55.000000"/>
        <Length value="3.000000"/>
    </CActorForceConeRoundedEnd>
    <CActorModel id="MedivhLeyLineSealCast" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Abil.MedivhLeyLineSeal.SourceCastStart" Send="Create"/>
        <HostSiteOps Ops="SOpAttachHandRight"/>
    </CActorModel>
    <CActorUnit id="MedivhDustOfAppearanceItem" parent="StormItemBase" unitName="MedivhDustOfAppearanceItem"/>
    <CActorModel id="MedivhPolyBombImpact" parent="StormModelAnimationStyleOneShot">
        <Inherits index="Visibility" value="1"/>
        <AcceptedTransfers index="Rotation" value="0"/>
        <On Terms="Effect.MedivhPolyBombApplyBehavior.Start; At Target" Send="Create"/>
        <On Terms="ActorCreation" Send="Create MedivhPolyBombImpactSound"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachCenter" HoldRotation="1"/>
    </CActorModel>
    <CActorModel id="MedivhPolyBombCast" parent="StormModelAnimationStyleOneShot">
        <On Terms="Abil.MedivhPolyBomb.SourceCastStart" Send="Create"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
        <ModelFlags index="AllowHitTest" value="0"/>
    </CActorModel>
    <CActorModel id="MedivhPolyBombRevert" parent="StormModelAnimationStyleOneShotUnit">
        <AcceptedTransfers index="Rotation" value="0"/>
        <On Terms="Behavior.MedivhPolyBomb.Off" Send="Create"/>
        <HostSiteOps Ops="SOpAttachCenter" HoldRotation="1"/>
    </CActorModel>
    <CActorSound id="MedivhPolyBombCastSound" parent="SoundOneShot">
        <On Terms="Abil.MedivhPolyBomb.SourceCastStart" Send="Create"/>
        <Sound value="Medivh_PolyBomb_Cast"/>
    </CActorSound>
    <CActorSound id="MedivhPolyBombImpactSound" parent="SoundOneShot">
        <Sound value="Medivh_PolyBomb_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhPolyBombOffSound" parent="SoundOneShot">
        <On Terms="Behavior.MedivhPolyBomb.Off" Send="Create"/>
        <Sound value="Medivh_PolyBomb_Off"/>
    </CActorSound>
    <CActorRange id="MedivhPolyBombCastRange" parent="StormRangeAbilPlusSplat" abil="MedivhPolyBomb"/>
    <CActorSplat id="MedivhPolyBombCastRangeSplat" parent="StormRangeSplat">
        <Scale value="7.750000"/>
    </CActorSplat>
    <CActorModel id="MedivhPolyBombSpreadWarning" parent="StormModelAnimationStyleContinuous">
        <On Terms="Effect.MedivhPolyBombApplyBehavior.Start; At Target" Send="Create"/>
        <On Terms="ActorCreation; !ValidateEffect MedivhHasPolyBombGlyphOfPolyBombTalent" Send="TimerSet 1.000000 WarningPulse"/>
        <On Terms="ActorCreation; ValidateEffect MedivhHasPolyBombGlyphOfPolyBombTalent" Send="$Stand,Work 3"/>
        <On Terms="TimerExpired; TimerName WarningPulse" Send="$Stand,Work 3"/>
        <On Terms="Behavior.MedivhPolyBomb.Off" Send="TimerSet 0.062500 PolyRefreshWait"/>
        <On Terms="TimerExpired; TimerName PolyRefreshWait; ValidateUnit MedivhTargetHasNoPolyBomb" Send="AnimBracketStop BSD"/>
        <On Terms="Effect.MedivhPolyBombSpreadSearchArea.Start; ValidateEffect MedivhHasPolyBombGlyphOfPolyBombTalent" Send="TimerSet 0.062500 PolyScaleReset"/>
        <On Terms="TimerExpired; ValidateEffect MedivhHasPolyBombGlyphOfPolyBombTalent; TimerName PolyScaleReset; !ValidateUnit MedivhTargetHasNoPolyBomb" Send="SetScale 1.250000"/>
        <HostSiteOps Ops="SOpBasicScopeFollow SOpShadow" HoldRotation="1"/>
        <Model value="MedivhPolyBombSpreadWarningRed"/>
        <ModelAspectSets>
            <Aspects RegardsAs="Enemy" Model="MedivhPolyBombSpreadWarningRed"/>
            <Aspects RegardsAs="Ally" Model="MedivhPolyBombSpreadWarningBlue"/>
            <Aspects RegardsAs="Self" Model="MedivhPolyBombSpreadWarningBlue"/>
        </ModelAspectSets>
        <Terms value="Cap 1"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="TimeScale" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <Host Subject="_Unit"/>
    </CActorModel>
    <!-- If Poly Bomb sticks around, we'll need to clean up how we do actors for the morph in order to make them consistent with Brightwing. BB -->
    <!--CActorModel id="MedivhPolyBombUnitModelChanger">-->
    <!--        <On Terms="Effect.MedivhPolyBombApplyBehavior.Start; At Caster" Send="Create"/>-->
    <!--        <On Terms="ActorCreation" Send="Create MedivhPolyBombImpact"/>-->
    <!--        <On Terms="ActorCreation; PassChance 50.000000" Send="ModelSwap FaerieDragonPolymorphPig"/>-->
    <!--        <On Terms="ActorCreation; PassChance 33.000000" Send="ModelSwap FaerieDragonPolymorphCrab"/>-->
    <!--        <Inherits index="ModelMaterials" value="1"/>-->
    <!--        <Model value="FaerieDragonPolymorphSquirrel"/>-->
    <!--        <ModelFlags index="AllowHitTest" value="0"/>-->
    <!--    </CActorModel-->
    <CActorModel id="MedivhPolyBombMorph">
        <Aliases value="_MorphModel"/>
        <!-- Taking the opacity messages out of the indivdual setups and putting them into the macro so they can stack better -->
        <!--On Terms="ActorCreation" Target="_Unit" Send="SetOpacity 0.000000"/-->
        <!--On Terms="ActorDestruction" Target="_Unit" Send="SetOpacity 1.000000"/-->
        <On Terms="Behavior.MedivhPolyBomb.On" Send="Create"/>
        <On Terms="Behavior.MedivhPolyBomb.Off" Send="AnimBracketStop BSD"/>
        <On Terms="ActorCreation; UnitWalking" Send="AnimPlay Walk Walk PlayForever"/>
        <On Terms="UnitMovementUpdate.*.Walk" Send="AnimPlay Walk Walk PlayForever"/>
        <!--On Terms="UnitMovementUpdate.*.Walk" Send="Print WalkStarted"/>
        <On Terms="UnitMovementUpdate.*.Stand" Send="Print StandStarted"/-->
        <On Terms="UnitMovementUpdate.*.Stand" Send="AnimClear Walk"/>
        <On Terms="ActorCreation" Send="AnimBracketStart BSD IGNORE Stand Death"/>
        <On Terms="ActorOrphan" Send="AnimBracketStop BSD"/>
        <On Terms="AnimBracketState.*.AfterClosing; AnimName BSD" Send="Destroy"/>
        <Host Subject="_Unit"/>
        <Model value="MedivhPolyBombSheep"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="TimeScale" value="1"/>
        <Inherits index="TintColor" value="1"/>
        <Inherits index="Visibility" value="1"/>
    </CActorModel>
    <CActorForceSphere id="MedivhPolyBombForce">
        <On Terms="Effect.MedivhPolyBombSpreadSearchArea.Start; At Effect" Send="Create"/>
        <Host Subject="SOpTargetPoint"/>
        <Duration value="0.150000"/>
        <Magnitude value="50.000000,10.000000"/>
        <Radius value="3.500000"/>
    </CActorForceSphere>
    <!--CActorAction id="MedivhPolyBombLinkAction" parent="GenericAttack" effectAttack="MedivhPolyBombSet">-->
    <!--        <ImpactSite value="MedivhPolyBombLinkSite"/>-->
    <!--    </CActorAction>-->
    <!--    <CActorSite id="MedivhPolyBombLinkSite" parent="GenericAttackImpactSite">-->
    <!--        <On Terms="ActorCreation" Send="RefSetFromRequest ::actor.CasterModelLink MedivhPolyBombUnitModelChanger Caster Find"/>-->
    <!--        <On Terms="ActorCreation" Send="RefSetFromRequest ::actor.PolymorphTarget ::Main Target Find"/>-->
    <!--        <On Terms="ActorCreation" Target="::actor.PolymorphTarget" Send="Signal PolymorphStarted"/>-->
    <!--        <On Terms="Signal.*.PolyReady" Target="::actor.PolymorphTarget" Send="RefSet ::actor.CasterModelLink ::actor.CasterModelLink"/>-->
    <!--        <On Terms="Signal.*.PolyReady" Target="::actor.CasterModelLink" Send="RefSet ::actor.PolymorphTarget ::actor.PolymorphTarget"/>-->
    <!--        <On Terms="Signal.*.PolyReady" Target="::actor.CasterModelLink" Send="RefSet ::Host ::actor.PolymorphTarget"/>-->
    <!--        <On Terms="Signal.*.PolyReady" Target="::actor.CasterModelLink" Send="RefSet ::HostForProps ::actor.PolymorphTarget"/>-->
    <!--        <On Terms="Signal.*.PolyReady" Target="::actor.CasterModelLink" Send="RefSet ::Supporter ::actor.PolymorphTarget"/>-->
    <!--        <On Terms="Signal.*.PolyReady" Target="::actor.CasterModelLink" Send="AnimHookSet HookedBaseline ::actor.PolymorphTarget ::Baseline"/>-->
    <!--        <On Terms="Signal.*.PolyReady" Target="::actor.PolymorphTarget" Send="Signal RecheckPolyState"/>-->
    <!--    </CActorSite-->
    <CActorEventMacro id="PolymorphMacro">
        <On Terms="Behavior.MedivhPolyBomb.Off" Target="::actor.CasterModelLink" Send="Destroy"/>
        <On Terms="Behavior.MedivhPolyBomb.On" Send="StatusIncrement Polymorph4"/>
        <On Terms="Behavior.MedivhPolyBomb.Off" Send="StatusDecrement Polymorph4"/>
        <On Terms="Behavior.MedivhPolyBomb.On" Send="StatusIncrement Polymorphed"/>
        <On Terms="Behavior.MedivhPolyBomb.Off" Send="StatusDecrement Polymorphed"/>
        <On Terms="Behavior.MedivhPolyBomb.On; IsStatus Polymorph2 1" Target="::actor.CasterModelLink" Send="SetOpacity 0.000000 0.000000 Polymorph"/>
        <On Terms="Behavior.MedivhPolyBomb.On; IsStatus Polymorph3 1" Target="::actor.CasterModelLink" Send="SetOpacity 0.000000 0.000000 Polymorph"/>
    </CActorEventMacro>
    <CActorEventMacro id="PolymorphMacroEffects">
        <On Terms="Behavior.MedivhPolyBomb.On" Send="StatusIncrement Polymorphed"/>
        <On Terms="Behavior.MedivhPolyBomb.Off" Send="StatusDecrement Polymorphed"/>
    </CActorEventMacro>
    <CActorEventMacro id="RemovePolymorphMacroEffects">
        <Remove Terms="Behavior.MedivhPolyBomb.On" Send="StatusIncrement Polymorphed"/>
        <Remove Terms="Behavior.MedivhPolyBomb.Off" Send="StatusDecrement Polymorphed"/>
    </CActorEventMacro>
    <CActorModel id="MedivhArcaneRiftCast" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Abil.MedivhArcaneRift.SourceCastStart" Send="Create"/>
        <HostSiteOps Ops="SOpAttachHandRight"/>
    </CActorModel>
    <CActorSound id="MedivhArcaneRiftCastSound">
        <On Terms="Effect.MedivhArcaneRiftLaunchMissile.Start" Send="Create"/>
        <Sound value="Medivh_ArcaneRift_Cast"/>
    </CActorSound>
    <CActorMissile id="MedivhArcaneRiftMissile" parent="StormMissileWithDeathEarly" unitName="MedivhArcaneRiftMissile">
        <On Terms="ActorCreation" Send="Create MedivhArcaneRiftMissileLoop"/>
        <On Terms="ActorCreation; ValidateEffect MedivhHasArcaneRiftArcaneChargeMarker" Send="AnimGroupApply A"/>
        <On Terms="ActorCreation; ValidateEffect MedivhHasArcaneRiftTheMastersTouchQuestComplete" Send="AnimGroupApply B"/>
        <On Terms="ActorDestruction" Target="MedivhArcaneRiftMissileLoop" Send="Destroy"/>
    </CActorMissile>
    <CActorModel id="MedivhArcaneRiftImpact" parent="StormModelAnimationStyleOneShot">
        <On Terms="ActorCreation" Send="SetOpacity"/>
        <On Terms="ActorCreation; !ValidateEffect MedivhHasArcaneRiftTheMastersTouchQuestComplete" Send="SetOpacity 1.000000"/>
        <On Terms="ActorCreation; ValidateEffect MedivhHasArcaneRiftTheMastersTouchQuestComplete" Send="ModelSwap MedivhArcaneRiftTheMastersTouchImpact"/>
        <On Terms="ActorCreation" Send="TimerSet 0.062500 Display"/>
        <On Terms="TimerExpired; TimerName Display" Send="SetOpacity 1.000000"/>
    </CActorModel>
    <CActorSound id="HeroMedivhTauntVO" parent="SoundOneShot">
        <Sound value="MedivhBase_Taunt"/>
    </CActorSound>
    <CActorSound id="HeroMedivhTauntUEVO" parent="SoundOneShot">
        <Sound value="MedivhBase_Taunt_Evo"/>
    </CActorSound>
    <CActorSound id="HeroMedivhRavenTauntVO" parent="SoundOneShot">
        <Sound value="MedivhBase_Taunt"/>
    </CActorSound>
    <CActorSound id="HeroMedivhRavenTauntUEVO" parent="SoundOneShot">
        <Sound value="MedivhBase_Taunt_Evo"/>
    </CActorSound>
    <CActorSound id="PulledSoundHeroMedivh" parent="SoundOneShot">
        <Sound value="MedivhBase_VOX_Pulled"/>
    </CActorSound>
    <CActorQuad id="MedivhArcaneRiftGuide" parent="StormGuideVisualQuadDownFantasy" abil="MedivhArcaneRift">
        <LaunchHeight value="3.000000"/>
        <CenterHeight value="3.000000"/>
        <ImpactHeight value="3.000000"/>
        <Height value="10.000000"/>
        <Width value="2.250000"/>
    </CActorQuad>
    <CActorAction id="MedivhArcaneRiftAttack" parent="GenericAttackPointStorm" effectLaunch="MedivhArcaneRiftLaunchMissile">
        <LaunchSiteOps Ops="SOpShadow"/>
        <Missile value="MedivhArcaneRiftMissile"/>
    </CActorAction>
    <CActorSiteOpLocalOffset id="MedivhArcaneRiftOffset">
        <LocalOffset value="0.000000,0.000000,1.500000" Z="1.500000"/>
    </CActorSiteOpLocalOffset>
    <CActorSound id="MedivhArcaneRiftMissileLoop" parent="SoundContinuous">
        <Host Subject="::Creator"/>
        <Sound value="Medivh_ArcaneRift_Missile"/>
        <Layers Sound="Medivh_ArcaneRift_Cast_Sweetener"/>
    </CActorSound>
    <CActorForceConeRoundedEnd id="MedivhArcaneRiftForce">
        <On Terms="Effect.MedivhArcaneRiftMissileScan.Start; At Caster" Send="Create"/>
        <Host Subject="MedivhArcaneRiftMissile"/>
        <HostSiteOps Ops="SOpShadow" HoldPosition="1" HoldRotation="1"/>
        <Duration value="0.125500"/>
        <Magnitude value="70.000000"/>
        <ForceFlags index="FallOff" value="0"/>
        <HostEndSiteOps Ops="SOpMoveBy5Dot5"/>
        <Angle value="50.000000"/>
        <Length value="2.000000"/>
    </CActorForceConeRoundedEnd>
    <CActorUnit id="MedivhArcaneBrillianceItem" parent="StormItemBase" unitName="MedivhArcaneBrillianceItem"/>
    <CActorUnit id="MedivhTransformRavenBirdsEyeViewItem" parent="StormItemBase" unitName="MedivhTransformRavenBirdsEyeViewItem"/>
    <CActorUnit id="MedivhInvisibilityItem" parent="StormItemBase" unitName="MedivhInvisibilityItem"/>
    <CActorRange id="MedivhInvisibilityRange" parent="StormRangeAbilPlusSplat" abil="MedivhInvisibility"/>
    <CActorSplat id="MedivhInvisibilityRangeSplat" parent="StormRangeSplat">
        <Scale value="9.625000"/>
    </CActorSplat>
    <CActorModel id="MedivhInvisibilityImpact" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Effect.MedivhInvisibilityCloakApply.Start; At Target" Send="Create"/>
        <On Terms="ActorCreation" Send="Create MedivhInvisibilityImpactSound"/>
        <HostSiteOps Ops="SOpAttachCenter" HoldPosition="1" HoldRotation="1"/>
    </CActorModel>
    <CActorSound id="MedivhInvisibilityCastSound" parent="SoundOneShot">
        <On Terms="Abil.MedivhInvisibility.SourceCastStart" Send="Create"/>
        <Sound value="Medivh_Invisibility_Cast"/>
    </CActorSound>
    <CActorSound id="MedivhInvisibilityImpactSound" parent="SoundOneShot">
        <Sound value="Medivh_Invisibility_Impact"/>
    </CActorSound>
    <CActorSound id="MedivhInvisibilityRemoveSound" parent="SoundOneShot">
        <On Terms="Behavior.MedivhInvisibilityCloak.Off" Send="Create"/>
        <Sound value="Medivh_Invisibility_Remove"/>
    </CActorSound>
    <CActorRange id="MedivhArcaneBrillianceRange" parent="StormRangeAbilPlusSplat" abil="MedivhArcaneBrilliance"/>
    <CActorSplat id="MedivhArcaneBrillianceRangeSplat" parent="StormRangeSplat">
        <Scale value="8.000000"/>
    </CActorSplat>
    <CActorModel id="MedivhArcaneBrillianceActive" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Effect.MedivhArcaneBrillianceApply.Start; At Target" Send="Create"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
    </CActorModel>
    <CActorModel id="MedivhArcaneBrillianceArea" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.MedivhArcaneBrillianceApplySearch.Start" Send="Create"/>
        <HostSiteOps Ops="SOpShadow"/>
        <VisibilityShape Shape="MedivhArcaneBrillianceVisibilityShape"/>
        <ModelFlags index="AllowHitTest" value="0"/>
    </CActorModel>
    <CActorSound id="MedivhArcaneBrillianceCastSound" parent="SoundOneShot">
        <On Terms="Effect.MedivhArcaneBrillianceApplySearch.Start" Send="Create"/>
        <Sound value="Medivh_ArcaneBrilliance_Launch"/>
        <Layers Sound="Medivh_ArcaneBrilliance_Sweetener"/>
    </CActorSound>
    <!--    Attack Actors   -->
    <CActorMissile id="MedivhAttackMissile" parent="StormMissileWithDeath" unitName="MedivhWeaponProjectile">
        <On Terms="ActorCreation" Send="Create MedivhAttackMissileSound"/>
    </CActorMissile>
    <CActorAction id="MedivhAttack" parent="RangedHeroAttackMissile" effectImpact="MedivhWeaponDamage" effectLaunch="MedivhWeaponLaunchMissile">
        <LaunchAssets Model="MedivhWeaponLaunch" Sound="Medivh_Attack_Launch"/>
        <ImpactMap index="None" Sound="Medivh_Attack_Impact_Unit"/>
        <ImpactMap index="Rock" Sound="Medivh_Attack_Impact_Stone"/>
        <LaunchSiteOps Ops="SOpAttachHandRight"/>
    </CActorAction>
    <!--    Medivh Behaviors    -->
    <CBehaviorTokenCounter id="MedivhArcaneRiftTheMastersTouchQuestToken" parent="StormQuestToken">
        <AtMaxEvents index="0" EventId="QuestComplete" Effect="MedivhArcaneRiftTheMastersTouchQuestCompleteModifyPlayer"/>
        <Max value="30"/>
    </CBehaviorTokenCounter>
    <CBehaviorBuff id="MedivhTransformRaven">
        <Alignment value="Positive"/>
        <Period value="0.25"/>
        <PeriodicEffect value="MedivhTransformRavenPeriodicSet"/>
        <Modification>
            <ModifyFlags index="DisableWeapons" value="1"/>
            <StateFlags index="Benign" value="1"/>
            <StateFlags index="SuppressGateEnforcement" value="1"/>
            <StateFlags index="Untargetable" value="1"/>
            <UnifiedMoveSpeedFactor value="0.2"/>
            <AbilLinkDisableArray value="CaptureMacGuffin"/>
            <AbilLinkDisableArray value="CaptureMacGuffinTwo"/>
            <AbilLinkDisableArray value="SmartCommandUnitInteraction"/>
            <AbilLinkDisableArray value="UseVehicle"/>
            <BehaviorLinkDisableArray value="AbathurSymbioteHostBehavior"/>
        </Modification>
        <FinalEffect value="MedivhTransformRavenFinalSet"/>
        <InitialEffect value="MedivhTransformRavenInitialSet"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhTransformRavenSpeedBoost">
        <Alignment value="Positive"/>
        <RemoveValidatorArray value="MedivhCasterHasTransformRaven"/>
        <Duration value="5"/>
        <Modification>
            <UnifiedMoveSpeedFactor value="0.4"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhTransformRavenBirdsEyeView">
        <Alignment value="Positive"/>
        <BehaviorCategories index="Fast" value="1"/>
        <RemoveValidatorArray value="MedivhCasterHasTransformRaven"/>
        <Duration value="5"/>
        <Modification>
            <SightBonus value="14"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhTransformRavenPending">
        <!-- 1 loop of duration is added here to cover the morph transition loop. BB -->
        <Alignment value="Positive"/>
        <Duration value="0.8125"/>
        <Modification>
            <StateFlags index="Invulnerable" value="1"/>
            <StateFlags index="Benign" value="1"/>
            <StateFlags index="UnitAttrOnImmuneToAOE" value="1"/>
            <StateFlags index="UnitAttrOnNoMinionAggro" value="1"/>
            <StateFlags index="UnitAttrOnImmuneToSkillshots" value="1"/>
            <StateFlags index="UnitAttrOnImmuneToFriendlyAbilities" value="1"/>
            <StateFlags index="SuppressCloak" value="1"/>
            <StateFlags index="SuppressItemUsage" value="1"/>
            <StateFlags index="Unstoppable" value="1"/>
            <AbilLinkDisableArray value="MedivhTransformRavenLand"/>
            <AbilLinkDisableArray value="MedivhArcaneRift"/>
            <AbilLinkDisableArray value="MedivhForceOfWill"/>
            <AbilLinkDisableArray value="MedivhInvisibility"/>
            <AbilLinkDisableArray value="MedivhLeyLineSeal"/>
            <AbilLinkDisableArray value="MedivhLeyLineSealMedivhCheats"/>
            <AbilLinkDisableArray value="MedivhPolyBomb"/>
            <AbilLinkDisableArray value="MedivhPortal1"/>
            <AbilLinkDisableArray value="MedivhPortal2"/>
            <AbilLinkDisableArray value="MedivhPortalInstant"/>
            <AbilLinkDisableArray value="PortBackToBase"/>
            <AbilLinkDisableArray value="MapMechanicAbilityInstant"/>
            <AbilLinkDisableArray value="MapMechanicAbilityTarget"/>
        </Modification>
        <Period value="0.75"/>
        <PeriodicEffect value="MedivhTransformRavenApply"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhTransformRavenPendingHeight">
        <!-- Height controller for Transform: Raven transformation art/anims -->
        <Alignment value="Positive"/>
        <Duration value="0.75"/>
        <Modification>
            <Height value="5"/>
        </Modification>
    </CBehaviorBuff>
    <!-- Raven Spotted: not a reveal! -->
    <CBehaviorBuff id="MedivhTransformRavenSpotted">
        <Alignment value="Negative"/>
        <RemoveValidatorArray value="MedivhTargetIsNearRavenOrNearRavenWithBirdsEyeView"/>
        <RemoveValidatorArray value="MedivhCasterHasTransformRaven"/>
        <RemoveValidatorArray value="NotCloaked"/>
        <Modification>
            <BehaviorLinkDisableArray value="ShrubStatusController"/>
        </Modification>
        <RevealUnit Value="Caster"/>
        <InitialEffect value="MedivhTransformRavenSpottedShrubRevealerApply"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhTransformRavenSpottedShrubRevealer">
        <Alignment value="Negative"/>
        <BehaviorCategories index="Reveal" value="1"/>
        <DisableValidatorArray value="TargetInShrub"/>
        <RemoveValidatorArray value="MedivhTargetHasTransformRavenSpottedBehavior"/>
        <Modification>
            <BehaviorLinkDisableArray value="ShrubStatusController"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhForceOfWill" parent="StormProtect">
        <Duration value="1.5"/>
        <DamageResponse Handled="MedivhForceOfWillDamageHandledSet">
            <ModifyScoreArray Validator="TargetIsHero" Value="Healing"/>
        </DamageResponse>
        <InitialEffect value="MedivhForceOfWillCasterApply"/>
        <FinalEffect value="MedivhForceOfWillFinalSet"/>
        <Period value="0.75"/>
        <PeriodCount value="1"/>
        <PeriodicEffect value="MedivhForceOfWillStandWorkDummy"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhForceOfWillTarget">
        <Alignment value="Positive"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhForceOfWillArcaneExplosionMarker">
        <Alignment value="Positive"/>
        <RemoveValidatorArray value="MedivhTargetHasForceOfWillTargetBehavior"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalRavenFamiliarMarker">
        <Duration value="10"/>
        <RemoveValidatorArray value="MedivhPortalRavenFamiliarCombine"/>
        <InitialEffect value="MedivhPortalRavenFamiliarReferenceDummy"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhForceOfWillCaster">
        <Alignment value="Positive"/>
        <FinalEffect value="MedivhForceOfWillRemove"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalRavenFamiliarOwner">
        <Alignment value="Positive"/>
        <Duration value="5"/>
        <DamageResponse Chance="1" Handled="MedivhPortalRavenFamiliarLaunchSet" Location="Attacker">
            <Kind index="Ability" value="0"/>
            <ProvideCategories index="Proc" value="1"/>
        </DamageResponse>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalRavenFamiliarTimedLife" parent="StormTimedLife">
        <InfoFlags index="Hidden" value="0"/>
        <Duration value="5"/>
        <ExpireEffect value="StormSuicide"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhTransformRavenPathableController" parent="CarryBehaviorParent">
        <DisableValidatorArray value="CasterUnitIsCurrentlyOnPathableGround"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhTransformRavenAbilityDisableController" parent="CarryBehaviorParent">
        <DisableValidatorArray value="CasterUnitIsNotCurrentlyOnPathableGround"/>
        <DisableValidatorArray value="MedivhTargetIsMedivhTransformRaven"/>
        <Modification>
            <AbilLinkDisableArray value="PortBackToBase"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalMarkerCarry" parent="CarryBehaviorParent">
        <Modification>
            <AbilLinkDisableArray value="MedivhPortal1"/>
        </Modification>
        <BehaviorFlags index="Permanent" value="0"/>
        <BehaviorFlags index="EnabledWhileDead" value="0"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalMarkerActualCarry" parent="CarryBehaviorParent">
        <FinalEffect value="MedivhPortalMarkerCleanupSet"/>
        <RemoveValidatorArray value="MedivhCasterHasPortalMarkerCarryBehavior"/>
        <RemoveValidatorArray value="CasterNotUsingVehicle"/>
        <DisableValidatorArray value="CasterNotDeadOrStunnedOrSilencedOrStasisOrDazed"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalPortalMasteryCarry" parent="CarryBehaviorParent"/>
    <CBehaviorBuff id="MedivhPortalTimedLife" parent="StormTimedLife">
        <Duration value="6"/>
        <ExpireEffect value="StormSuicide"/>
        <InfoFlags index="Hidden" value="0"/>
        <Period value="3"/>
        <PeriodCount value="1"/>
        <PeriodicEffect value="MedivhPortalPingSoundDummy"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalAIUseLink">
        <Duration value="5.9375"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalCreationTimedLife" parent="StormTimedLife">
        <InfoFlags index="Hidden" value="0"/>
        <Duration value="0.75"/>
        <ExpireEffect value="StormSuicide"/>
        <FinalEffect value="MedivhPortalCreateRealUnit"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalTeleportSickness">
        <Alignment value="Positive"/>
        <Duration value="0.25"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalEnter">
        <Alignment value="Positive"/>
        <BehaviorCategories index="Restorable" value="1"/>
        <RemoveValidatorArray value="MedivhEnterPortalValidatorCombine"/>
        <Duration value="0.25"/>
        <InfoFlags index="AlwaysUseGameText" value="1"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalPortalMasteryCastStun">
        <Duration value="0.1"/>
        <!-- Applied in triggers when a Portal Mastery link is complete. -->
        <Modification>
            <StateFlags index="OrdersPaused" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="HeroGenericPregameAbilitySuppression">
        <Modification>
            <AbilLinkDisableArray value="MedivhPortal1"/>
            <AbilLinkDisableArray value="MedivhPortalInstant"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhLeyLineSealMissileScan">
        <Period value="0.0625"/>
        <PeriodicEffect value="MedivhLeyLineSealMissileScan"/>
        <FinalEffect value="MedivhLeyLineSealMedivhCheatsControllerRemove"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhLeyLineSealStasis" parent="StormTimeStopParent">
        <Duration value="3"/>
        <DisplayDuration index="Self" value="1"/>
        <DisplayDuration index="Ally" value="1"/>
        <DisplayDuration index="Neutral" value="1"/>
        <DisplayDuration index="Enemy" value="1"/>
        <ExpireEffect value="HeroGenericRemoveMovementSuppressionBuff"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhLeyLineSealMedivhCheatsController" parent="CarryBehaviorParent">
        <Alignment value="Positive"/>
        <InfoFlags index="AlwaysUseGameText" value="1"/>
        <BehaviorCategories index="Restorable" value="1"/>
        <Duration value="3.1875"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhDustOfAppearance" parent="StormReveal">
        <RemoveValidatorArray value="MedivhDustOfAppearenceRemoveRevealCombine"/>
        <Duration value="10"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPolyBomb" parent="StormPolymorph">
        <Duration value="2"/>
        <RefreshEffect value="MedivhPolyBombRefreshSearchArea"/>
        <FinalEffect value="MedivhPolyBombSpreadSearchArea"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhArcaneBrilliance">
        <Alignment value="Positive"/>
        <Modification>
            <HealDealtAdditiveMultiplier index="Life" value="0.1"/>
            <HealDealtAdditiveMultiplier index="Shields" value="0.1"/>
            <DamageDealtFraction index="Ability" value="0.1"/>
        </Modification>
        <BehaviorCategories index="User4" value="1"/>
        <Duration value="10"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalBeamPreventionDummy"><!-- Used in Actors to stop the creation of a second beam. BB --></CBehaviorBuff>
    <CBehaviorBuff id="MedivhArcaneRiftHeroHit"/>
    <CBehaviorBuff id="MedivhPortalMageArmor" parent="StormArmor">
        <Alignment value="Positive"/>
        <MaxStackCount value="3"/>
        <Duration value="5"/>
        <DamageResponse>
            <Chance value="1"/>
            <Handled value="MedivhPortalMageArmorRemoveSet"/>
            <TargetFilters value="Heroic;Structure"/>
            <Priority value="55"/>
            <Kind index="Ability" value="0"/>
            <ProvideCategories index="Proc" value="1"/>
        </DamageResponse>
        <ArmorModification>
            <ArmorSet index="Hero">
                <ArmorMitigationTable index="Basic" value="50"/>
            </ArmorSet>
        </ArmorModification>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalMageArmorMarker">
        <RemoveValidatorArray value="CasterNotDead"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhArcaneRiftArcaneChargeMarker">
        <RemoveValidatorArray value="MedivhHasArcaneRiftArcaneChargeTalent"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhInvisibilityCloak" parent="StormTempCloak">
        <BehaviorCategories index="Restorable" value="1"/>
        <RemoveValidatorArray value="DoesNotHavePermanentCloak"/>
        <Duration value="20"/>
        <InitialEffect value="MedivhInvisibilityHoldFireApply"/>
        <FinalEffect value="MedivhInvisibilityHoldFireRemove"/>
        <DamageResponse Chance="1" Handled="MedivhInvisibilityCloakRemove" Priority="127"/>
        <InfoFlags index="AlwaysUseGameText" value="1"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhInvisibilityHoldFire">
        <RemoveValidatorArray value="NotInCombatCombine"/>
        <Modification>
            <StateFlags index="Passive" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="MedivhPortalBirthBeamPreventionBehavior"><!-- Used in Actors to stop the creation of a second birth beam. KGu --></CBehaviorBuff>
    <!--    Medivh Buttons     -->
    <CButton id="MedivhArcaneBrilliance" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_jaina_arcaneintellect.dds"/>
    </CButton>
    <CButton id="MedivhArcaneRiftTheMastersTouch" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_arcanemissile_a.dds"/>
    </CButton>
    <CButton id="MedivhArcaneRiftManaAdept" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_arcanemissile.dds"/>
    </CButton>
    <CButton id="MedivhArcaneRiftArcaneCharge" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_arcanemissile.dds"/>
    </CButton>
    <CButton id="MedivhArcaneRiftGuardianOfTirisfal" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_arcanemissile.dds"/>
    </CButton>
    <CButton id="MedivhArcaneRiftTheMastersTouchQuestToken" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_arcanemissile_a.dds"/>
    </CButton>
    <CButton id="MedivhForceOfWillArcaneExplosion" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_forceofwill.dds"/>
    </CButton>
    <CButton id="MedivhLeyLineSealMedivhCheats" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_leylineblast.dds"/>
    </CButton>
    <CButton id="MedivhPolyBombGlyphOfPolyBomb" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_polybomb.dds"/>
    </CButton>
    <CButton id="MedivhPortalMageArmor" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_portal.dds"/>
    </CButton>
    <CButton id="MedivhPortalStablePortal" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_portal.dds"/>
    </CButton>
    <CButton id="MedivhTransformRavenBirdsEyeView" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_ravenform.dds"/>
    </CButton>
    <CButton id="MedivhArcaneRift" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_arcanemissile.dds"/>
        <TooltipAppender Validator="MedivhHasArcaneRiftManaAdeptTalent" Face="MedivhArcaneRiftManaAdept"/>
        <TooltipAppender Validator="MedivhHasArcaneRiftArcaneChargeTalent" Face="MedivhArcaneRiftArcaneCharge"/>
        <TooltipAppender Validator="MedivhHasTheMastersTouch" Face="MedivhArcaneRiftTheMastersTouch"/>
        <TooltipAppender Validator="MedivhHasArcaneRiftGuardianOfTirisfalTalent" Face="MedivhArcaneRiftGuardianOfTirisfal"/>
    </CButton>
    <CButton id="MedivhInvisibility" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_invisibility.dds"/>
    </CButton>
    <CButton id="MedivhPortalRavenFamiliar" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_portal.dds"/>
    </CButton>
    <CButton id="MedivhForceOfWillEnduringWill" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_forceofwill_a.dds"/>
    </CButton>
    <CButton id="MedivhForceOfWillReabsorption" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_forceofwill_b.dds"/>
    </CButton>
    <CButton id="MedivhForceOfWillCircleOfProtection" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_forceofwill.dds"/>
    </CButton>
    <CButton id="MedivhPortalPortalMastery" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_portal_a.dds"/>
    </CButton>
    <CButton id="MedivhPortalQuickening" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_portal.dds"/>
    </CButton>
    <CButton id="MedivhPortalAstralProjection" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_portal_a.dds"/>
    </CButton>
    <CButton id="MedivhTransformRaven" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_mount.dds"/>
        <TooltipCooldownOverrideText value="Abil/TooltipCooldownOverrideText/MedivhRavenForm"/>
    </CButton>
    <CButton id="MedivhTransformRavenRavensIntellect" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_ravenform.dds"/>
    </CButton>
    <CButton id="MedivhDustOfAppearance" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_dustofappearance.dds"/>
    </CButton>
    <CButton id="MedivhTransformRavenWindsOfCelerity" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_ravenform.dds"/>
    </CButton>
    <CButton id="MedivhRavenForm" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_ravenform.dds"/>
        <TooltipAppender Validator="MedivhHasTransformRavenRavensIntellectTalent" Face="MedivhTransformRavenRavensIntellect"/>
        <TooltipAppender Validator="MedivhHasTransformRavenWindsOfCelerityTalent" Face="MedivhTransformRavenWindsOfCelerity"/>
        <TooltipFlags index="ShowCooldown" value="0"/>
    </CButton>
    <CButton id="MedivhPortal" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_portal.dds"/>
        <TooltipCooldownOverrideText value="Portal Cooldown Override"/>
        <TooltipVitalOverrideText index="Energy" value="Portal Mana Cost Override"/>
        <TooltipAppender Validator="HasPregameSuppressionBehavior" Text="Button/TooltipAppender/LockedUntilGameStarts"/>
        <TooltipAppender Validator="MedivhHasPortalStablePortalTalent" Face="MedivhPortalStablePortal"/>
        <TooltipAppender Validator="MedivhHasPortalPortalMasteryTalent" Face="MedivhPortalPortalMastery"/>
        <TooltipAppender Validator="MedivhHasPortalMageArmorTalent" Face="MedivhPortalMageArmor"/>
        <TooltipAppender Validator="MedivhHasPortalRavenFamiliarTalent" Face="MedivhPortalRavenFamiliar"/>
        <TooltipAppender Validator="MedivhHasPortalQuickeningTalent" Face="MedivhPortalQuickening"/>
        <TooltipAppender Validator="MedivhHasPortalAstralProjectionTalent" Face="MedivhPortalAstralProjection"/>
    </CButton>
    <CButton id="MedivhTransformRavenMorph" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_temp_war3_btnravenform.dds"/>
    </CButton>
    <CButton id="MedivhTransformRavenLand" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_cancel_mount.dds"/>
    </CButton>
    <CButton id="MedivhTransformRavenGuardianMorph" parent="StormButtonParent">
        <Icon value="Assets\Textures\hud_btn_bg_ability_cancel.dds"/>
    </CButton>
    <CButton id="MedivhPolyBomb" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_polybomb.dds"/>
        <TooltipAppender Validator="MedivhHasPolyBombGlyphOfPolyBombTalent" Face="MedivhPolyBombGlyphOfPolyBomb"/>
    </CButton>
    <CButton id="MedivhForceOfWill" parent="StormButtonParent">
        <TooltipAppender Validator="MedivhHasForceOfWillArcaneExplosionTalent" Face="MedivhForceOfWillArcaneExplosion"/>
        <TooltipAppender Validator="MedivhHasMedivhForceOfWillCircleOfProtectionTalent" Face="MedivhForceOfWillCircleOfProtection"/>
        <TooltipAppender Validator="MedivhHasForceOfWillEnduringWillTalent" Face="MedivhForceOfWillEnduringWill"/>
        <TooltipAppender Validator="MedivhHasForceOfWillReabsorptionTalent" Face="MedivhForceOfWillReabsorption"/>
        <Icon value="Assets\Textures\storm_ui_icon_medivh_forceofwill.dds"/>
    </CButton>
    <CButton id="MedivhLeyLineSeal" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_leylineblast.dds"/>
        <TooltipAppender Validator="MedivhHasLeyLineSealMedivhCheatsTalent" Face="MedivhLeyLineSealMedivhCheats"/>
    </CButton>
    <CButton id="MedivhLeyLineSealRedirect" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_medivh_LeyLineBlast_redirect.dds"/>
    </CButton>
    <CButton id="MedivhPortalCancel" parent="StormButtonParent">
        <TooltipVitalName index="Energy" value="Portal Cancel Hide Mana"/>
        <TooltipVitalOverrideText index="Energy" value="Portal Cancel Hide Mana"/>
        <Icon value="Assets\Textures\hud_btn_bg_ability_cancel.dds"/>
    </CButton>
    <CEffectModifyTokenCount id="MedivhArcaneRiftTheMastersTouchQuestIncrementToken" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="TargetIsHero"/>
        <Chance value="0"/>
        <TokenId value="MedivhArcaneRiftTheMastersTouchQuestToken"/>
        <EffectCategory index="Quest" value="1"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="MedivhArcaneRiftTheMastersTouchQuestResetToken">
        <ValidatorArray value="MedivhHasNoTheMastersTouchQuestCompleteAndTheMastersTouchTalent"/>
        <Chance value="0"/>
        <TokenId value="MedivhArcaneRiftTheMastersTouchQuestToken"/>
        <Operation value="Set"/>
    </CEffectModifyTokenCount>
    <CEffectSet id="MedivhInvisibilityCloakApplySet">
        <ValidatorArray value="NotVehicle"/>
        <EffectArray value="HeroGenericRemoveGenericCloakRevealerTarget"/>
        <EffectArray value="MedivhInvisibilityCloakApply"/>
    </CEffectSet>
    <!--    Medivh Effects    -->
    <CEffectRedirectMissile id="MedivhLeyLineSealMedivhCheatsMissileRedirect">
        <ImpactLocation Value="TargetPoint"/>
        <Movers Link="MedivhLeyLineSealMissileMedivhCheatsRedirect"/>
        <WhichUnit Effect="MedivhLeyLineSealMedivhCheatsMissileFoundPersistent"/>
    </CEffectRedirectMissile>
    <CEffectApplyKinetic id="MedivhPortalRavenFamiliarKineticApply">
        <Kinetic value="MedivhPortalRavenFamiliarSet"/>
    </CEffectApplyKinetic>
    <CEffectRemoveKinetic id="MedivhPortalRavenFamiliarKineticRemove">
        <ImpactUnit Value="Source"/>
        <KineticLink value="MedivhPortalRavenFamiliarSet"/>
    </CEffectRemoveKinetic>
    <CEffectCreatePersistent id="MedivhPortalRavenFamiliarTargetPersistent">
        <OffsetVectorStartLocation Value="TargetPoint"/>
        <OffsetFacingFallback Value="TargetPoint"/>
        <InitialEffect value="MedivhPortalRavenFamiliarSetFacing"/>
        <InitialOffset value="1,1,0" X="1" Y="1"/>
    </CEffectCreatePersistent>
    <CEffectSet id="MedivhPortalVehicleUseSet">
        <ValidatorArray value="MedivhCasterHasPortalMarkerCarryBehavior"/>
        <EffectArray value="HeroGenericVehicleApplySpecialSelectionTriggers"/>
        <EffectArray value="MedivhPortalMarkerCarryRemove"/>
    </CEffectSet>
    <CEffectSet id="UseVehicleCastCompleteSet">
        <EffectArray value="MedivhPortalVehicleUseSet"/>
    </CEffectSet>
    <CEffectSet id="MedivhWeaponLaunchMissileSet">
        <EffectArray value="MedivhWeaponLaunchMissile"/>
        <EffectArray value="UniversalWeaponLaunchSet"/>
    </CEffectSet>
    <CEffectLaunchMissile id="MedivhWeaponLaunchMissile">
        <ValidatorArray index="0" value="TargetNotDead"/>
        <ImpactEffect value="MedivhWeaponImpactSet"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateWeapon" value="0"/>
        <AmmoUnit value="MedivhWeaponProjectile"/>
        <Movers Link="MedivhWeaponMissile"/>
    </CEffectLaunchMissile>
    <CEffectSet id="MedivhWeaponImpactSet">
        <EffectArray value="UniversalWeaponImpact"/>
        <EffectArray value="MedivhWeaponDamage"/>
    </CEffectSet>
    <CEffectDamage id="MedivhWeaponDamage" parent="StormWeapon">
        <Amount value="80"/>
    </CEffectDamage>
    <CEffectSet id="MedivhForceOfWillInitialSet">
        <EffectArray value="MedivhModifyWeaponCooldown"/>
        <EffectArray value="MedivhForceOfWillCasterRemove"/>
        <EffectArray value="MedivhForceOfWillTargetApply"/>
        <EffectArray value="MedivhForceOfWillApply"/>
        <EffectArray value="MedivhForceOfWillCircleOfProtectionSearch"/>
        <ValidatorArray value="TargetNotImmuneToFriendlyAbilitiesOrIsSpecialCase"/>
        <ValidatorArray value="UserCategoryNoSpecialDeathStateTarget"/>
    </CEffectSet>
    <CEffectSet id="MedivhForceOfWillDamageHandledSet">
        <EffectArray value="MedivhForceOfWillShieldImpactDummy"/>
        <EffectArray value="MedivhForceOfWillArcaneExplosionSearch"/>
        <EffectArray value="MedivhForceOfWillArcaneExplosionMarkerApply"/>
    </CEffectSet>
    <CEffectSet id="MedivhForceOfWillFinalSet">
        <EffectArray value="MedivhForceOfWillTargetRemove"/>
        <ValidatorArray value="MedivhTargetHasForceOfWillTargetBehavior"/>
    </CEffectSet>
    <CEffectApplyBehavior id="MedivhForceOfWillArcaneExplosionMarkerApply">
        <ValidatorArray index="0" value="MedivhSourceHasForceOfWillTargetBehavior"/>
        <Chance value="0"/>
        <WhichUnit Value="Source"/>
        <Behavior value="MedivhForceOfWillArcaneExplosionMarker"/>
    </CEffectApplyBehavior>
    <CEffectEnumArea id="MedivhForceOfWillArcaneExplosionSearch">
        <ValidatorArray value="MedivhSourceHasNoForceOfWillArcaneExplosionMarkerBehavior"/>
        <ValidatorArray value="MedivhSourceHasForceOfWillTargetBehavior"/>
        <Chance value="0"/>
        <ImpactLocation Value="SourceUnit"/>
        <SearchFilters value="-;Self,Player,Ally,Neutral,ImmuneToAOE,Invulnerable"/>
        <AreaArray Effect="MedivhForceOfWillArcaneExplosionDamage">
            <Radius value="3"/>
        </AreaArray>
        <RevealerParams Duration="0.75" ShapeExpansion="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
    </CEffectEnumArea>
    <CEffectDamage id="MedivhForceOfWillArcaneExplosionDamage" parent="StormSpell">
        <Amount value="183"/>
        <SourceButtonFace value="MedivhForceOfWillArcaneExplosion"/>
    </CEffectDamage>
    <CEffectApplyBehavior id="MedivhTransformRavenApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRaven"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhTransformRavenSpeedBoostApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRavenSpeedBoost"/>
        <ValidatorArray index="0" value="CasterHasHomeShieldProtection"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhTransformRavenBirdsEyeViewApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRavenBirdsEyeView"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhTransformRavenPendingApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRavenPending"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhTransformRavenPendingHeightApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRavenPendingHeight"/>
    </CEffectApplyBehavior>
    <CEffectSet id="MedivhTransformRavenPendingSet">
        <EffectArray value="MedivhTransformRavenPendingApply"/>
        <EffectArray value="MedivhTransformRavenPendingHeightApply"/>
    </CEffectSet>
    <CEffectApplyBehavior id="MedivhTransformRavenExpiringApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRavenExpiring"/>
    </CEffectApplyBehavior>
    <CEffectModifyUnit id="MedivhTransformRavenModifyCooldown">
        <ValidatorArray value="DoesNotHaveHomeShieldProtection"/>
        <ImpactUnit Value="Caster"/>
        <Cost Abil="MedivhTransformRaven,Execute" CooldownOperation="Set" CooldownTimeUse="4"/>
    </CEffectModifyUnit>
    <!-- Used to fire Transform: Raven land anims for Medivh -->
    <CEffectModifyUnit id="MedivhTransformRavenLandDummy"/>
    <!-- Used to initialize a Portal trigger -->
    <CEffectModifyUnit id="MedivhPortalSmartCommandDummy"/>
    <!-- Used to fire a periodic sound/anim for Portal -->
    <CEffectModifyUnit id="MedivhPortalPingSoundDummy"/>
    <!-- Used to play Stand,Work for Force of Will -->
    <CEffectModifyUnit id="MedivhForceOfWillStandWorkDummy"/>
    <!-- Used to play shield impact FX from the attacker direction for Force of Will -->
    <CEffectModifyUnit id="MedivhForceOfWillShieldImpactDummy"/>
    <!-- Used to destroy the dummy model for Medivh Cheats! guide -->
    <CEffectModifyUnit id="MedivhLeyLineSealMedivhCheatsGuideDestructionDummy"/>
    <CEffectModifyUnit id="MedivhPortalCooldown">
        <Cost Abil="MedivhPortal1,Execute" CooldownOperation="Set" CooldownTimeUse="20"/>
        <ImpactUnit Value="Caster"/>
    </CEffectModifyUnit>
    <CEffectModifyUnit id="MedivhPortalDirectionDummy">
        <ValidatorArray value="MedivhTargetIsMedivhPortal"/>
        <ValidatorArray value="MedivhPortalNoBeamPreventionDummy"/>
    </CEffectModifyUnit>
    <CEffectModifyUnit id="MedivhPortalFacing">
        <ValidatorArray value="MedivhTargetIsMedivhPortal"/>
        <FacingLocation Effect="MedivhPortalDirectionSearch" Value="TargetPoint"/>
        <FacingType value="LookAt"/>
    </CEffectModifyUnit>
    <CEffectModifyUnit id="MedivhPortalCreationDirectionDummy">
        <ValidatorArray value="MedivhTargetIsMedivhCreationPortal"/>
        <FacingLocation Effect="MedivhPortalCreationDirectionSearch" Value="TargetPoint"/>
        <FacingType value="LookAt"/>
    </CEffectModifyUnit>
    <CEffectRemoveBehavior id="MedivhTransformRavenRemove">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="MedivhTransformRaven"/>
    </CEffectRemoveBehavior>
    <CEffectCreatePersistent id="MedivhTransformRavenChannelPersistent">
        <ValidatorArray value="HeroNotInCombat"/>
        <ValidatorArray value="UserCategoryCasterNotRooted"/>
        <WhichLocation Value="CasterUnit"/>
        <Flags index="Channeled" value="1"/>
        <InitialEffect value="MedivhTransformRavenPendingSet"/>
        <ExpireDelay value="0.75"/>
        <FinalEffect value="MedivhTransformRavenMorphIssueOrder"/>
    </CEffectCreatePersistent>
    <CEffectModifyUnit id="MedivhTransformRavenFountainAddCooldown">
        <Cost Abil="MedivhTransformRavenLand,Execute" CooldownOperation="Set" CooldownTimeUse="1"/>
    </CEffectModifyUnit>
    <CEffectCreatePersistent id="MedivhTransformRavenLandChannelPersistent">
        <WhichLocation Value="CasterUnit"/>
        <Flags index="Channeled" value="1"/>
        <InitialEffect value="MedivhTransformRavenRemoveSet"/>
        <ValidatorArray value="CasterUnitIsCurrentlyOnPathableGround"/>
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="MedivhTransformRavenSpottedApply">
        <Behavior value="MedivhTransformRavenSpotted"/>
        <ValidatorArray index="0" value="NotCloaked"/>
        <ValidatorArray value="MedivhTargetHasNoTransformRavenSpottedBehavior"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhTransformRavenSpottedShrubRevealerApply">
        <Behavior value="MedivhTransformRavenSpottedShrubRevealer"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalMarkerCarryApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhPortalMarkerCarry"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalMarkerActualCarryApply">
        <Behavior value="MedivhPortalMarkerActualCarry"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalTeleportCooldownApply">
        <Behavior value="MedivhPortalTeleportSickness"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalEnterApply">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhPortalEnter"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalBeamPreventionDummyApply">
        <ValidatorArray index="0" value="MedivhTargetIsMedivhPortal"/>
        <Behavior value="MedivhPortalBeamPreventionDummy"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="MedivhPortalSmartCommandCreatePersistent">
        <WhichLocation Value="CasterUnit"/>
        <Flags index="Channeled" value="1"/>
        <InitialEffect value="MedivhPortalEnterApply"/>
        <ExpireDelay value="0.25"/>
        <ExpireEffect value="MedivhPortalSmartTargetPersistent"/>
        <FinalEffect value="MedivhPortalEnterRemove"/>
        <PeriodicValidator value="MedivhEnterPortalValidatorCombine"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="MedivhPortalSmartTargetPersistent">
        <WhichLocation Effect="SmartCommandUnitInteractionSwitch" Value="TargetUnit"/>
        <InitialEffect value="MedivhPortalSmartCommandDummy"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="MedivhPortalCasterOffsetPersistentInstant">
        <WhichLocation Value="CasterUnit"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="MedivhPortalCreateCreationUnitCasterInstant"/>
        <PeriodicOffsetArray value="0,-1,0" Y="-1"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="MedivhForceOfWillApply">
        <Behavior value="MedivhForceOfWill"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhForceOfWillBaseApply">
        <Behavior value="MedivhForceOfWill"/>
        <Flags index="UseDuration" value="1"/>
        <Duration value="1.5"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalRavenFamiliarMarkerApply">
        <Chance value="0"/>
        <Behavior value="MedivhPortalRavenFamiliarMarker"/>
        <ValidatorArray index="0" value="MedivhTargetHasNoPortalRavenFamiliarMarkerBehavior"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalRavenFamiliarOwnerApply">
        <Behavior value="MedivhPortalRavenFamiliarOwner"/>
        <WhichUnit Effect="MedivhPortalTeleportSet"/>
    </CEffectApplyBehavior>
    <CEffectCreateUnit id="MedivhPortalRavenFamiliarCreateUnit">
        <Chance value="0"/>
        <WhichLocation Value="TargetPoint"/>
        <CreateFlags index="NormalizeSpawnOffset" value="0"/>
        <SpawnOwner Value="Target"/>
        <SpawnEffect value="MedivhPortalRavenFamiliarSpawnSet"/>
        <SpawnUnit value="MedivhPortalRavenFamiliar"/>
        <SpawnRange value="2"/>
        <SpawnOffset value="-2,1" X="-2" Y="1"/>
        <ValidatorArray value="MedivhTargetHasNoPortalRavenFamiliarMarkerBehavior"/>
    </CEffectCreateUnit>
    <CEffectSet id="MedivhPortalRavenFamiliarSpawnSet">
        <EffectArray value="MedivhPortalRavenFamiliarTimedLifeApply"/>
        <EffectArray value="MedivhPortalRavenFamiliarTargetPersistent"/>
        <EffectArray value="MedivhPortalRavenFamiliarKineticApply"/>
        <EffectArray value="MedivhPortalRavenFamiliarOwnerApply"/>
    </CEffectSet>
    <CEffectModifyUnit id="MedivhPortalRavenFamiliarSetFacing">
        <FacingLocation Value="TargetPoint"/>
        <FacingType value="LookAt"/>
        <ImpactUnit Effect="MedivhPortalRavenFamiliarSpawnSet" Value="TargetOuter"/>
    </CEffectModifyUnit>
    <!-- Trying to use this as a reference between the Familiar and its Kinetic target -->
    <CEffectModifyUnit id="MedivhPortalRavenFamiliarReferenceDummy">
        <ImpactUnit Effect="MedivhPortalRavenFamiliarSpawnSet" Value="TargetOuter"/>
    </CEffectModifyUnit>
    <CEffectApplyBehavior id="MedivhForceOfWillTargetApply">
        <Behavior value="MedivhForceOfWillTarget"/>
    </CEffectApplyBehavior>
    <CEffectRemoveBehavior id="MedivhForceOfWillTargetRemove">
        <BehaviorLink value="MedivhForceOfWillTarget"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="MedivhForceOfWillCasterRemove">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="MedivhForceOfWillCaster"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="MedivhForceOfWillRemove">
        <WhichUnit Effect="MedivhForceOfWillInitialSet"/>
        <BehaviorLink value="MedivhForceOfWill"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="MedivhPortalRavenFamiliarOwnerRemove">
        <WhichUnit Value="Source"/>
        <BehaviorLink value="MedivhPortalRavenFamiliarOwner"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="MedivhPortalRavenFamiliarTimedLifeRemove">
        <WhichUnit Effect="MedivhPortalRavenFamiliarSpawnSet" Value="TargetOuter"/>
        <BehaviorLink value="MedivhPortalRavenFamiliarTimedLife"/>
    </CEffectRemoveBehavior>
    <CEffectSet id="MedivhPortalRavenFamiliarLaunchSet">
        <EffectArray value="MedivhPortalRavenFamiliarOwnerRemove"/>
        <EffectArray value="MedivhPortalRavenFamiliarTimedLifeRemove"/>
        <EffectArray value="MedivhPortalRavenFamiliarLaunchMissile"/>
        <ValidatorArray value="TargetIsHero"/>
    </CEffectSet>
    <CEffectEnumArea id="MedivhForceOfWillCircleOfProtectionSearch">
        <LaunchLocation Value="TargetUnit"/>
        <SearchFilters value="Heroic;Neutral,Enemy,Structure,ImmuneToFriendlyAbilities,User1,Missile,Item,Stasis,Dead,MapBoss"/>
        <AreaArray Effect="MedivhForceOfWillApply">
            <Radius value="2.5"/>
        </AreaArray>
        <Chance value="0"/>
        <ExcludeArray Value="Target"/>
    </CEffectEnumArea>
    <CEffectSet id="MedivhPortalRavenFamiliarImpactSet">
        <EffectArray value="MedivhPortalRavenFamiliarImpactDamage"/>
    </CEffectSet>
    <CEffectDamage id="MedivhPortalRavenFamiliarImpactDamage" parent="StormSpell">
        <ImpactLocation Effect="MedivhPortalRavenFamiliarLaunchMissile" Value="TargetUnit"/>
        <Amount value="114"/>
        <ValidatorArray index="0" value="MedivhPortalRavenFamiliarTargetNotInvulnerable"/>
        <Flags index="Crit" value="1"/>
        <SourceButtonFace value="MedivhPortalRavenFamiliar"/>
    </CEffectDamage>
    <CEffectLaunchMissileAdvanced id="MedivhPortalRavenFamiliarLaunchMissile">
        <LaunchLocation Effect="MedivhPortalRavenFamiliarSpawnSet" Value="TargetUnit"/>
        <LaunchEffect value="MedivhPortalRavenFamiliarKineticRemove"/>
        <ImpactEffect value="MedivhPortalRavenFamiliarImpactSet"/>
        <ImpactRange value="0.5"/>
        <Movers Link="MedivhPortalRavenFamiliarMissile"/>
        <ImpactOffset value="0,0,1" Z="1"/>
    </CEffectLaunchMissileAdvanced>
    <CEffectCreateHealer id="MedivhForceOfWillReabsorptionHeal" parent="StormHealingSpellPercent">
        <SourceButtonFace value="MedivhForceOfWillReabsorption"/>
    </CEffectCreateHealer>
    <CEffectApplyBehavior id="MedivhPortalRavenFamiliarTimedLifeApply">
        <Behavior value="MedivhPortalRavenFamiliarTimedLife"/>
    </CEffectApplyBehavior>
    <CEffectModifyPlayer id="MedivhTransformRavenMoveFiltersOnModifyPlayer">
        <WhichPlayer Value="Caster"/>
        <EffectArray Operation="Set" Reference="Abil,move,MoveFilters" Value="-;Player,Ally,Neutral,Enemy"/>
    </CEffectModifyPlayer>
    <CEffectModifyPlayer id="MedivhTransformRavenMoveFiltersOffModifyPlayer">
        <WhichPlayer Value="Caster"/>
        <EffectArray Operation="Set" Reference="Abil,move,MoveFilters" Value="-;Player,Ally"/>
    </CEffectModifyPlayer>
    <CEffectIssueOrder id="MedivhTransformRavenMorphIssueOrder">
        <WhichUnit Value="Caster"/>
        <Abil value="MedivhTransformRavenMorph"/>
        <Player Value="Caster"/>
        <Target Value="CasterUnit"/>
        <CmdFlags index="Preempt" value="1"/>
    </CEffectIssueOrder>
    <CEffectIssueOrder id="MedivhTransformRavenGuardianMorphIssueOrder">
        <WhichUnit Value="Caster"/>
        <Abil value="MedivhTransformRavenGuardianMorph"/>
        <Player Value="Caster"/>
        <Target Value="CasterUnit"/>
    </CEffectIssueOrder>
    <CEffectSet id="MedivhDismountDecloakCasterSet">
        <EffectArray value="MedivhTransformRavenRemoveSet"/>
        <EffectArray value="DecloakCasterSet"/>
    </CEffectSet>
    <CEffectSet id="MedivhTransformRavenRemoveSet">
        <EffectArray value="MedivhTransformRavenGuardianMorphIssueOrder"/>
        <EffectArray value="MedivhTransformRavenLandDummy"/>
        <EffectArray value="MedivhTransformRavenRemove"/>
        <ValidatorArray value="MedivhCasterHasTransformRaven"/>
    </CEffectSet>
    <CEffectSet id="MedivhTransformRavenFountainSet">
        <EffectArray value="MedivhTransformRavenMorphIssueOrder"/>
        <EffectArray value="MedivhTransformRavenApply"/>
        <EffectArray value="MedivhTransformRavenFountainAddCooldown"/>
        <ValidatorArray value="MedivhCasterHasNoTransformRaven"/>
    </CEffectSet>
    <CEffectSet id="MedivhTransformRavenInitialSet">
        <EffectArray value="MedivhTransformRavenMoveFiltersOnModifyPlayer"/>
        <EffectArray value="MedivhTransformRavenSpeedBoostApply"/>
    </CEffectSet>
    <CEffectSet id="MedivhTransformRavenFinalSet">
        <EffectArray value="MedivhTransformRavenMoveFiltersOffModifyPlayer"/>
        <EffectArray value="MedivhTransformRavenModifyCooldown"/>
    </CEffectSet>
    <CEffectSwitch id="MedivhTransformRavenSpeedBoostSwitch">
        <CaseArray Validator="CasterHasHomeShieldProtection" Effect="MedivhTransformRavenSpeedBoostApply"/>
    </CEffectSwitch>
    <CEffectSet id="PortBackToBasePrepSet">
        <EffectArray value="MedivhTransformRavenRemoveSet"/>
    </CEffectSet>
    <CEffectSet id="MedivhArcaneRiftAbilityPrepareSet">
        <EffectArray value="MedivhArcaneRiftMedivhFacing"/>
        <EffectArray value="MedivhDismountDecloakCasterSet"/>
    </CEffectSet>
    <CEffectSet id="MedivhPortalDirectionSet">
        <ValidatorArray value="MedivhTargetIsMedivhPortal"/>
        <!-- Commenting out the facing portion of this data. If southward facing portals are what we end up with, delete this. BB -->
        <!--EffectArray value="MedivhPortalFacing"/-->
        <EffectArray value="MedivhPortalBeamPreventionDummyApply"/>
        <EffectArray value="MedivhPortalDirectionDummy"/>
    </CEffectSet>
    <CEffectSet id="MedivhPortalCreationInitialSet">
        <EffectArray value="MedivhPortalMarkerCarryRemove"/>
        <EffectArray value="MedivhPortalCreationDirectionPersistent"/>
        <EffectArray value="MedivhPortalMarkerDestroySearch"/>
        <EffectArray value="MedivhPortalCooldown"/>
    </CEffectSet>
    <CEffectSet id="MedivhPortalCreationInstantSet">
        <EffectArray value="MedivhModifyWeaponCooldown"/>
        <EffectArray value="MedivhPortalCasterOffsetPersistentInstant"/>
        <EffectArray value="MedivhPortalCreateCreationUnitTargetInstant"/>
        <EffectArray value="MedivhPortalCooldown"/>
        <TargetLocationType value="Point"/>
        <ValidatorArray value="TargetPointWalkable"/>
    </CEffectSet>
    <CEffectCreateUnit id="MedivhPortalCreateMarkerUnit">
        <ValidatorArray value="TargetPointWalkable"/>
        <WhichLocation Value="TargetPoint"/>
        <SpawnUnit value="MedivhPortalPlacementMarker"/>
        <SpawnRange value="6"/>
        <SpawnEffect value="MedivhPortalMarkerSpawnPersistent"/>
    </CEffectCreateUnit>
    <CEffectCreateUnit id="MedivhPortalCreateRealUnit">
        <WhichLocation Value="SourceUnit"/>
        <SpawnUnit value="MedivhPortal"/>
        <SpawnRange value="6"/>
        <SpawnEffect value="MedivhPortalDirectionPersistent"/>
    </CEffectCreateUnit>
    <CEffectCreateUnit id="MedivhPortalCreateCreationUnit">
        <ValidatorArray value="MedivhPortalNotWithinMinAndWithinMaxOrHasPortalAstralProjectionAndNotWithinMinAndWithinMax"/>
        <ValidatorArray value="TargetPointWalkable"/>
        <WhichLocation Value="TargetPoint"/>
        <SpawnUnit value="MedivhPortalCreation"/>
        <SpawnRange value="6"/>
        <SpawnEffect value="MedivhPortalCreationInitialSet"/>
    </CEffectCreateUnit>
    <CEffectCreateUnit id="MedivhPortalCreateCreationUnitTargetInstant">
        <WhichLocation Value="TargetPoint"/>
        <SpawnUnit value="MedivhPortalCreation"/>
        <SpawnRange value="6"/>
        <SpawnEffect value="MedivhPortalBirthBeamPersistent"/>
    </CEffectCreateUnit>
    <CEffectCreateUnit id="MedivhPortalCreateCreationUnitCasterInstant">
        <WhichLocation Value="TargetPoint"/>
        <SpawnUnit value="MedivhPortalCreation"/>
        <SpawnRange value="6"/>
        <SpawnEffect value="MedivhPortalBirthBeamPersistent"/>
    </CEffectCreateUnit>
    <CEffectCreateUnit id="MedivhPortalReplaceMarkerUnit">
        <SpawnUnit value="MedivhPortalCreation"/>
        <SpawnRange value="6"/>
        <SpawnEffect value="MedivhPortalBirthBeamPersistent"/>
    </CEffectCreateUnit>
    <CEffectRemoveBehavior id="MedivhPortalMarkerCarryRemove">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="MedivhPortalMarkerCarry"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="MedivhPortalMarkerCarryPortalCreatorRemove">
        <WhichUnit Effect="MedivhPortalMarkerSpawnPersistent" Value="Caster"/>
        <BehaviorLink value="MedivhPortalMarkerCarry"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="MedivhPortalEnterRemove">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="MedivhPortalEnter"/>
    </CEffectRemoveBehavior>
    <CEffectSet id="MedivhPortalMarkerDestroySet">
        <ValidatorArray value="MedivhTargetIsMarkerPortal"/>
        <EffectArray value="SuicideTargetFromTarget"/>
        <EffectArray value="MedivhPortalReplaceMarkerUnit"/>
    </CEffectSet>
    <CEffectSet id="MedivhPortalMarkerCleanupSet">
        <EffectArray value="MedivhPortalMarkerCarryPortalCreatorRemove"/>
        <EffectArray value="SuicideTargetFromTarget"/>
    </CEffectSet>
    <CEffectSwitch id="SmartCommandUnitInteractionSwitch">
        <CaseArray Validator="MedivhPortalSmartCommandCombine" Effect="MedivhPortalSmartCommandCreatePersistent"/>
        <ValidatorArray value="MedivhCasterHasNoPortalTeleportCooldown"/>
    </CEffectSwitch>
    <CEffectTeleport id="MedivhPortalTeleport">
        <PlacementAround Value="TargetUnit"/>
        <SourceLocation Value="TargetUnit"/>
    </CEffectTeleport>
    <CEffectCreatePersistent id="MedivhPortalDirectionPersistent">
        <WhichLocation Value="TargetUnit"/>
        <InitialDelay value="0.0625"/>
        <InitialEffect value="MedivhPortalDirectionSearch"/>
    </CEffectCreatePersistent>
    <!-- Used in triggers to get the portal into Medivh's selection. Do not modify without also updating triggers. BB -->
    <CEffectCreatePersistent id="MedivhPortalMarkerSpawnPersistent">
        <WhichLocation Value="TargetUnit"/>
        <InitialEffect value="MedivhPortalMarkerCarryApply"/>
        <PeriodCount value="2"/>
        <PeriodicEffectArray value="MedivhPortalTransformRavenPathableControllerApply"/>
        <PeriodicEffectArray value="MedivhPortalMarkerActualCarryApply"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="MedivhPortalTransformRavenPathableControllerApply">
        <Behavior value="MedivhTransformRavenPathableController"/>
    </CEffectApplyBehavior>
    <!-- Commenting out as we finalize portal orientation. If we stick with always southward facing portals, remove this and the subdata connected to it. BB -->
    <!--CEffectCreatePersistent id="MedivhPortalCreationDirectionPersistent">
        <WhichLocation Value="TargetUnit"/>
        <InitialDelay value="0.0625"/>
        <InitialEffect value="MedivhPortalCreationDirectionSearch"/>
    </CEffectCreatePersistent-->
    <CEffectIssueOrder id="MedivhPortalIssueStopOrder">
        <Abil value="stop"/>
    </CEffectIssueOrder>
    <CEffectSet id="MedivhPortalTeleportSet">
        <EffectArray value="MedivhPortalIssueStopOrder"/>
        <EffectArray value="MedivhPortalMageArmorApply"/>
        <EffectArray value="MedivhPortalRavenFamiliarCreateUnit"/>
        <EffectArray value="MedivhPortalTeleportCooldownApply"/>
        <EffectArray value="HeroGenericRecentlyTeleportedApplyBehavior"/>
        <ValidatorArray value="TargetNotDeadOrStunnedOrStasisOrRootedOrPolymorphed"/>
    </CEffectSet>
    <CEffectSet id="MedivhPortalTeleportSetFromPortal">
        <ValidatorArray value="TargetNotDeadOrStunnedOrStasisOrRootedOrPolymorphed"/>
        <EffectArray value="MedivhPortalMageArmorMarkerApply"/>
        <EffectArray value="MedivhPortalRavenFamiliarMarkerApply"/>
    </CEffectSet>
    <CEffectEnumArea id="MedivhDustOfAppearanceSearch">
        <SearchFilters value="-;Self,Player,Ally,Neutral,Missile,Dead"/>
        <AreaArray Effect="MedivhDustOfAppearanceImpactSet">
            <Radius value="12"/>
        </AreaArray>
        <SearchFlags index="ExtendByUnitRadius" value="1"/>
    </CEffectEnumArea>
    <CEffectSet id="MedivhDustOfAppearanceImpactSet">
        <ValidatorArray value="TargetDoesNotHaveInCargo"/>
        <EffectArray value="MedivhDustOfAppearanceApply"/>
    </CEffectSet>
    <CEffectApplyBehavior id="MedivhDustOfAppearanceApply">
        <Behavior value="MedivhDustOfAppearance"/>
    </CEffectApplyBehavior>
    <CEffectEnumArea id="MedivhPortalMarkerDestroySearch">
        <SearchFilters value="-;Ally,Neutral,Enemy"/>
        <AreaArray Effect="MedivhPortalMarkerDestroySet">
            <Radius value="50"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectEnumArea id="MedivhTransformRavenSpottedApplySearch">
        <SearchFilters value="Heroic;Player,Ally,Neutral"/>
        <AreaArray Effect="MedivhTransformRavenSpottedApply">
            <Radius value="6.5"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectSet id="MedivhTransformRavenPeriodicSet">
        <EffectArray value="MedivhTransformRavenSpottedApplySearch"/>
        <EffectArray value="MedivhTransformRavenSpeedBoostSwitch"/>
    </CEffectSet>
    <CEffectEnumArea id="MedivhPortalDirectionSearch">
        <SearchFilters value="-;Self,Ally,Neutral,Enemy"/>
        <AreaArray MaxCount="1" Effect="MedivhPortalDirectionSet">
            <Radius value="20"/>
        </AreaArray>
        <TargetSorts>
            <SortArray value="TSFarthestDistance"/>
        </TargetSorts>
    </CEffectEnumArea>
    <CEffectEnumArea id="MedivhPortalCreationDirectionSearch">
        <SearchFilters value="-;Self,Ally,Neutral,Enemy"/>
        <TargetSorts>
            <SortArray value="TSFarthestDistance"/>
        </TargetSorts>
        <AreaArray MaxCount="1" Effect="MedivhPortalCreationDirectionDummy">
            <Radius value="40"/>
        </AreaArray>
        <ExcludeArray Value="Target"/>
    </CEffectEnumArea>
    <CEffectApplyBehavior id="MedivhPortalMageArmorApply">
        <ValidatorArray index="0" value="MedivhTargetHasNoPortalMageArmorMarker"/>
        <Chance value="0"/>
        <Behavior value="MedivhPortalMageArmor"/>
        <Count value="3"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhPortalMageArmorMarkerApply">
        <ValidatorArray index="0" value="MedivhTargetHasNoPortalMageArmorMarker"/>
        <Chance value="0"/>
        <Behavior value="MedivhPortalMageArmorMarker"/>
    </CEffectApplyBehavior>
    <CEffectRemoveBehavior id="MedivhPortalMageArmorRemoveStack">
        <WhichUnit Value="Source"/>
        <BehaviorLink value="MedivhPortalMageArmor"/>
        <Count value="1"/>
    </CEffectRemoveBehavior>
    <CEffectSet id="MedivhPortalMageArmorRemoveSet">
        <EffectArray value="BlockDummyDamage"/>
        <EffectArray value="MedivhPortalMageArmorRemoveStack"/>
    </CEffectSet>
    <CEffectSet id="MedivhLeyLineSealInitialSet">
        <EffectArray value="MedivhLeyLineSealLaunchPersistent"/>
        <TargetLocationType value="Point"/>
    </CEffectSet>
    <CEffectCreatePersistent id="MedivhLeyLineSealLaunchPersistent">
        <WhichLocation Value="OriginPoint"/>
        <OffsetVectorStartLocation Value="OriginPoint"/>
        <InitialEffect value="MedivhLeyLineSealLaunchMissile"/>
        <InitialOffset value="0,-31,0" Y="-31"/>
    </CEffectCreatePersistent>
    <CEffectLaunchMissile id="MedivhLeyLineSealLaunchMissile">
        <LaunchLocation Effect="MedivhLeyLineSealLaunchPersistent" Value="OriginPoint"/>
        <ImpactLocation Value="TargetPoint"/>
        <LaunchOffset value="0,-2,0" Y="-2"/>
        <LaunchEffect value="MedivhLeyLineSealLaunchSet"/>
        <AmmoUnit value="MedivhLeyLineSealMissile"/>
        <Movers Link="MedivhLeyLineSealMissile"/>
    </CEffectLaunchMissile>
    <CEffectLaunchMissile id="MedivhLeyLineSealMedivhCheatsLaunchMissile">
        <LaunchLocation Effect="MedivhLeyLineSealLaunchPersistent" Value="OriginPoint"/>
        <ImpactLocation Value="TargetPoint"/>
        <LaunchOffset value="0,-2,0" Y="-2"/>
        <LaunchEffect value="MedivhLeyLineSealLaunchSet"/>
        <AmmoUnit value="MedivhLeyLineSealMissile"/>
        <Movers Link="MedivhLeyLineSealMedivhCheatsMissile"/>
    </CEffectLaunchMissile>
    <CEffectSet id="MedivhLeyLineSealLaunchSet">
        <EffectArray value="MedivhLeyLineSealInitialSearch"/>
        <EffectArray value="MedivhLeyLineSealApplyMissileScan"/>
        <EffectArray value="MedivhLeyLineSealMedivhCheatsControllerApply"/>
    </CEffectSet>
    <CEffectApplyBehavior id="MedivhLeyLineSealApplyMissileScan">
        <WhichUnit Value="Source"/>
        <Behavior value="MedivhLeyLineSealMissileScan"/>
    </CEffectApplyBehavior>
    <CEffectEnumArea id="MedivhLeyLineSealInitialSearch">
        <!-- This search is needed because offsets in the initial search need to be different than the missile scan -->
        <ImpactLocation Value="TargetPoint"/>
        <SearchFilters value="Heroic;Self,Player,Ally,Neutral,ImmuneToAOE,Structure,User1,Missile,Item,Stasis,Dead,MapBoss"/>
        <AreaArray Effect="MedivhLeyLineSealImpactSet">
            <RectangleWidth value="4"/>
            <RectangleHeight value="2.9"/>
        </AreaArray>
        <AreaRelativeOffset value="0,2" Y="2"/>
        <RevealerParams Duration="0.75" ShapeExpansion="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
    </CEffectEnumArea>
    <CEffectEnumArea id="MedivhLeyLineSealMissileScan">
        <SearchFilters value="Heroic;Self,Player,Ally,Neutral,ImmuneToAOE,Structure,User1,Missile,Item,Stasis,Dead,MapBoss"/>
        <SearchFlags index="DoActorSearch" value="1"/>
        <AreaArray Effect="MedivhLeyLineSealImpactSet">
            <RectangleWidth value="4"/>
            <RectangleHeight value="2.9"/>
        </AreaArray>
        <RevealerParams Duration="0.75" ShapeExpansion="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
        <ImpactLocation Value="SourceUnit"/>
        <AreaRelativeOffset value="0,-0.5" Y="-0.5"/>
    </CEffectEnumArea>
    <CEffectSet id="MedivhLeyLineSealImpactSet">
        <EffectArray value="DismountDecloakTargetSet"/>
        <EffectArray value="HeroRemovePushPullDebuffs"/>
        <EffectArray value="MedivhLeyLineSealApplyStasis"/>
        <EffectArray value="HeroGenericApplyMissileMovementSuppresser"/>
    </CEffectSet>
    <CEffectApplyBehavior id="MedivhLeyLineSealApplyStasis">
        <Behavior value="MedivhLeyLineSealStasis"/>
    </CEffectApplyBehavior>
    <CEffectSet id="MedivhPolyBombSet">
        <ValidatorArray value="NotVehicle"/>
        <EffectArray value="MedivhPolyBombPersistent"/>
        <EffectArray value="MedivhPolyBombApplyImmuneBehavior"/>
        <EffectArray value="MedivhModifyWeaponCooldown"/>
        <EffectArray value="SiegeModeRemoveSet"/>
        <EffectArray value="AbilityImpactRevealDummyDamage"/>
    </CEffectSet>
    <CEffectCreatePersistent id="MedivhPolyBombPersistent">
        <WhichLocation Value="TargetUnit"/>
        <InitialEffect value="MedivhPolyBombApplyBehavior"/>
        <AINotifyEffect value="MedivhPolyBombAIWarning"/>
        <ExpireDelay value="1.5"/>
    </CEffectCreatePersistent>
    <CEffectSet id="MedivhPolyBombAIWarning">
        <EffectArray value="MedivhPolyBombAIWarningDamage"/>
        <EffectArray value="MedivhPolyBombSpreadSearchArea"/>
    </CEffectSet>
    <CEffectDamage id="MedivhPolyBombAIWarningDamage">
        <Amount value="50"/>
    </CEffectDamage>
    <CEffectSet id="MedivhPolyBombSpreadSet">
        <ValidatorArray value="NotVehicle"/>
        <EffectArray value="MedivhPolyBombPersistent"/>
        <EffectArray value="MedivhPolyBombApplyImmuneBehavior"/>
        <EffectArray value="SiegeModeRemoveSet"/>
        <ReparentEffectChain value="MedivhPolyBombSet"/>
    </CEffectSet>
    <CEffectSet id="MedivhPolyBombRefreshSet">
        <ValidatorArray value="NotVehicle"/>
        <ValidatorArray value="MedivhTargetHasNoPolyBomb"/>
        <EffectArray value="MedivhPolyBombPersistent"/>
        <EffectArray value="MedivhPolyBombApplyImmuneBehavior"/>
        <EffectArray value="SiegeModeRemoveSet"/>
    </CEffectSet>
    <CEffectApplyBehavior id="MedivhPolyBombApplyBehavior">
        <Behavior value="MedivhPolyBomb"/>
        <ValidatorArray value="TargetNotUnstoppable"/>
        <ValidatorArray value="MedivhTargetHasNoPolyBomb"/>
    </CEffectApplyBehavior>
    <CEffectModifyUnit id="MedivhModifyWeaponCooldown">
        <ImpactUnit Value="Caster"/>
        <Weapon Weapon="MedivhHeroWeapon" CooldownOperation="Max" CooldownAmount="0.25"/>
    </CEffectModifyUnit>
    <CEffectEnumArea id="MedivhPolyBombSpreadSearchArea">
        <SearchFilters value="Heroic;Player,Ally,Neutral,Minion,Merc,Structure,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
        <SearchFlags index="DoActorSearch" value="1"/>
        <AreaArray Effect="MedivhPolyBombSpreadSet">
            <Radius value="3.5"/>
        </AreaArray>
        <RevealerParams Duration="1.5" ShapeExpansion="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
        <ExcludeArray Value="Target"/>
    </CEffectEnumArea>
    <CEffectEnumArea id="MedivhPolyBombRefreshSearchArea">
        <ExcludeArray Value="Target"/>
        <SearchFilters value="Heroic;Player,Ally,Neutral,Minion,Merc,Structure,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
        <AreaArray Effect="MedivhPolyBombRefreshSet">
            <Radius value="3.5"/>
        </AreaArray>
        <RevealerParams Duration="1.5" ShapeExpansion="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
    </CEffectEnumArea>
    <CEffectDamage id="MedivhArcaneRiftGuardianOfTirisfalMinionKill">
        <ImpactLocation Value="TargetUnit"/>
        <Flags index="Kill" value="1"/>
        <AmountScoreArray Validator="TargetMinion" Value="SiegeDamage"/>
        <Amount value="1"/>
    </CEffectDamage>
    <CEffectModifyUnit id="MedivhArcaneRiftMedivhFacing">
        <ValidatorArray value="MedivhCasterHasTransformRaven"/>
        <ImpactUnit Value="Caster"/>
        <FacingLocation Value="TargetPoint"/>
        <FacingType value="LookAt"/>
    </CEffectModifyUnit>
    <CEffectCreatePersistent id="MedivhArcaneRiftCreatePersistent">
        <WhichLocation Value="CasterPoint"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="MedivhArcaneRiftLaunchMissile"/>
        <PeriodicOffsetArray value="0,-10,0" Y="-10"/>
        <PeriodicPeriodArray value="0"/>
        <Marker Duration="1">
            <MatchFlags index="Id" value="1"/>
        </Marker>
    </CEffectCreatePersistent>
    <CEffectLaunchMissile id="MedivhArcaneRiftLaunchMissile">
        <ImpactLocation Value="TargetPoint"/>
        <LaunchOffset value="0,-0.9,0" Y="-0.9"/>
        <LaunchEffect value="MedivhArcaneRiftMissileScanPersistent"/>
        <ImpactEffect value="MedivhArcaneRiftDestructionSet"/>
        <AmmoUnit value="MedivhArcaneRiftMissile"/>
        <Movers Link="MedivhArcaneRiftMissile"/>
    </CEffectLaunchMissile>
    <CEffectCreatePersistent id="MedivhArcaneRiftMissileScanPersistent">
        <WhichLocation Value="SourceUnit"/>
        <PeriodCount value="9"/>
        <PeriodicEffectArray value="MedivhArcaneRiftMissileScan"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectDestroyPersistent id="MedivhArcaneRiftMissileScanDestroyPersistent">
        <WhichLocation Value="SourcePoint"/>
        <Effect value="MedivhArcaneRiftMissileScanPersistent"/>
        <Count value="1"/>
        <Radius value="0.5"/>
    </CEffectDestroyPersistent>
    <CEffectSet id="MedivhArcaneRiftDestructionSet">
        <EffectArray value="MedivhArcaneRiftArcaneChargeMarkerRemove"/>
        <EffectArray value="MedivhArcaneRiftArcaneChargeMarkerApply"/>
        <EffectArray value="MedivhArcaneRiftMissileScanDestroyPersistent"/>
    </CEffectSet>
    <CEffectEnumArea id="MedivhArcaneRiftMissileScan">
        <LaunchLocation Effect="MedivhArcaneRiftCreatePersistent" Value="OriginPoint"/>
        <ImpactLocation Value="SourceUnit"/>
        <SearchFilters value="-;Self,Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
        <SearchFlags index="DoActorSearch" value="1"/>
        <AreaArray Effect="MedivhArcaneRiftImpactSet">
            <RectangleWidth value="2.25"/>
            <RectangleHeight value="1.5"/>
        </AreaArray>
        <RevealerParams Duration="0.75" ShapeExpansion="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
    </CEffectEnumArea>
    <CEffectSet id="MedivhArcaneRiftImpactSet">
        <EffectArray value="ApplyAbilityImpactReveal"/>
        <EffectArray value="MedivhArcaneRiftDamageSwitch"/>
        <EffectArray value="MedivhArcaneRiftCooldownReduction"/>
        <EffectArray value="MedivhArcaneRiftManaRefund"/>
        <EffectArray value="MedivhArcaneRiftHeroHitApply"/>
        <EffectArray value="MedivhArcaneRiftTheMastersTouchQuestIncrementToken"/>
        <ValidatorArray value="noMarkers"/>
    </CEffectSet>
    <CEffectModifyUnit id="MedivhArcaneRiftCooldownReduction">
        <ValidatorArray value="TargetIsHero"/>
        <ValidatorArray value="MedivhSourceHasNoArcaneRiftHeroHitBehavior"/>
        <ImpactUnit Value="Caster"/>
        <Cost Abil="MedivhArcaneRift,Execute" CooldownOperation="Add" CooldownTimeUse="-5"/>
    </CEffectModifyUnit>
    <CEffectCreateHealer id="MedivhArcaneRiftManaRefund">
        <ValidatorArray value="TargetIsHero"/>
        <ValidatorArray value="MedivhSourceHasNoArcaneRiftHeroHitBehavior"/>
        <ImpactUnit Value="Caster"/>
        <RechargeVital value="Energy"/>
        <RechargeVitalRate value="50"/>
    </CEffectCreateHealer>
    <CEffectDamage id="MedivhArcaneRiftDamage" parent="StormSpell">
        <Amount value="200"/>
    </CEffectDamage>
    <CEffectDamage id="MedivhArcaneRiftArcaneChargeDamage" parent="StormSpell">
        <AttributeFactor index="Creep" value="0.3"/>
        <AttributeFactor index="Tower" value="0.3"/>
        <AttributeFactor index="Minion" value="0.3"/>
        <AttributeFactor index="Merc" value="0.3"/>
        <AttributeFactor index="Structure" value="0.3"/>
        <AttributeFactor index="Heroic" value="0.3"/>
        <AttributeFactor index="Summoned" value="0.3"/>
        <AttributeFactor index="User1" value="0.3"/>
        <AttributeFactor index="MapBoss" value="0.3"/>
        <AttributeFactor index="MapCreature" value="0.3"/>
        <Amount value="200"/>
    </CEffectDamage>
    <CEffectSwitch id="MedivhArcaneRiftDamageSwitch">
        <CaseArray Validator="MedivhHasArcaneRiftGuardianOfTirisfalAndTargetIsMinion" Effect="MedivhArcaneRiftGuardianOfTirisfalMinionKill"/>
        <CaseArray Validator="MedivhHasArcaneRiftArcaneChargeMarker" Effect="MedivhArcaneRiftArcaneChargeDamage"/>
        <CaseDefault value="MedivhArcaneRiftDamage"/>
    </CEffectSwitch>
    <CEffectEnumArea id="MedivhArcaneBrillianceApplySearch">
        <SearchFilters value="Heroic;Neutral,Enemy,Structure,User1,Missile,Item,Stasis,Dead,MapBoss"/>
        <AreaArray Effect="MedivhArcaneBrillianceImpactSet">
            <Radius value="8"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectSet id="MedivhArcaneBrillianceImpactSet">
        <EffectArray value="MedivhArcaneBrillianceApply"/>
        <EffectArray value="MedivhArcaneBrillianceManaRestore"/>
        <ValidatorArray value="TargetNotImmuneToFriendlyAbilitiesOrIsSpecialCase"/>
    </CEffectSet>
    <CEffectApplyBehavior id="MedivhArcaneBrillianceApply">
        <Behavior value="MedivhArcaneBrilliance"/>
    </CEffectApplyBehavior>
    <CEffectCreateHealer id="MedivhArcaneBrillianceManaRestore">
        <ValidatorArray value="TargetIsHero"/>
        <ValidatorArray value="TargetIsManaUser"/>
        <RechargeVital value="Energy"/>
        <RechargeVitalRate value="200"/>
    </CEffectCreateHealer>
    <CEffectApplyBehavior id="MedivhArcaneRiftHeroHitApply">
        <ValidatorArray index="0" value="MedivhSourceHasNoArcaneRiftHeroHitBehavior"/>
        <ValidatorArray value="TargetIsHero"/>
        <WhichUnit Value="Source"/>
        <Behavior value="MedivhArcaneRiftHeroHit"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="MedivhArcaneRiftArcaneChargeMarkerApply">
        <ValidatorArray index="0" value="MedivhSourceHasArcaneRiftHeroHitBehavior"/>
        <Chance value="0"/>
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhArcaneRiftArcaneChargeMarker"/>
    </CEffectApplyBehavior>
    <CEffectModifyPlayer id="MedivhArcaneRiftTheMastersTouchQuestCompleteModifyPlayer">
        <WhichPlayer Value="Caster"/>
        <EffectArray Operation="Subtract" Reference="Effect,MedivhArcaneRiftCooldownReduction,Cost[0].CooldownTimeUse" Value="1.000000"/>
        <EffectArray Reference="Effect,MedivhArcaneRiftDamage,AmountArray" Value="75"/>
        <EffectArray Operation="Set" Reference="Effect,MedivhArcaneRiftTheMastersTouchQuestIncrementToken,Chance" Value="0"/>
    </CEffectModifyPlayer>
    <CEffectRemoveBehavior id="MedivhArcaneRiftArcaneChargeMarkerRemove">
        <ValidatorArray index="0" value="MedivhHasArcaneRiftArcaneChargeMarker"/>
        <Chance value="0"/>
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="MedivhArcaneRiftArcaneChargeMarker"/>
    </CEffectRemoveBehavior>
    <CEffectApplyBehavior id="MedivhInvisibilityCloakApply">
        <Behavior value="MedivhInvisibilityCloak"/>
        <ValidatorArray value="TargetNotImmuneToFriendlyAbilitiesOrIsSpecialCase"/>
    </CEffectApplyBehavior>
    <CEffectRemoveBehavior id="MedivhInvisibilityCloakRemove">
        <WhichUnit Value="Source"/>
        <BehaviorLink value="MedivhInvisibilityCloak"/>
    </CEffectRemoveBehavior>
    <CEffectApplyBehavior id="MedivhInvisibilityHoldFireApply">
        <Behavior value="MedivhInvisibilityHoldFire"/>
    </CEffectApplyBehavior>
    <CEffectRemoveBehavior id="MedivhInvisibilityHoldFireRemove">
        <BehaviorLink value="MedivhInvisibilityHoldFire"/>
    </CEffectRemoveBehavior>
    <CEffectCreatePersistent id="MedivhLeyLineSealMedivhCheatsInitialPersistent">
        <InitialEffect value="MedivhLeyLineSealMedivhCheatsCastSet"/>
    </CEffectCreatePersistent>
    <CEffectEnumArea id="MedivhLeyLineSealMedivhCheatsFindMissileSearch">
        <LaunchLocation Value="CasterPoint"/>
        <SearchFilters value="Missile;Ally,Neutral,Enemy,ImmuneToAOE,Structure,User1,Item,Stasis,Dead,MapBoss"/>
        <AreaArray Effect="MedivhLeyLineSealMedivhCheatsMissileFoundPersistent">
            <Radius value="40"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectSet id="MedivhLeyLineSealMedivhCheatsCastSet">
        <EffectArray value="MedivhLeyLineSealMedivhCheatsFindMissileSearch"/>
        <EffectArray value="MedivhLeyLineSealMedivhCheatsControllerRemove"/>
        <TargetLocationType value="Point"/>
    </CEffectSet>
    <CEffectCreatePersistent id="MedivhLeyLineSealMedivhCheatsMissileFoundPersistent">
        <!-- If adjusting the length of this redirect, you must run the following test: -->
        <!-- Without CC reduction, the ability must not be able to hit the same target twice in 1 cast. BB -->
        <ValidatorArray value="MedivhTargetIsLeyLineSealMissile"/>
        <OffsetVectorStartLocation Value="TargetUnit"/>
        <OffsetVectorEndLocation Effect="MedivhLeyLineSealMedivhCheatsInitialPersistent"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="MedivhLeyLineSealMedivhCheatsMissileRedirect"/>
        <PeriodicOffsetArray value="0,-14.5,0" Y="-14.5"/>
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="MedivhLeyLineSealMedivhCheatsControllerApply">
        <Chance value="0"/>
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhLeyLineSealMedivhCheatsController"/>
    </CEffectApplyBehavior>
    <CEffectRemoveBehavior id="MedivhLeyLineSealMedivhCheatsControllerRemove">
        <Chance value="0"/>
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="MedivhLeyLineSealMedivhCheatsController"/>
    </CEffectRemoveBehavior>
    <CEffectCreatePersistent id="MedivhPortalBirthBeamPersistent">
        <WhichLocation Value="TargetUnit"/>
        <InitialDelay value="0.0625"/>
        <InitialEffect value="MedivhPortalBirthBeamPortalUnitSearch"/>
    </CEffectCreatePersistent>
    <CEffectEnumArea id="MedivhPortalBirthBeamPortalUnitSearch">
        <SearchFilters value="-;Self,Ally,Neutral,Enemy"/>
        <TargetSorts>
            <SortArray value="TSFarthestDistance"/>
        </TargetSorts>
        <AreaArray MaxCount="1" Effect="MedivhPortalBirthBeamDummySet">
            <Radius value="40"/>
        </AreaArray>
        <ExcludeArray Value="Target"/>
    </CEffectEnumArea>
    <CEffectSet id="MedivhPortalBirthBeamDummySet">
        <ValidatorArray value="MedivhTargetIsMedivhCreationPortal"/>
        <EffectArray value="MedivhPortalBirthBeamPreventionApplyBehavior"/>
        <EffectArray value="MedivhPortalBirthBeamDummy"/>
    </CEffectSet>
    <CEffectModifyUnit id="MedivhPortalBirthBeamDummy">
        <ValidatorArray value="MedivhTargetIsMedivhCreationPortal"/>
        <ValidatorArray value="MedivhPortalHasNoBirthBeamPreventionBehavior"/>
    </CEffectModifyUnit>
    <CEffectApplyBehavior id="MedivhPortalBirthBeamPreventionApplyBehavior">
        <ValidatorArray index="0" value="MedivhTargetIsMedivhCreationPortal"/>
        <Behavior value="MedivhPortalBirthBeamPreventionBehavior"/>
    </CEffectApplyBehavior>
    <CEffectSet id="MapMechanicAbilityTargetPrepareSet">
        <EffectArray value="MedivhTransformRavenRemoveSet"/>
    </CEffectSet>
    <!--    Medivh Hero Data   -->
    <CHero id="Medivh" parent="LegacyVOHero">
        <AttributeId value="Mdvh"/>
        <Role value="Specialist"/>
        <RolesMultiClass value="Specialist"/>
        <CollectionCategory value="Specialist"/>
        <RoleScoreValueOverride value="Support"/>
        <SelectScreenButtonImage value="Assets\Textures\storm_ui_ingame_heroselect_btn_medivh.dds"/>
        <ImageFacing value="Left"/>
        <VariationArray value="MedivhBaseVar1"/>
        <VariationArray value="MedivhBaseVar2"/>
        <VariationArray value="MedivhBaseVar3"/>
        <SkinArray value="MedivhUltimate"/>
        <SkinArray value="MedivhKnightOwl"/>
        <HeroAbilArray Abil="MedivhArcaneRift" Button="MedivhArcaneRift">
            <Flags index="ShowInHeroSelect" value="1"/>
            <Flags index="AffectedByCooldownReduction" value="1"/>
            <Flags index="AffectedByOverdrive" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Abil="MedivhForceOfWill" Button="MedivhForceOfWill">
            <Flags index="ShowInHeroSelect" value="1"/>
            <Flags index="AffectedByCooldownReduction" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Abil="MedivhPortalInstant" Button="MedivhPortal">
            <Flags index="ShowInHeroSelect" value="1"/>
            <Flags index="AffectedByCooldownReduction" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Abil="MedivhPortal1" Button="MedivhPortal">
            <Flags index="AffectedByCooldownReduction" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Abil="MedivhPortal2" Button="MedivhPortal">
            <Flags index="AffectedByCooldownReduction" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Abil="MedivhPolyBomb" Button="MedivhPolyBomb">
            <Flags index="ShowInHeroSelect" value="1"/>
            <Flags index="AffectedByCooldownReduction" value="1"/>
            <Flags index="AffectedByOverdrive" value="1"/>
            <Flags index="Heroic" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Abil="MedivhLeyLineSeal" Button="MedivhLeyLineSeal">
            <Flags index="ShowInHeroSelect" value="1"/>
            <Flags index="AffectedByCooldownReduction" value="1"/>
            <Flags index="AffectedByOverdrive" value="1"/>
            <Flags index="Heroic" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Button="MedivhRavenForm">
            <Flags index="ShowInHeroSelect" value="1"/>
            <Flags index="Trait" value="1"/>
        </HeroAbilArray>
        <HeroAbilArray Abil="MedivhTransformRaven" Button="MedivhTransformRaven">
            <Flags index="MountReplacement" value="1"/>
        </HeroAbilArray>
        <!-- Tier 1 -->
        <TalentTreeArray Talent="MedivhPortalStablePortal" Tier="1" Column="1"/>
        <TalentTreeArray Talent="MedivhPortalPortalMastery" Tier="1" Column="2"/>
        <TalentTreeArray Talent="MedivhTransformRavenRavensIntellect" Tier="1" Column="3"/>
        <TalentTreeArray Talent="MedivhPortalMageArmor" Tier="2" Column="1"/>
        <!-- Tier 2 -->
        <TalentTreeArray Talent="MedivhTransformRavenBirdsEyeView" Tier="2" Column="2"/>
        <TalentTreeArray Talent="MedivhDustOfAppearance" Tier="2" Column="3"/>
        <TalentTreeArray Talent="MedivhArcaneRiftArcaneCharge" Tier="3" Column="1"/>
        <!-- Tier 3 -->
        <TalentTreeArray Talent="MedivhArcaneRiftTheMastersTouch" Tier="3" Column="2"/>
        <TalentTreeArray Talent="MedivhForceOfWillArcaneExplosion" Tier="3" Column="3"/>
        <TalentTreeArray Talent="MedivhPortalRavenFamiliar" Tier="3" Column="4"/>
        <TalentTreeArray Talent="MedivhPolyBomb" Tier="4" Column="1"/>
        <!-- Tier 4 -->
        <TalentTreeArray Talent="MedivhLeyLineSeal" Tier="4" Column="2"/>
        <TalentTreeArray Talent="MedivhPortalQuickening" Tier="5" Column="1"/>
        <!-- Tier 5 -->
        <TalentTreeArray Talent="MedivhPortalAstralProjection" Tier="5" Column="2"/>
        <TalentTreeArray Talent="MedivhTransformRavenWindsOfCelerity" Tier="5" Column="3"/>
        <TalentTreeArray Talent="MedivhForceOfWillCircleOfProtection" Tier="6" Column="1"/>
        <!-- Tier 6 -->
        <TalentTreeArray Talent="MedivhForceOfWillEnduringWill" Tier="6" Column="2"/>
        <TalentTreeArray Talent="MedivhForceOfWillReabsorption" Tier="6" Column="3"/>
        <TalentTreeArray Talent="MedivhPolyBombGlyphOfPolyBomb" Tier="7" Column="1">
            <PrerequisiteTalentArray value="MedivhPolyBomb"/>
        </TalentTreeArray>
        <!-- Tier 7 -->
        <TalentTreeArray Talent="MedivhLeyLineSealMedivhCheats" Tier="7" Column="2">
            <PrerequisiteTalentArray value="MedivhLeyLineSeal"/>
        </TalentTreeArray>
        <TalentTreeArray Talent="MedivhArcaneRiftGuardianOfTirisfal" Tier="7" Column="3"/>
        <TalentTreeArray Talent="MedivhArcaneBrilliance" Tier="7" Column="4"/>
        <TalentTreeArray Talent="MedivhInvisibility" Tier="7" Column="5"/>
        <VariationIcon value="Assets\Textures\ui_glues_swatch_brown.dds"/>
        <UniverseIcon value="Assets\Textures\ui_glues_store_gameicon_wow.dds"/>
        <ProductId value="22025"/>
        <Ratings>
            <Damage value="2"/>
            <Utility value="10"/>
            <Survivability value="6"/>
            <Complexity value="8"/>
        </Ratings>
        <Flags index="UsesMount" value="0"/>
        <Flags index="GoodForModeA" value="1"/>
        <LevelScalingArray Ability="MedivhForceOfWill">
            <Modifications>
                <Catalog value="Behavior"/>
                <Entry value="MedivhForceOfWill"/>
                <Field value="DamageResponse.ModifyLimit"/>
                <Value value="0.040000"/>
                <AffectedByAbilityPower value="1"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Effect"/>
                <Entry value="MedivhPortalRavenFamiliarImpactDamage"/>
                <Field value="Amount"/>
                <Value value="0.040000"/>
                <AffectedByAbilityPower value="1"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Effect"/>
                <Entry value="MedivhForceOfWillArcaneExplosionDamage"/>
                <Field value="Amount"/>
                <Value value="0.040000"/>
                <AffectedByAbilityPower value="1"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
        </LevelScalingArray>
        <LevelScalingArray Ability="MedivhArcaneRift">
            <Modifications>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftDamage"/>
                <Field value="Amount"/>
                <Value value="0.040000"/>
                <AffectedByAbilityPower value="1"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftArcaneChargeDamage"/>
                <Field value="Amount"/>
                <Value value="0.040000"/>
                <AffectedByAbilityPower value="1"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
        </LevelScalingArray>
        <LevelScalingArray>
            <Modifications>
                <Catalog value="Unit"/>
                <Entry value="HeroMedivh"/>
                <Field value="LifeMax"/>
                <Value value="0.040000"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Unit"/>
                <Entry value="HeroMedivh"/>
                <Field value="LifeStart"/>
                <Value value="0.040000"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Unit"/>
                <Entry value="HeroMedivh"/>
                <Field value="LifeRegenRate"/>
                <Value value="0.040000"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Unit"/>
                <Entry value="HeroMedivhRaven"/>
                <Field value="LifeMax"/>
                <Value value="0.040000"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Unit"/>
                <Entry value="HeroMedivhRaven"/>
                <Field value="LifeStart"/>
                <Value value="0.040000"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Unit"/>
                <Entry value="HeroMedivhRaven"/>
                <Field value="LifeRegenRate"/>
                <Value value="0.040000"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
            <Modifications>
                <Catalog value="Effect"/>
                <Entry value="MedivhWeaponDamage"/>
                <Field value="Amount"/>
                <Value value="0.040000"/>
                <AffectedByOverdrive value="1"/>
            </Modifications>
        </LevelScalingArray>
        <Portrait value="Assets\Textures\ui_targetportrait_hero_medivh.dds"/>
        <PartyPanelButtonImage value="Assets\Textures\storm_ui_ingame_partypanel_btn_medivh.dds"/>
        <LeaderboardImage value="Assets\Textures\ui_targetportrait_hero_medivh.dds"/>
        <ScoreScreenImage value="Assets\Textures\storm_ui_ingame_hero_leaderboard_medivh.dds"/>
        <DraftScreenLargeImage value="Assets\Textures\storm_ui_glues_draft_banner_medivh.dds"/>
        <DraftScreenLargeImageBackground value="Assets\Textures\storm_ui_glues_draft_banner_glow_medivh.dds"/>
        <DraftScreenPortrait value="Assets\Textures\storm_ui_glues_draft_portrait_medivh.dds"/>
        <DraftScreenPortraitBackground value="Assets\Textures\storm_ui_glues_draft_portrait_bg_medivh.dds"/>
        <CollectionIcon value="Assets\Textures\storm_ui_glues_draft_portrait_medivh.dds"/>
        <AlternateUnitArray value="HeroMedivhRaven"/>
        <Difficulty value="VeryHard"/>
        <VOArray index="AIAttack" value="MedivhBase_AI_Attack"/>
        <VOArray index="AICaution" value="MedivhBase_AI_Caution"/>
        <VOArray index="AIGoodJob" value="MedivhBase_AI_GoodJob"/>
        <VOArray index="AIHeal" value="MedivhBase_AI_Heal"/>
        <VOArray index="AIMercCapture" value="MedivhBase_AI_MercCapture"/>
        <VOArray index="AIOnMyWay" value="MedivhBase_AI_OnMyWay"/>
        <VOArray index="AIRetreat" value="MedivhBase_AI_Retreat"/>
        <VOArray index="AIUhOh" value="MedivhBase_AI_Uhoh"/>
        <VOArray index="Celebrate" value="MedivhBase_Celebrate"/>
        <VOArray index="Cheer" value="MedivhBase_VOX_Cheer"/>
        <VOArray index="Comeback" value="MedivhBase_Comeback"/>
        <VOArray index="EndEnemyKillSpree" value="MedivhBase_KillSpreeEnd"/>
        <VOArray index="GetHit" value="MedivhBase_VOX_GetHitSmall"/>
        <VOArray index="GetHitLarge" value="MedivhBase_VOX_GetHitLarge"/>
        <VOArray index="GetHitSmall" value="MedivhBase_VOX_GetHitSmall"/>
        <VOArray index="GlueExamineLocked" value="MedivhBase_UI_ExLocked"/>
        <VOArray index="GlueExaminePurchased" value="MedivhBase_UI_ExPurchased"/>
        <VOArray index="GlueGift" value="MedivhBase_UI_Gift"/>
        <VOArray index="GluePurchase" value="MedivhBase_UI_Purchase"/>
        <VOArray index="GlueTrial" value="MedivhBase_UI_Trial"/>
        <VOArray index="GlueWaitLocked" value="MedivhBase_UI_WaitLocked"/>
        <VOArray index="GlueWaitPurchased" value="MedivhBase_UI_WaitPurchased"/>
        <VOArray index="Goodbye" value="MedivhBase_Social_Goodbye"/>
        <VOArray index="Healed" value="MedivhBase_Healed"/>
        <VOArray index="Hello" value="MedivhBase_Social_Hello"/>
        <VOArray index="IntroAgree" value="MedivhBase_IntroAgree"/>
        <VOArray index="IntroBoast" value="MedivhBase_IntroBoast"/>
        <VOArray index="IntroQuestion" value="MedivhBase_IntroQuestion"/>
        <VOArray index="IntroResponse" value="MedivhBase_IntroRespond"/>
        <VOArray index="KillGeneric" value="MedivhBase_Kill"/>
        <VOArray index="Laugh" value="MedivhBase_Laugh"/>
        <VOArray index="No" value="MedivhBase_No"/>
        <VOArray index="PingAssistHero" value="MedivhBase_Ping_AssistHero"/>
        <VOArray index="PingAssistMe" value="MedivhBase_Ping_AssistMe"/>
        <VOArray index="PingAttackCore" value="MedivhBase_Ping_AttackCastle"/>
        <VOArray index="PingAttackHere" value="MedivhBase_Ping_Attack"/>
        <VOArray index="PingAttackHero" value="MedivhBase_Ping_KillHero"/>
        <VOArray index="PingAttackMercCamp" value="MedivhBase_Ping_AttackMerc"/>
        <VOArray index="PingAttackTown" value="MedivhBase_Ping_AttackOutpost"/>
        <VOArray index="PingAttackWatchTower" value="MedivhBase_Ping_AttackTower"/>
        <VOArray index="PingDefendCore" value="MedivhBase_Ping_DefendCastle"/>
        <VOArray index="PingDefendHere" value="MedivhBase_Ping_Defend"/>
        <VOArray index="PingDefendTown" value="MedivhBase_Ping_DefendOutpost"/>
        <VOArray index="PingDefendWatchTower" value="MedivhBase_Ping_DefendTower"/>
        <VOArray index="Pissed" value="MedivhBase_Pissed"/>
        <VOArray index="Resurrected" value="MedivhBase_Resurrected"/>
        <VOArray index="Revive" value="MedivhBase_Revive"/>
        <VOArray index="Sorry" value="MedivhBase_Social_Sorry"/>
        <VOArray index="SpecChosen" value="MedivhBase_Spec"/>
        <VOArray index="TeamKilled" value="MedivhBase_TeamKilled"/>
        <VOArray index="Thanks" value="MedivhBase_Social_Thanks"/>
        <VOArray index="WellPlayed" value="MedivhBase_Social_WellPlayed"/>
        <VOArray index="WorthIt" value="MedivhBase_WorthIt"/>
        <ReleaseDate Month="6" Day="14" Year="2016"/>
        <TalentAIBuildsArray ChanceToPick="16">
            <TalentsArray value="MedivhPortalPortalMastery"/>
            <TalentsArray value="MedivhPortalMageArmor"/>
            <TalentsArray value="MedivhArcaneRiftTheMastersTouch"/>
            <TalentsArray value="MedivhLeyLineSeal"/>
            <TalentsArray value="MedivhPortalQuickening"/>
            <TalentsArray value="MedivhForceOfWillReabsorption"/>
            <TalentsArray value="MedivhInvisibility"/>
        </TalentAIBuildsArray>
        <TalentAIBuildsArray ChanceToPick="16">
            <TalentsArray value="MedivhTransformRavenRavensIntellect"/>
            <TalentsArray value="MedivhTransformRavenBirdsEyeView"/>
            <TalentsArray value="MedivhArcaneRiftArcaneCharge"/>
            <TalentsArray value="MedivhPolyBomb"/>
            <TalentsArray value="MedivhPortalAstralProjection"/>
            <TalentsArray value="MedivhForceOfWillCircleOfProtection"/>
            <TalentsArray value="MedivhPolyBombGlyphOfPolyBomb"/>
        </TalentAIBuildsArray>
        <TalentAIBuildsArray ChanceToPick="16">
            <TalentsArray value="MedivhPortalStablePortal"/>
            <TalentsArray value="MedivhPortalMageArmor"/>
            <TalentsArray value="MedivhPortalRavenFamiliar"/>
            <TalentsArray value="MedivhLeyLineSeal"/>
            <TalentsArray value="MedivhPortalAstralProjection"/>
            <TalentsArray value="MedivhForceOfWillEnduringWill"/>
            <TalentsArray value="MedivhLeyLineSealMedivhCheats"/>
        </TalentAIBuildsArray>
        <TalentAIBuildsArray ChanceToPick="16">
            <TalentsArray value="MedivhTransformRavenRavensIntellect"/>
            <TalentsArray value="MedivhDustOfAppearance"/>
            <TalentsArray value="MedivhArcaneRiftTheMastersTouch"/>
            <TalentsArray value="MedivhPolyBomb"/>
            <TalentsArray value="MedivhTransformRavenWindsOfCelerity"/>
            <TalentsArray value="MedivhForceOfWillReabsorption"/>
            <TalentsArray value="MedivhPolyBombGlyphOfPolyBomb"/>
        </TalentAIBuildsArray>
        <TalentAIBuildsArray AIOnly="1" ChanceToPick="16">
            <TalentsArray value="MedivhPortalStablePortal"/>
            <TalentsArray value="MedivhDustOfAppearance"/>
            <TalentsArray value="MedivhForceOfWillArcaneExplosion"/>
            <TalentsArray value="MedivhLeyLineSeal"/>
            <TalentsArray value="MedivhPortalQuickening"/>
            <TalentsArray value="MedivhForceOfWillEnduringWill"/>
            <TalentsArray value="MedivhArcaneRiftGuardianOfTirisfal"/>
        </TalentAIBuildsArray>
        <TalentAIBuildsArray AIOnly="1" ChanceToPick="16">
            <TalentsArray value="MedivhTransformRavenRavensIntellect"/>
            <TalentsArray value="MedivhTransformRavenBirdsEyeView"/>
            <TalentsArray value="MedivhPortalRavenFamiliar"/>
            <TalentsArray value="MedivhPolyBomb"/>
            <TalentsArray value="MedivhTransformRavenWindsOfCelerity"/>
            <TalentsArray value="MedivhForceOfWillCircleOfProtection"/>
            <TalentsArray value="MedivhPolyBombGlyphOfPolyBomb"/>
        </TalentAIBuildsArray>
        <HeroTierAchievementId value="5216701565557195992"/>
        <Universe value="Warcraft"/>
        <VoiceLineArray value="MedivhBase_VoiceLine01"/>
        <VoiceLineArray value="MedivhBase_VoiceLine02"/>
        <VoiceLineArray value="MedivhBase_VoiceLine03"/>
        <VoiceLineArray value="MedivhBase_VoiceLine04"/>
        <VoiceLineArray value="MedivhBase_VoiceLine05"/>
        <Rarity value="Legendary"/>
    </CHero>
    <!--    Medivh Items    -->
    <CItemAbil id="MedivhDustOfAppearance">
        <Class value="Item"/>
    </CItemAbil>
    <CItemAbil id="MedivhTransformRavenBirdsEyeView">
        <Class value="Item"/>
        <Requirements value="MedivhTransformRavenBirdsEyeView"/>
    </CItemAbil>
    <CItemAbil id="MedivhInvisibility">
        <Class value="Item"/>
        <Requirements value="MedivhAbilityCastLocationPathable"/>
    </CItemAbil>
    <CItemAbil id="MedivhArcaneBrilliance">
        <Class value="Item"/>
    </CItemAbil>
    <!--    Medivh Kinetics    -->
    <CKineticFollow id="MedivhPortalRavenFamiliarFollow">
        <Cycles value="4"/>
        <Duration value="1.25"/>
        <Where Effect="MedivhPortalTeleportSet" Value="TargetUnit"/>
        <Follow value="Position"/>
    </CKineticFollow>
    <CKineticRotate id="MedivhPortalRavenFamiliarOrbit">
        <Cycles value="4"/>
        <Duration value="1.25"/>
        <Around Effect="MedivhPortalTeleportSet" Value="TargetUnit"/>
        <Yaw value="360"/>
    </CKineticRotate>
    <CKineticRotate id="MedivhPortalRavenFamiliarSpin">
        <Cycles value="1"/>
        <Duration value="1.25"/>
        <Around Value="TargetUnit"/>
        <Yaw value="360"/>
    </CKineticRotate>
    <CKineticTranslate id="MedivhPortalRavenFamiliarTranslate">
        <Duration value="1.25"/>
        <XOffset value="2"/>
    </CKineticTranslate>
    <CKineticSet id="MedivhPortalRavenFamiliarSet">
        <KineticArray value="MedivhPortalRavenFamiliarFollow"/>
        <!--KineticArray value="MedivhPortalRavenFamiliarSpin"/-->
        <KineticArray value="MedivhPortalRavenFamiliarTranslate"/>
        <KineticArray value="MedivhPortalRavenFamiliarOrbit"/>
    </CKineticSet>
    <!--    Medivh Models   -->
    <!-- Ragdoll Deaths -->
    <!-- Portrait Commons -->
    <!-- Portrait Skins -->
    <!--    Medivh Movers    -->
    <CMoverAvoid id="MedivhTransformRaven" parent="Ground">
        <HeightMap value="Air"/>
        <PathMode value="Digger"/>
    </CMoverAvoid>
    <CMoverMissile id="MedivhWeaponMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Acceleration value="-75"/>
            <Speed value="33"/>
            <MinSpeed value="15"/>
            <MaxSpeed value="33"/>
            <IgnoresClearanceChecks value="1"/>
            <YawPitchRoll value="MAX"/>
        </MotionPhases>
    </CMoverMissile>
    <CMoverMissile id="MedivhPortalRavenFamiliarMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Acceleration value="25"/>
            <Speed value="25"/>
            <MinSpeed value="25"/>
            <MaxSpeed value="40"/>
            <IgnoresClearanceChecks value="1"/>
            <YawPitchRoll value="MAX"/>
        </MotionPhases>
    </CMoverMissile>
    <CMoverMissile id="MedivhLeyLineSealMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Speed value="9"/>
            <MinSpeed value="9"/>
            <MaxSpeed value="9"/>
            <Outro value="-3,-2.5"/>
            <YawPitchRoll value="MAX"/>
        </MotionPhases>
    </CMoverMissile>
    <CMoverMissile id="MedivhLeyLineSealMissileMedivhCheatsRedirect">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Speed value="8"/>
            <MinSpeed value="8"/>
            <MaxSpeed value="8"/>
            <ActorTracking value="Actual"/>
            <Outro value="1,1.25"/>
            <RotationLaunchActorType value="LaunchToTarget2D"/>
            <RotationActorType value="LookAtTarget2D"/>
            <YawPitchRoll value="MAX"/>
        </MotionPhases>
        <MotionPhases>
            <Driver value="Guidance"/>
            <Speed value="9"/>
            <MinSpeed value="9"/>
            <MaxSpeed value="9"/>
            <YawPitchRoll value="MAX"/>
        </MotionPhases>
    </CMoverMissile>
    <CMoverMissile id="MedivhLeyLineSealMedivhCheatsMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Speed value="18"/>
            <MinSpeed value="18"/>
            <MaxSpeed value="18"/>
            <Outro value="-3,-2.5"/>
            <YawPitchRoll value="MAX"/>
        </MotionPhases>
    </CMoverMissile>
    <CMoverMissile id="MedivhArcaneRiftMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Acceleration value="-55"/>
            <Speed value="27"/>
            <MinSpeed value="14"/>
            <MaxSpeed value="27"/>
            <YawPitchRoll value="5759.6484"/>
        </MotionPhases>
    </CMoverMissile>
    <!--    Medivh Requirements     -->
    <CRequirement id="MedivhAbilityCastLocationPathable">
        <NodeArray index="Use" Link="EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="AbilityCastLocationPathableAndNoPortalsActive">
        <NodeArray index="Use" Link="AndEqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1EqCountUnitMedivhPortalQueuedOrBetter0"/>
    </CRequirement>
    <CRequirement id="MedivhLeyLineSealMedivhCheatsAvailable">
        <NodeArray index="Use" Link="EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
        <NodeArray index="Show" Link="EqCountBehaviorMedivhLeyLineSealMedivhCheatsControllerCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="MedivhNoTransformRavenActive">
        <NodeArray index="Use" Link="EqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit0"/>
    </CRequirement>
    <CRequirement id="MedivhPortalMarkerCancel">
        <NodeArray index="Use" Link="GTECountBehaviorMedivhPortalMarkerCarryCompleteOnlyAtUnit1"/>
        <NodeArray index="Show" Link="GTECountBehaviorMedivhPortalMarkerCarryCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="MedivhPortalPortalMasteryLearned">
        <NodeArray index="Use" Link="AndEqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1EqCountUnitMedivhPortalQueuedOrBetter0"/>
        <NodeArray index="Show" Link="GTECountBehaviorMedivhPortalPortalMasteryCarryCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="MedivhTransformRavenActive">
        <NodeArray index="Use" Link="AndCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
        <NodeArray index="Show" Link="AndCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="MedivhPortalMarkerActive">
        <NodeArray index="Use" Link="AndGTECountBehaviorMedivhPortalMarkerActualCarryCompleteOnlyAtUnit1GTECountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1EqCountUnitMedivhPortalQueuedOrBetter0"/>
        <NodeArray index="Show" Link="GTECountBehaviorMedivhPortalMarkerCarryCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="MedivhTransformRavenAtFountain">
        <NodeArray index="Show" Link="AndCountBehaviorHomeShieldProtectionCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="MedivhTransformRavenBirdsEyeView">
        <NodeArray index="Use" Link="AndCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1"/>
    </CRequirement>
    <CRequirement id="MedivhSpecialCaseUltimate1Unlocked">
        <NodeArray index="Use" Link="AndCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnitEqCountBehaviorHeroGenericPregameAbilitySuppressionCompleteOnlyAtUnit0"/>
        <NodeArray index="Show" Link="CountBehaviorUltimate1UnlockedCompleteOnlyAtUnit"/>
    </CRequirement>
    <CRequirement id="MedivhSpecialCaseUltimate2Unlocked">
        <NodeArray index="Use" Link="AndCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnitEqCountBehaviorHeroGenericPregameAbilitySuppressionCompleteOnlyAtUnit0"/>
        <NodeArray index="Show" Link="CountBehaviorUltimate2UnlockedCompleteOnlyAtUnit"/>
    </CRequirement>
    <CRequirementAnd id="AndCountBehaviorHomeShieldProtectionCompleteOnlyAtUnit1">
        <OperandArray value="CountBehaviorHomeShieldProtectionCompleteOnlyAtUnit"/>
        <OperandArray value="1"/>
    </CRequirementAnd>
    <CRequirementAnd id="AndCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1">
        <OperandArray value="CountBehaviorMedivhTransformRavenCompleteOnlyAtUnit"/>
        <OperandArray value="1"/>
    </CRequirementAnd>
    <CRequirementAnd id="AndCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1">
        <OperandArray value="CountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit"/>
        <OperandArray value="1"/>
    </CRequirementAnd>
    <CRequirementAnd id="AndCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnitEqCountBehaviorHeroGenericPregameAbilitySuppressionCompleteOnlyAtUnit0">
        <OperandArray value="CountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit"/>
        <OperandArray value="EqCountBehaviorHeroGenericPregameAbilitySuppressionCompleteOnlyAtUnit0"/>
    </CRequirementAnd>
    <CRequirementAnd id="AndEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1">
        <OperandArray value="EqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1"/>
        <OperandArray value="EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
    </CRequirementAnd>
    <CRequirementAnd id="AndEqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1EqCountUnitMedivhPortalQueuedOrBetter0">
        <OperandArray value="EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
        <OperandArray value="EqCountUnitMedivhPortalQueuedOrBetter0"/>
    </CRequirementAnd>
    <CRequirementAnd id="AndGTECountBehaviorMedivhPortalMarkerActualCarryCompleteOnlyAtUnit1GTECountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1EqCountUnitMedivhPortalQueuedOrBetter0">
        <OperandArray value="GTECountBehaviorMedivhPortalMarkerActualCarryCompleteOnlyAtUnit1"/>
        <OperandArray value="GTECountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
        <OperandArray value="EqCountUnitMedivhPortalQueuedOrBetter0"/>
    </CRequirementAnd>
    <CRequirementAnd id="AndOrEqCountBehaviorDeadQueuedOrBetterAtUnit0EqCountBehaviorLeoricUndyingQueuedOrBetterAtUnit1OrEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit0AndEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1EqC1203471776">
        <OperandArray value="OrEqCountBehaviorDeadQueuedOrBetterAtUnit0EqCountBehaviorLeoricUndyingQueuedOrBetterAtUnit1"/>
        <OperandArray value="OrEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit0AndEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
        <OperandArray value="EqCountBehaviorHomeShieldProtectionQueuedOrBetterAtUnit0"/>
    </CRequirementAnd>
    <CRequirementCountBehavior id="CountBehaviorHomeShieldProtectionCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="HomeShieldProtection" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountBehavior id="CountBehaviorMedivhLeyLineSealMedivhCheatsControllerCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="MedivhLeyLineSealMedivhCheatsController" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountBehavior id="CountBehaviorMedivhPortalMarkerActualCarryCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="MedivhPortalMarkerActualCarry" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountBehavior id="CountBehaviorMedivhPortalMarkerCarryCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="MedivhPortalMarkerCarry" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountBehavior id="CountBehaviorMedivhPortalPortalMasteryCarryCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="MedivhPortalPortalMasteryCarry" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountBehavior id="CountBehaviorMedivhTransformRavenCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="MedivhTransformRaven" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountBehavior id="CountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="MedivhTransformRavenPathableController" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountUnit id="CountUnitMedivhPortalQueuedOrBetter">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="MedivhPortal" State="QueuedOrBetter"/>
    </CRequirementCountUnit>
    <CRequirementEq id="EqCountBehaviorMedivhLeyLineSealMedivhCheatsControllerCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorMedivhLeyLineSealMedivhCheatsControllerCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementEq>
    <CRequirementEq id="EqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit0">
        <OperandArray index="0" value="CountBehaviorMedivhTransformRavenCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="0"/>
    </CRequirementEq>
    <CRequirementEq id="EqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorMedivhTransformRavenCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementEq>
    <CRequirementEq id="EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementEq>
    <CRequirementEq id="EqCountUnitMedivhPortalQueuedOrBetter0">
        <OperandArray index="0" value="CountUnitMedivhPortalQueuedOrBetter"/>
        <OperandArray index="1" value="0"/>
    </CRequirementEq>
    <CRequirementGTE id="GTECountBehaviorMedivhPortalMarkerActualCarryCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorMedivhPortalMarkerActualCarryCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementGTE>
    <CRequirementGTE id="GTECountBehaviorMedivhPortalMarkerCarryCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorMedivhPortalMarkerCarryCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementGTE>
    <CRequirementGTE id="GTECountBehaviorMedivhPortalPortalMasteryCarryCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorMedivhPortalPortalMasteryCarryCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementGTE>
    <CRequirementGTE id="GTECountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementGTE>
    <CRequirementOr id="OrEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit0AndEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1">
        <OperandArray value="EqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit0"/>
        <OperandArray value="AndEqCountBehaviorMedivhTransformRavenCompleteOnlyAtUnit1EqCountBehaviorMedivhTransformRavenPathableControllerCompleteOnlyAtUnit1"/>
    </CRequirementOr>
    <CRewardPortrait id="MedivhBasic" parent="HeroPortraitParent">
        <IconFile value="$HeroPortraits5"/>
        <IconSlot value="27"/>
        <Hero value="Medivh"/>
    </CRewardPortrait>
    <CRewardPortrait id="MedivhEpic" parent="HeroPortraitParentEpic">
        <IconFile value="$HeroPortraits6"/>
        <IconSlot value="27"/>
        <Hero value="Medivh"/>
    </CRewardPortrait>
    <CRewardIcon id="MedivhSkinVariation1" parent="SkinVariationParent"/>
    <CRewardIcon id="MedivhSkinVariation2" parent="SkinVariationParent"/>
    <CRewardIcon id="Medivh" parent="BattlePayRewardParent">
        <License value="16754"/>
    </CRewardIcon>
    <CShapeArc id="MedivhArcaneBrillianceVisibilityShape">
        <Arc value="360"/>
        <Radius value="8"/>
    </CShapeArc>
    <!--    Medivh Sounds   -->
    <!--    Medivh Talents     -->
    <CTalent id="MedivhArcaneBrilliance">
        <Face value="MedivhArcaneBrilliance"/>
        <Abil value="MedivhArcaneBrilliance"/>
        <RankArray Item="MedivhArcaneBrillianceItem"/>
        <Active value="1"/>
    </CTalent>
    <CTalent id="MedivhArcaneRiftTheMastersTouch">
        <Face value="MedivhArcaneRiftTheMastersTouch"/>
        <Abil value="MedivhArcaneRift"/>
        <RankArray>
            <BehaviorArray value="MedivhArcaneRiftTheMastersTouchQuestToken"/>
        </RankArray>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftTheMastersTouchQuestIncrementToken"/>
                <Field value="Chance"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftTheMastersTouchQuestResetToken"/>
                <Field value="Chance"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftCooldownReduction"/>
                <Field value="Cost[0].CooldownTimeUse"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftDamage"/>
                <Field value="AmountArray"/>
            </Modifications>
        </AbilityModificationArray>
        <QuestData StackBehavior="MedivhArcaneRiftTheMastersTouchQuestToken" TargetCount="30"/>
    </CTalent>
    <CTalent id="MedivhArcaneRiftManaAdept">
        <Face value="MedivhArcaneRiftManaAdept"/>
        <Abil value="MedivhArcaneRift"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftManaRefund"/>
                <Field value="RechargeVitalRate"/>
                <Value value="30.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhArcaneRiftArcaneCharge">
        <Face value="MedivhArcaneRiftArcaneCharge"/>
        <Abil value="MedivhArcaneRift"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftArcaneChargeMarkerApply"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhArcaneRiftArcaneChargeMarkerRemove"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhArcaneRiftGuardianOfTirisfal">
        <Face value="MedivhArcaneRiftGuardianOfTirisfal"/>
        <Abil value="MedivhArcaneRift"/>
    </CTalent>
    <CTalent id="MedivhForceOfWillArcaneExplosion">
        <Face value="MedivhForceOfWillArcaneExplosion"/>
        <Abil value="MedivhForceOfWill"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhForceOfWillArcaneExplosionSearch"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhForceOfWillArcaneExplosionMarkerApply"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhLeyLineSealMedivhCheats">
        <Face value="MedivhLeyLineSealMedivhCheats"/>
        <Abil value="MedivhLeyLineSeal"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhLeyLineSealMedivhCheatsControllerApply"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhLeyLineSealMedivhCheatsControllerRemove"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhLeyLineSealStasis"/>
                <Field value="Duration"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhPolyBombGlyphOfPolyBomb">
        <Face value="MedivhPolyBombGlyphOfPolyBomb"/>
        <Abil value="MedivhPolyBomb"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhPolyBomb"/>
                <Field value="Duration"/>
                <Value value="-1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPolyBombSpreadSearchArea"/>
                <Field value="AreaArray[0].Radius"/>
                <Value value="0.875000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Actor"/>
                <Entry value="MedivhPolyBombSpreadWarning"/>
                <Field value="Scale"/>
                <Value value="0.250000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPolyBombRefreshSearchArea"/>
                <Field value="AreaArray[0].Radius"/>
                <Value value="0.875000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhPortalMageArmor">
        <Face value="MedivhPortalMageArmor"/>
        <Abil value="MedivhPortal1"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPortalMageArmorApply"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPortalMageArmorMarkerApply"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhPortalStablePortal">
        <Face value="MedivhPortalStablePortal"/>
        <Abil value="MedivhPortal1"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhPortalTimedLife"/>
                <Field value="Duration"/>
                <Value value="3.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhPortalTimedLife"/>
                <Field value="Period"/>
                <Value value="3.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhPortalAIUseLink"/>
                <Field value="Duration"/>
                <Value value="3.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhInvisibility">
        <Face value="MedivhInvisibility"/>
        <Abil value="MedivhInvisibility"/>
        <RankArray Item="MedivhInvisibilityItem"/>
        <Active value="1"/>
    </CTalent>
    <CTalent id="MedivhTransformRavenBirdsEyeView">
        <Face value="MedivhTransformRavenBirdsEyeView"/>
        <Abil value="MedivhTransformRavenBirdsEyeView"/>
        <RankArray Item="MedivhTransformRavenBirdsEyeViewItem"/>
        <Active value="1"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Unit"/>
                <Entry value="HeroMedivhRaven"/>
                <Field value="Sight"/>
                <Value value="2.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhTransformRavenSpottedApplySearch"/>
                <Field value="AreaArray[0].Radius"/>
                <Value value="2.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhPortalRavenFamiliar">
        <Face value="MedivhPortalRavenFamiliar"/>
        <Abil value="MedivhPortal1"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPortalRavenFamiliarMarkerApply"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPortalRavenFamiliarCreateUnit"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhForceOfWillEnduringWill">
        <!-- Changes to Force of Will duration need to also adjust the timing of the periodic call to MedivhForceOfWillStandWorkDummy. -BB -->
        <Face value="MedivhForceOfWillEnduringWill"/>
        <Abil value="MedivhForceOfWill"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhForceOfWill"/>
                <Field value="Duration"/>
                <Value value="0.500000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhForceOfWill"/>
                <Field value="Period"/>
                <Value value="0.500000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhForceOfWillReabsorption">
        <Face value="MedivhForceOfWillReabsorption"/>
        <Abil value="MedivhForceOfWill"/>
    </CTalent>
    <CTalent id="MedivhForceOfWillCircleOfProtection">
        <Face value="MedivhForceOfWillCircleOfProtection"/>
        <Abil value="MedivhForceOfWill"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhForceOfWillCircleOfProtectionSearch"/>
                <Field value="Chance"/>
                <FieldIsInteger value="1"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhPolyBomb">
        <Face value="MedivhPolyBomb"/>
        <Abil value="MedivhPolyBomb"/>
        <RankArray>
            <BehaviorArray value="Ultimate1Unlocked"/>
        </RankArray>
        <Active value="1"/>
    </CTalent>
    <CTalent id="MedivhLeyLineSeal">
        <Face value="MedivhLeyLineSeal"/>
        <Abil value="MedivhLeyLineSeal"/>
        <RankArray>
            <BehaviorArray value="Ultimate2Unlocked"/>
        </RankArray>
        <Active value="1"/>
    </CTalent>
    <CTalent id="MedivhPortalPortalMastery">
        <Face value="MedivhPortalPortalMastery"/>
        <Abil value="MedivhPortal1"/>
        <RankArray>
            <BehaviorArray value="MedivhPortalPortalMasteryCarry"/>
        </RankArray>
    </CTalent>
    <CTalent id="MedivhPortalQuickening">
        <Face value="MedivhPortalQuickening"/>
        <Abil value="MedivhPortal1"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Entry value="MedivhPortalInstant"/>
                <Field value="Cost[0].Cooldown.TimeUse"/>
                <Value value="-10.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Entry value="MedivhPortal2"/>
                <Field value="Cost[0].Cooldown.TimeUse"/>
                <Value value="-10.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPortalCooldown"/>
                <Field value="Cost[0].CooldownTimeUse"/>
                <Value value="-10.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhPortalAstralProjection">
        <Face value="MedivhPortalAstralProjection"/>
        <Abil value="MedivhPortal1"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Entry value="MedivhPortalInstant"/>
                <Field value="Range[0]"/>
                <Value value="8.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Entry value="MedivhPortal1"/>
                <Field value="Range[0]"/>
                <Value value="8.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Entry value="MedivhPortal2"/>
                <Field value="Range[0]"/>
                <Value value="8.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="MedivhPortalDirectionSearch"/>
                <Field value="AreaArray[0].Radius"/>
                <Value value="10.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhTransformRavenRavensIntellect">
        <Face value="MedivhTransformRavenRavensIntellect"/>
        <Abil value="MedivhTransformRaven"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhTransformRaven"/>
                <Field value="Modification.VitalRegenMultiplier[Energy]"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="MedivhDustOfAppearance">
        <Face value="MedivhDustOfAppearance"/>
        <Abil value="MedivhDustOfAppearance"/>
        <RankArray Item="MedivhDustOfAppearanceItem"/>
        <Active value="1"/>
    </CTalent>
    <CTalent id="MedivhTransformRavenWindsOfCelerity">
        <Face value="MedivhTransformRavenWindsOfCelerity"/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="MedivhTransformRaven"/>
                <Field value="Modification.UnifiedMoveSpeedFactor"/>
                <Value value="0.100000"/>
            </Modifications>
        </AbilityModificationArray>
        <Abil value="MedivhTransformRaven"/>
    </CTalent>
    <!--    Medivh Units    -->
    <CUnit id="HeroMedivh" parent="StormHeroMountedCustom">
        <LifeStart value="1470"/>
        <LifeMax value="1470"/>
        <LifeRegenRate value="3.0625"/>
        <Radius value="0.875"/>
        <InnerRadius value="0.875"/>
        <TacticalAIThink value="AIThinkMedivh"/>
        <AIEvalFactor value="1.3"/>
        <AbilArray Link="MedivhForceOfWill"/>
        <AbilArray Link="MedivhTransformRaven"/>
        <AbilArray Link="MedivhTransformRavenFountain"/>
        <AbilArray Link="MedivhTransformRavenLand"/>
        <AbilArray Link="MedivhTransformRavenMorph"/>
        <AbilArray Link="MedivhTransformRavenGuardianMorph"/>
        <AbilArray Link="MedivhPortal1"/>
        <AbilArray Link="MedivhPortal2"/>
        <AbilArray Link="MedivhPortalCancel"/>
        <AbilArray Link="MedivhLeyLineSeal"/>
        <AbilArray Link="MedivhLeyLineSealMedivhCheats"/>
        <AbilArray Link="MedivhPortalInstant"/>
        <AbilArray Link="MedivhPolyBomb"/>
        <AbilArray Link="MedivhArcaneRift"/>
        <CardLayouts index="0">
            <LayoutButtons Face="MedivhPolyBomb" Type="AbilCmd" Row="0" Column="3">
                <AbilCmd value="MedivhPolyBomb,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhLeyLineSealRedirect" Type="AbilCmd" Row="0" Column="3">
                <AbilCmd value="MedivhLeyLineSealMedivhCheats,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhLeyLineSeal" Type="AbilCmd" Row="0" Column="3">
                <AbilCmd value="MedivhLeyLineSeal,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhArcaneRift" Type="AbilCmd" Row="0" Column="0">
                <AbilCmd value="MedivhArcaneRift,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhForceOfWill" Type="AbilCmd" Row="0" Column="1">
                <AbilCmd value="MedivhForceOfWill,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhTransformRavenLand" Type="AbilCmd" Row="0" Column="4">
                <AbilCmd value="MedivhTransformRavenLand,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhTransformRaven" Type="AbilCmd" Row="0" Column="4">
                <AbilCmd value="MedivhTransformRavenFountain,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhTransformRaven" Type="AbilCmd" Row="0" Column="4">
                <AbilCmd value="MedivhTransformRaven,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhPortalCancel" Type="AbilCmd" Row="1" Column="0">
                <AbilCmd value="MedivhPortalCancel,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhRavenForm" Type="Passive" Row="1" Column="0"/>
            <LayoutButtons Face="MedivhPortal" Type="AbilCmd" Row="0" Column="2">
                <AbilCmd value="MedivhPortal2,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhPortal" Type="AbilCmd" Row="0" Column="2">
                <AbilCmd value="MedivhPortal1,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhPortal" Type="AbilCmd" Row="0" Column="2">
                <AbilCmd value="MedivhPortalInstant,Execute" index="0"/>
            </LayoutButtons>
        </CardLayouts>
        <BehaviorArray Link="ExcellentMana"/>
        <BehaviorArray Link="MedivhTransformRavenPathableController"/>
        <BehaviorArray Link="MedivhTransformRavenAbilityDisableController"/>
        <WeaponArray Link="MedivhHeroWeapon"/>
        <InitializerFunction value="libHMDV_gf_HeroMedivhIncrementHeroCountFunction"/>
        <DestructionFunction value="libHMDV_gf_HeroMedivhDecrementHeroCountFunction"/>
        <EffectArray index="Death" value="MedivhArcaneRiftTheMastersTouchQuestResetToken"/>
        <AIThinkTree value="AI/Medivh.aitree"/>
    </CUnit>
    <CUnit id="HeroMedivhRaven" parent="HeroMedivh">
        <Name value="Unit/Name/HeroMedivhRaven"/>
        <FlagArray index="Uncloakable" value="1"/>
        <FlagArray index="UseLineOfSight" value="0"/>
        <FlagArray index="Invulnerable" value="1"/>
        <FlagArray index="Unstoppable" value="1"/>
        <PlaneArray index="Ground" value="0"/>
        <PlaneArray index="Air" value="1"/>
        <Collide index="Ground" value="0"/>
        <Collide index="ForceField" value="0"/>
        <Collide index="Pushable" value="0"/>
        <Collide index="BirdPerson" value="1"/>
        <Attributes index="ImmuneToAOE" value="1"/>
        <Attributes index="NoMinionAggro" value="1"/>
        <Attributes index="ImmuneToSkillshots" value="1"/>
        <Attributes index="ImmuneToFriendlyAbilities" value="1"/>
        <Mover value="MedivhTransformRaven"/>
        <Height value="5"/>
        <VisionHeight value="4"/>
        <WeaponArray index="0" removed="1"/>
        <Sight value="7"/>
        <InitializerFunction value=""/>
        <DestructionFunction value=""/>
    </CUnit>
    <CUnit id="MedivhWeaponProjectile" parent="MISSILE_INVULNERABLE">
        <Mover value="HeroMissileSpeed25"/>
    </CUnit>
    <CUnit id="MedivhPortal" parent="StormSummonFigment">
        <FlagArray index="Turnable" value="0"/>
        <FlagArray index="Unclickable" value="0"/>
        <FlagArray index="Unhighlightable" value="0"/>
        <FlagArray index="AIForceTactical" value="1"/>
        <PlaneArray index="Ground" value="1"/>
        <Collide index="Structure" value="1"/>
        <Sight value="3"/>
        <AbilArray Link="stop"/>
        <BehaviorArray Link="MedivhPortalTimedLife"/>
        <BehaviorArray Link="UnitCanBeSmartCommandInteracted"/>
        <BehaviorArray Link="MedivhPortalAIUseLink"/>
        <SeparationRadius value="0"/>
        <InnerRadius value="0.5"/>
        <MinimapRadius value="0.75"/>
        <KillDisplay value="Never"/>
        <OverlapIndex value="Minion"/>
        <Radius value="0.125"/>
        <TargetingHitTestPriority value="11"/>
    </CUnit>
    <CUnit id="MedivhPortalPlacementMarker" parent="MedivhPortal">
        <Name value="Unit/Name/MedivhPortalPlacementMarker"/>
        <Mover value="Fly"/>
        <BehaviorArray index="0" Link="MedivhPortalMarkerCarry"/>
        <BehaviorArray index="1" removed="1"/>
        <BehaviorArray index="2" removed="1"/>
        <CardLayouts>
            <LayoutButtons Face="Stop" Type="AbilCmd" Row="2" Column="1">
                <AbilCmd value="stop,Stop" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="MedivhPortal" Type="AbilCmd" Row="0" Column="2">
                <AbilCmd value="MedivhPortal2,Execute" index="0"/>
            </LayoutButtons>
        </CardLayouts>
        <Sight value="0"/>
        <TargetingHitTestPriority value="0"/>
        <MinimapRadius value="0"/>
        <AbilArray index="0" Link="MedivhPortal2"/>
        <AbilArray Link="BuildInProgress"/>
        <AbilArray Link="stop"/>
    </CUnit>
    <CUnit id="MedivhPortalCreation" parent="MedivhPortal">
        <Name value="Unit/Name/MedivhPortalCreation"/>
        <FlagArray index="Unselectable" value="1"/>
        <Mover value="Fly"/>
        <Sight value="0"/>
        <BehaviorArray index="0" Link="MedivhPortalCreationTimedLife"/>
        <BehaviorArray index="1" removed="1"/>
        <BehaviorArray index="2" removed="1"/>
        <CardLayouts>
            <LayoutButtons Face="Stop" Type="AbilCmd" Row="2" Column="1">
                <AbilCmd value="stop,Stop" index="0"/>
            </LayoutButtons>
        </CardLayouts>
        <TargetingHitTestPriority value="0"/>
        <MinimapRadius value="0"/>
    </CUnit>
    <CUnit id="MedivhDustOfAppearanceItem" parent="ITEM">
        <Item value="MedivhDustOfAppearance"/>
    </CUnit>
    <CUnit id="MedivhTransformRavenBirdsEyeViewItem" parent="ITEM">
        <Item value="MedivhTransformRavenBirdsEyeView"/>
    </CUnit>
    <CUnit id="MedivhInvisibilityItem" parent="ITEM">
        <Item value="MedivhInvisibility"/>
    </CUnit>
    <CUnit id="MedivhArcaneBrillianceItem" parent="ITEM">
        <Item value="MedivhArcaneBrilliance"/>
    </CUnit>
    <CUnit id="MedivhLeyLineSealMissile" parent="MISSILE_INVULNERABLE"/>
    <CUnit id="MedivhArcaneRiftMissile" parent="MISSILE_INVULNERABLE"/>
    <CUnit id="MedivhPortalRavenFamiliar" parent="StormSummonFigment">
        <FlagArray index="Unselectable" value="1"/>
        <FlagArray index="Untargetable" value="1"/>
        <Mover value="Fly"/>
        <Acceleration value="12"/>
        <Deceleration value="12"/>
        <StationaryTurningRate value="1440"/>
        <TurningRate value="1440"/>
        <Height value="3.5"/>
        <BehaviorArray Link="UnitNotPuntableByRepulserField"/>
        <PlaneArray index="Air" value="1"/>
    </CUnit>
    <CValidatorCombine id="CasterIsNotProtectedCombine">
        <CombineArray value="MedivhCasterHasForceOfWill"/>
        <Negate value="1"/>
    </CValidatorCombine>
    <CValidatorUnitType id="CasterNotMedivhRaven">
        <WhichUnit Value="Caster"/>
        <Value value="HeroMedivhRaven"/>
        <Find value="0"/>
    </CValidatorUnitType>
    <CValidatorCombine id="CasterNotPolymorphedCombine">
        <CombineArray value="MedivhCasterHasNoPolyBomb"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasNoPolyBomb">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhPolyBomb"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasRavenPathableController">
        <WhichUnit Value="Caster"/>
        <Compare value="GT"/>
        <Behavior value="MedivhTransformRavenPathableController"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorCombine id="MedivhCasterNotRavenOrHasPathableController">
        <CombineArray value="MedivhCasterHasRavenPathableController"/>
        <CombineArray value="CasterNotMedivhRaven"/>
    </CValidatorCombine>
    <CValidatorPlayerTalent id="MedivhHasArcaneBrillianceTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhArcaneBrilliance"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasArcaneRiftTheMastersTouchTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhArcaneRiftTheMastersTouch"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasArcaneRiftManaAdeptTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhArcaneRiftManaAdept"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasArcaneRiftArcaneChargeTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhArcaneRiftArcaneCharge"/>
    </CValidatorPlayerTalent>
    <CValidatorCombine id="MedivhHasArcaneRiftGuardianOfTirisfalAndTargetIsMinion">
        <Type value="And"/>
        <CombineArray value="MedivhHasArcaneRiftGuardianOfTirisfalTalent"/>
        <CombineArray value="TargetMinion"/>
        <CombineArray value="TargetNotMerc"/>
        <CombineArray value="TargetIsNotAMonsterMajor"/>
        <CombineArray value="TargetIsNotAMonster"/>
    </CValidatorCombine>
    <CValidatorPlayerTalent id="MedivhHasArcaneRiftGuardianOfTirisfalTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhArcaneRiftGuardianOfTirisfal"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasForceOfWillArcaneExplosionTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhForceOfWillArcaneExplosion"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasTheMastersTouch">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhArcaneRiftTheMastersTouch"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasLeyLineSealMedivhCheatsTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhLeyLineSealMedivhCheats"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasPolyBombGlyphOfPolyBombTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhPolyBombGlyphOfPolyBomb"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasPortalMageArmorTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhPortalMageArmor"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasPortalStablePortalTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhPortalStablePortal"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasTransformRavenBirdsEyeViewTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhTransformRavenBirdsEyeView"/>
    </CValidatorPlayerTalent>
    <CValidatorUnitCompareBehaviorCount id="MedivhPortalNoBeamPreventionDummy">
        <WhichUnit Effect="MedivhPortalDirectionPersistent"/>
        <Behavior value="MedivhPortalBeamPreventionDummy"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorPlayerTalent id="MedivhHasPortalRavenFamiliarTalent">
        <Find value="1"/>
        <Value value="MedivhPortalRavenFamiliar"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasForceOfWillEnduringWillTalent">
        <Find value="1"/>
        <Value value="MedivhForceOfWillEnduringWill"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasForceOfWillReabsorptionTalent">
        <Find value="1"/>
        <Value value="MedivhForceOfWillReabsorption"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasMedivhForceOfWillCircleOfProtectionTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhForceOfWillCircleOfProtection"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasPortalPortalMasteryTalent">
        <Find value="1"/>
        <Value value="MedivhPortalPortalMastery"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasPortalQuickeningTalent">
        <Find value="1"/>
        <Value value="MedivhPortalQuickening"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasPortalAstralProjectionTalent">
        <Find value="1"/>
        <Value value="MedivhPortalAstralProjection"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasTransformRavenRavensIntellectTalent">
        <Find value="1"/>
        <Value value="MedivhTransformRavenRavensIntellect"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasTransformRavenDustOfAppearanceTalent">
        <Find value="1"/>
        <Value value="MedivhDustOfAppearance"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="MedivhHasTransformRavenWindsOfCelerityTalent">
        <Find value="1"/>
        <Value value="MedivhTransformRavenWindsOfCelerity"/>
    </CValidatorPlayerTalent>
    <CValidatorUnitCompareBehaviorCount id="MedivhSourceHasNoPolybomb">
        <WhichUnit Value="Source"/>
        <Behavior value="MedivhPolyBomb"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasPolyBomb">
        <Compare value="GT"/>
        <Behavior value="MedivhPolyBomb"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasNoPolyBomb">
        <Behavior value="MedivhPolyBomb"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasNoTransformRavenSpottedBehavior">
        <Behavior value="MedivhTransformRavenSpotted"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasTransformRavenSpottedBehavior">
        <Value value="1"/>
        <Behavior value="MedivhTransformRavenSpotted"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasTransformRaven">
        <WhichUnit Value="Caster"/>
        <Compare value="GT"/>
        <Behavior value="MedivhTransformRaven"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasNoTransformRavenPending">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRavenPending"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorCombine id="MedivhSourceAndTargetHasNoPolyBomb">
        <CombineArray value="MedivhSourceHasNoPolybomb"/>
        <CombineArray value="MedivhTargetHasNoPolyBomb"/>
    </CValidatorCombine>
    <CValidatorCombine id="TargetNotImmuneToFriendlyAbilitiesOrIsSpecialCase">
        <CombineArray value="MedivhIsSpecialCaseAndSelf"/>
    </CValidatorCombine>
    <CValidatorCombine id="MedivhIsSpecialCaseAndSelf">
        <Type value="And"/>
        <CombineArray value="MedivhTargetIsMedivhTransformRaven"/>
        <CombineArray value="IsSelf"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetNotMedivhTransformRaven">
        <Behavior value="MedivhTransformRaven"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetIsMedivhTransformRaven">
        <Value value="1"/>
        <Behavior value="MedivhTransformRaven"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitType id="MedivhTargetIsMedivh">
        <Value value="HeroMedivh"/>
    </CValidatorUnitType>
    <CValidatorCombine id="MedivhSourceIsMedivhCombine">
        <CombineArray value="MedivhSourceIsMedivh"/>
        <CombineArray value="MedivhSourceIsMedivhRaven"/>
    </CValidatorCombine>
    <CValidatorUnitType id="MedivhSourceIsMedivh">
        <Value value="HeroMedivh"/>
    </CValidatorUnitType>
    <CValidatorUnitType id="MedivhSourceIsMedivhRaven">
        <Value value="HeroMedivhRaven"/>
    </CValidatorUnitType>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasMedivhTransformRavenPending">
        <Value value="1"/>
        <Behavior value="MedivhTransformRavenPending"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitType id="MedivhTargetIsMedivhRaven">
        <Value value="HeroMedivhRaven"/>
    </CValidatorUnitType>
    <CValidatorCombine id="MedivhTargetIsMedivhOrMedivhRavenCombine">
        <CombineArray value="MedivhTargetIsMedivh"/>
        <CombineArray value="MedivhTargetIsMedivhRaven"/>
    </CValidatorCombine>
    <CValidatorUnitType id="MedivhTargetIsMarkerPortal">
        <Value value="MedivhPortalPlacementMarker"/>
    </CValidatorUnitType>
    <CValidatorUnitType id="MedivhTargetIsLeyLineSealMissile">
        <Value value="MedivhLeyLineSealMissile"/>
    </CValidatorUnitType>
    <CValidatorCombine id="MedivhPortalSmartCommandCombine">
        <Type value="And"/>
        <CombineArray value="MedivhTargetIsMedivhPortal"/>
        <CombineArray value="TargetIsNotEnemy"/>
        <CombineArray value="SgtHammerHasNoSiegeModeOrHasHoverMode"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasNoPortalTeleportCooldown">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhPortalTeleportSickness"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetNotInLeyLineSealStasis">
        <Behavior value="MedivhLeyLineSealStasis"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasNoPortalEnterBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhPortalEnter"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasPortalMarkerCarryBehavior">
        <WhichUnit Value="Caster"/>
        <Value value="1"/>
        <Behavior value="MedivhPortalMarkerCarry"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasForceOfWillCasterBehavior">
        <WhichUnit Value="Caster"/>
        <Value value="1"/>
        <Behavior value="MedivhForceOfWillCaster"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasForceOfWillTargetBehavior">
        <Value value="1"/>
        <Behavior value="MedivhForceOfWillTarget"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasNoPortalRavenFamiliarMarkerBehavior">
        <Behavior value="MedivhPortalRavenFamiliarMarker"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasPortalRavenFamiliarOwnerBehavior">
        <Value value="1"/>
        <Behavior value="MedivhPortalRavenFamiliarOwner"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorCombine id="MedivhPortalRavenFamiliarCombine">
        <CombineArray value="CasterNotDead"/>
        <CombineArray value="MedivhTargetHasPortalRavenFamiliarOwnerBehavior"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="MedivhSourceHasForceOfWillTargetBehavior">
        <WhichUnit Value="Source"/>
        <Value value="1"/>
        <Behavior value="MedivhForceOfWillTarget"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhSourceHasNoForceOfWillArcaneExplosionMarkerBehavior">
        <WhichUnit Value="Source"/>
        <Behavior value="MedivhForceOfWillArcaneExplosionMarker"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitType id="MedivhTargetIsMedivhPortal">
        <Value value="MedivhPortal"/>
    </CValidatorUnitType>
    <CValidatorUnitType id="MedivhTargetIsMedivhCreationPortal">
        <!-- used for portal birth beam -->
        <Value value="MedivhPortalCreation"/>
    </CValidatorUnitType>
    <CValidatorLocationEnumArea id="MedivhPortalRealUnitWithinMaxMarkerUnitRange">
        <ResultFailed value="CantLandLocationInvalid"/>
        <AreaArray Validator="MedivhTargetIsMarkerPortal">
            <Radius value="16"/>
        </AreaArray>
        <SearchFilters value="-;Ally,Neutral,Enemy,Creep,Missile,Item,Dead,Hallucination"/>
    </CValidatorLocationEnumArea>
    <CValidatorLocationEnumArea id="MedivhPortalAstralProjectionRealUnitWithinMaxMarkerUnitRange">
        <ResultFailed value="CantLandLocationInvalid"/>
        <AreaArray Validator="MedivhTargetIsMarkerPortal">
            <Radius value="24"/>
        </AreaArray>
        <SearchFilters value="-;Ally,Neutral,Enemy,Creep,Missile,Item,Dead,Hallucination"/>
    </CValidatorLocationEnumArea>
    <CValidatorLocationEnumArea id="MedivhPortalRealUnitNotWithinRangeOfMarkerUnit">
        <ResultFailed value="CantLandLocationInvalid"/>
        <AreaArray Validator="MedivhTargetIsMarkerPortal">
            <Radius value="7.5"/>
        </AreaArray>
        <Compare value="Eq"/>
        <SearchFilters value="-;Ally,Neutral,Enemy,Creep,Missile,Item,Dead,Hallucination"/>
    </CValidatorLocationEnumArea>
    <CValidatorLocationCompareRange id="MedivhTargetIsNearRaven">
        <Compare value="LE"/>
        <Range value="6.425"/>
    </CValidatorLocationCompareRange>
    <CValidatorLocationCompareRange id="MedivhTargetIsNearRavenWithBirdsEyeView">
        <Compare value="LE"/>
        <Range value="8.425"/>
    </CValidatorLocationCompareRange>
    <CValidatorCombine id="MedivhTargetIsNearRavenAndRavenHasBirdsEyeView">
        <Type value="And"/>
        <CombineArray value="MedivhTargetIsNearRavenWithBirdsEyeView"/>
        <CombineArray value="MedivhCasterHasTransformRavenBirdsEyeViewTalent"/>
    </CValidatorCombine>
    <CValidatorCombine id="MedivhTargetIsNearRavenOrNearRavenWithBirdsEyeView">
        <CombineArray value="MedivhTargetIsNearRaven"/>
        <CombineArray value="MedivhTargetIsNearRavenAndRavenHasBirdsEyeView"/>
    </CValidatorCombine>
    <CValidatorPlayerTalent id="MedivhCasterHasTransformRavenBirdsEyeViewTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="MedivhTransformRavenBirdsEyeView"/>
    </CValidatorPlayerTalent>
    <CValidatorCombine id="TargetIsPolymorphedCombine">
        <CombineArray value="MedivhTargetHasPolyBomb"/>
    </CValidatorCombine>
    <CValidatorCombine id="MedivhEnterPortalValidatorCombine">
        <CombineArray value="CasterNotDead"/>
        <CombineArray value="CasterNotStunned"/>
        <CombineArray value="CasterNotInStasis"/>
        <CombineArray value="UserCategoryCasterNotSleeping"/>
        <CombineArray value="CasterIsStationary"/>
        <CombineArray value="UserCategoryCasterNotPushPull"/>
        <CombineArray value="UserCategoryCasterNotRooted"/>
        <Type value="And"/>
    </CValidatorCombine>
    <CValidatorCombine id="MedivhPortalNotWithinMinAndWithinMaxOrHasPortalAstralProjectionAndNotWithinMinAndWithinMax">
        <CombineArray value="MedivhPortalNotWithinMinAndWithinMax"/>
        <CombineArray value="MedivhHasPortalAstralProjectionAndNotWithinMinAndWithinPortalAstralProjectionMax"/>
    </CValidatorCombine>
    <CValidatorCombine id="MedivhPortalNotWithinMinAndWithinMax">
        <Type value="And"/>
        <CombineArray value="MedivhPortalRealUnitNotWithinRangeOfMarkerUnit"/>
        <CombineArray value="MedivhPortalRealUnitWithinMaxMarkerUnitRange"/>
    </CValidatorCombine>
    <CValidatorCombine id="MedivhHasPortalAstralProjectionAndNotWithinMinAndWithinPortalAstralProjectionMax">
        <Type value="And"/>
        <CombineArray value="MedivhHasPortalAstralProjectionTalent"/>
        <CombineArray value="MedivhPortalRealUnitNotWithinRangeOfMarkerUnit"/>
        <CombineArray value="MedivhPortalAstralProjectionRealUnitWithinMaxMarkerUnitRange"/>
    </CValidatorCombine>
    <CValidatorUnitFilters id="MedivhPortalRavenFamiliarTargetNotInvulnerable">
        <WhichUnit Effect="MedivhPortalRavenFamiliarLaunchMissile"/>
        <Filters value="-;Invulnerable"/>
    </CValidatorUnitFilters>
    <CValidatorCombine id="MedivhDustOfAppearenceRemoveRevealCombine">
        <Type value="And"/>
        <CombineArray value="TargetDoesNotHaveInCargo"/>
        <CombineArray value="MedicMedivacDropshipHasFinalDepartureDelayNegate"/>
    </CValidatorCombine>
    <CValidatorCombine id="AbilButtonAttentionEMana">
        <CombineArray value="MedivhCasterHasPortalMarkerCarryBehavior"/>
    </CValidatorCombine>
    <CValidatorCombine id="AbilButtonAttentionQDamage">
        <CombineArray value="MedivhHasArcaneRiftArcaneChargeMarker"/>
    </CValidatorCombine>
    <CValidatorUnitCompareDamageTakenTime id="MedivhTargetNotInCombat5Sec">
        <Compare value="GE"/>
        <Value value="5"/>
    </CValidatorUnitCompareDamageTakenTime>
    <CValidatorCombine id="HeroSpecificMapMechanicPickupDisallowedBehaviors">
        <CombineArray value="MedivhTargetNotMedivhTransformRaven"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasNoTransformRaven">
        <WhichUnit Value="Caster"/>
        <Behavior value="MedivhTransformRaven"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhSourceHasNoArcaneRiftHeroHitBehavior">
        <WhichUnit Value="Source"/>
        <Behavior value="MedivhArcaneRiftHeroHit"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhSourceHasArcaneRiftHeroHitBehavior">
        <WhichUnit Value="Source"/>
        <Value value="1"/>
        <Behavior value="MedivhArcaneRiftHeroHit"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhHasArcaneRiftArcaneChargeMarker">
        <WhichUnit Value="Caster"/>
        <Value value="1"/>
        <Behavior value="MedivhArcaneRiftArcaneChargeMarker"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhTargetHasNoPortalMageArmorMarker">
        <Behavior value="MedivhPortalMageArmorMarker"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhHasNoArcaneRiftTheMastersTouchQuestComplete">
        <WhichUnit Value="Caster"/>
        <Value value="30"/>
        <Behavior value="MedivhArcaneRiftTheMastersTouchQuestToken"/>
        <Compare value="LT"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhHasArcaneRiftTheMastersTouchQuestComplete">
        <WhichUnit Value="Caster"/>
        <Value value="30"/>
        <Behavior value="MedivhArcaneRiftTheMastersTouchQuestToken"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorCombine id="MedivhHasTheMastersTouchQuestCompleteAndTheMastersTouchTalent">
        <Type value="And"/>
        <CombineArray value="MedivhHasArcaneRiftTheMastersTouchQuestComplete"/>
        <CombineArray value="MedivhHasArcaneRiftTheMastersTouchTalent"/>
    </CValidatorCombine>
    <CValidatorCombine id="MedivhHasNoTheMastersTouchQuestCompleteAndTheMastersTouchTalent">
        <Type value="And"/>
        <CombineArray value="MedivhHasNoArcaneRiftTheMastersTouchQuestComplete"/>
        <CombineArray value="MedivhHasArcaneRiftTheMastersTouchTalent"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="MedivhPortalHasNoBirthBeamPreventionBehavior">
        <WhichUnit Effect="MedivhPortalBirthBeamPersistent"/>
        <Behavior value="MedivhPortalBirthBeamPreventionBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="MedivhCasterHasForceOfWill">
        <!-- Used to create the Protected frame in the UnitStatus.StormLayout file -->
        <WhichUnit Value="Caster"/>
        <Value value="1"/>
        <Behavior value="MedivhForceOfWill"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorCombine id="CasterIsProtectedCombine">
        <CombineArray value="MedivhCasterHasForceOfWill"/>
    </CValidatorCombine>
    <CValidatorUnitCompareTokenCount id="MedivhHasArcaneRiftTheMastersTouchComplete">
        <WhichUnit Value="Caster"/>
        <Value value="30"/>
        <TokenId value="MedivhArcaneRiftTheMastersTouchQuestToken"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="MedivhDoesNotHaveArcaneRiftTheMastersTouchComplete">
        <WhichUnit Value="Caster"/>
        <Compare value="LT"/>
        <Value value="30"/>
        <TokenId value="MedivhArcaneRiftTheMastersTouchQuestToken"/>
    </CValidatorUnitCompareTokenCount>
    <!--    Medivh Weapons    -->
    <CWeaponLegacy id="MedivhHeroWeapon" parent="StormHeroMediumWeapon">
        <Icon value="Assets\Textures\storm_temp_war3_btnstaffofnegation.dds"/>
        <DisplayEffect value="MedivhWeaponDamage"/>
        <MinScanRange value="5.5"/>
        <Range value="5.5"/>
        <Period value="0.9"/>
        <Effect value="MedivhWeaponLaunchMissileSet"/>
    </CWeaponLegacy>
</Catalog>

