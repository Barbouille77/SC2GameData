<?xml version="1.0" encoding="us-ascii"?>
<tree>
	<include file="AI/HeroBase.aitree"/>
	<!-- Escort -->
	<mod id="293A07263D585353">
		<insertChild id="2206053900176148" before=""/><!-- Attempt Place Turret -->
	</mod>
	<!-- PaceOrSomething -->
	<mod id="3D30604E694E4441">
		<insertChild id="44001E180A190728" before=""/><!-- AttemptDismount -->
	</mod>
	<!-- Fight Logic -->
	<mod id="4EF233B78C652C53">
		<insertChild id="438FDC3E0CFE260B" after="C22B543012BE7CBB"/><!-- Turret Usable -->
	</mod>
	<!-- Beacon -->
	<mod id="505301123122302F">
		<insertChild id="1388C8710717C0B6" after="3F3E1A201750564A"/><!-- Turret Usable -->
	</mod>
	<!-- Escort Unit Position -->
	<mod id="5A5E546126002001">
		<property name="EstimateFutureSeconds" valueSource="literal" value="1.5"/>
	</mod>
	<!-- HeroRoot -->
	<mod id="746F6F526F726548">
		<insertChild id="3D2306261D607C5C" before=""/><!-- UnitHasHealingPulse -->
		<insertChild id="2D033226687A6655" after="3D2306261D607C5C"/><!-- UnitHasDragonSpirits -->
		<insertChild id="B76878F29DB6CFBF" after="2D033226687A6655"/><!-- Get Nearby Items -->
	</mod>
	<node name="DragonSpirits" type="Ability" id="70536E1C1308002D">
		<property name="Ability" valueSource="literal" value="MapMechanicAbilityInstant"/>
	</node>
	<node name="HealingPulse" type="Ability" id="50676E690912093D">
		<property name="Ability" valueSource="literal" value="MapMechanicAbilityInstant"/>
	</node>
	<node name="Place Turret on Payload" type="Ability" id="721831112A150922" comment="Place turret onto the payload.">
		<property name="Ability" valueSource="literal" value="MapMechanicAbilityTarget"/>
		<property name="TargetUnit" valueSource="variable" value="Target"/>
	</node>
	<node name="Has Turret" type="UnitHasBehavior" id="3107283C111B1C4D">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="MapMechanicStack"/>
	</node>
	<node name="Attempt Place Turret" type="And" id="2206053900176148">
		<insertChild id="3107283C111B1C4D"/><!-- Has Turret -->
		<insertChild id="721831112A150922"/><!-- Place Turret on Payload -->
	</node>
	<node name="UnitHasDragonSpirits" type="UnitHasBehavior" id="2D033226687A6655">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="HasMapMechanicInstantAbility2"/>
		<insertChild id="70536E1C1308002D"/><!-- DragonSpirits -->
	</node>
	<node name="UnitHasHealingPulse" type="UnitHasBehavior" id="3D2306261D607C5C">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="HasMapMechanicInstantAbility1"/>
		<insertChild id="1B5B2E20E856DBE0"/><!--  -->
	</node>
	<node name="AttemptDismount" type="AbilityCategory" id="44001E180A190728">
		<property name="AbilityCategories" valueSource="literal" value="Dismount"/>
		<property name="TargetUnit" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="" type="And" id="1B5B2E20E856DBE0">
		<insertChild id="64660A6D71068ADB"/><!--  -->
		<insertChild id="50676E690912093D"/><!-- HealingPulse -->
	</node>
	<node name="Self Low HP" type="Health" id="E368E937010412D8">
		<property name="Health" valueSource="literal" value="0.3"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="" type="Or" id="64660A6D71068ADB">
		<insertChild id="E368E937010412D8"/><!-- Self Low HP -->
		<insertChild id="2465709DBDA29B6E"/><!-- 1 Critical Ally -->
		<insertChild id="65CAF3F6CEFDF107"/><!-- 2 Low Allies -->
		<insertChild id="8AFCDC4BB195D1DA"/><!--  -->
		<insertChild id="E902E7B2A8A133E4"/><!--  -->
	</node>
	<node name="1 Critical Ally" type="UnitCount" id="2465709DBDA29B6E">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="4.5"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.3"/>
	</node>
	<node name="2 Low Allies" type="UnitCount" id="65CAF3F6CEFDF107">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="4.5"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.5"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="" type="And" id="8AFCDC4BB195D1DA">
		<insertChild id="2968623BF3B63F81"/><!-- 2 Allies -->
		<insertChild id="4121F3437F5396BC"/><!-- 2 Enemies -->
	</node>
	<node name="2 Allies" type="UnitCount" id="2968623BF3B63F81">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="4.5"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.8"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="2 Enemies" type="UnitCount" id="4121F3437F5396BC">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="literal" value="12"/>
		<property name="MaxLifeFraction" valueSource="literal" value="1"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="Turret Usable" type="AbilityUsable" id="438FDC3E0CFE260B">
		<property name="Ability" valueSource="literal" value="MapMechanicAbilityTarget"/>
		<insertChild id="EEEEEEB561C85961"/><!--  -->
	</node>
	<node name="" type="And" id="EEEEEEB561C85961">
		<insertChild id="FA237E74CF6F3CE7"/><!--  -->
		<insertChild id="6C82CF96D143FCCF"/><!-- Use Turret -->
	</node>
	<node name="3 Enemy Heroes" type="UnitCount" id="6EE11D6348BF77DD">
		<property name="TargetCount" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="literal" value="12"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
	</node>
	<node name="" type="Or" id="FA237E74CF6F3CE7">
		<insertChild id="6EE11D6348BF77DD"/><!-- 3 Enemy Heroes -->
		<insertChild id="B65896C94E163388"/><!--  -->
	</node>
	<node name="Big Enemy Wave" type="UnitCount" id="F6F2EC5D0EE46677">
		<property name="TargetCount" valueSource="literal" value="12"/>
		<property name="MaxTargetDistance" valueSource="literal" value="12"/>
		<property name="TargetTypes" valueSource="literal" value="Minion,Merc,Heroic,Summoned"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
	</node>
	<node name="" type="And" id="B65896C94E163388">
		<insertChild id="F6F2EC5D0EE46677"/><!-- Big Enemy Wave -->
		<insertChild id="56FBF9B587E85BB0"/><!-- No Ally Heroes -->
	</node>
	<node name="No Ally Heroes" type="UnitCount" id="56FBF9B587E85BB0">
		<property name="TargetCount" valueSource="literal" value="0"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
	</node>
	<node name="Use Turret" type="Ability" id="6C82CF96D143FCCF">
		<property name="TargetPoint" valueSource="intrinsic" value="SelfPos"/>
		<property name="Ability" valueSource="literal" value="MapMechanicAbilityTarget"/>
	</node>
	<node name="Turret Usable" type="AbilityUsable" id="1388C8710717C0B6">
		<property name="Ability" valueSource="literal" value="MapMechanicAbilityTarget"/>
		<insertChild id="D28B2EF37710EB22"/><!-- 2 Enemy Heroes -->
	</node>
	<node name="2 Enemy Heroes" type="UnitCount" id="D28B2EF37710EB22">
		<property name="TargetCount" valueSource="literal" value="2"/>
		<property name="MaxTargetDistance" valueSource="literal" value="12"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<insertChild id="2EEACCB3A440EA57"/><!-- Use Turret -->
	</node>
	<node name="Use Turret" type="Ability" id="2EEACCB3A440EA57">
		<property name="TargetPoint" valueSource="intrinsic" value="SelfPos"/>
		<property name="Ability" valueSource="literal" value="MapMechanicAbilityTarget"/>
	</node>
	<node name="" type="Or" id="E902E7B2A8A133E4">
		<insertChild id="F9FFC8F72A1A0571"/><!-- Self Low HP -->
		<insertChild id="CD4C7C3AC00A2E8D"/><!-- 1 Critical Ally -->
		<insertChild id="0359B0A8B80A7FF3"/><!-- 2 Low Allies -->
		<insertChild id="3FB9A6D44603DB39"/><!--  -->
	</node>
	<node name="Self Low HP" type="Health" id="F9FFC8F72A1A0571">
		<property name="Health" valueSource="literal" value="0.3"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="1 Critical Ally" type="UnitCount" id="CD4C7C3AC00A2E8D">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="4.5"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.3"/>
	</node>
	<node name="2 Low Allies" type="UnitCount" id="0359B0A8B80A7FF3">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="4.5"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.5"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="" type="And" id="3FB9A6D44603DB39">
		<insertChild id="473970BA1950F3CA"/><!-- 2 Allies -->
		<insertChild id="9527EA22766C3937"/><!-- 2 Enemies -->
	</node>
	<node name="2 Allies" type="UnitCount" id="473970BA1950F3CA">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="4.5"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.8"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="2 Enemies" type="UnitCount" id="9527EA22766C3937">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="literal" value="12"/>
		<property name="MaxLifeFraction" valueSource="literal" value="1"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="Get Nearby Pickups" type="IfElse" id="5A5F1FCFBB4BE917">
		<insertChild id="99925432CBDDBF6B"/><!-- NearInteractUnit -->
		<insertChild id="44A88267E919E2BF"/><!-- In Range -->
		<insertChild id="13AA222494688516"/><!-- Out of Range -->
	</node>
	<node name="NearInteractUnit" type="UnitToUnitDistance" id="99925432CBDDBF6B">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="UnitTarget" valueSource="variable" value="PickupTarget"/>
		<property name="MinRange" valueSource="literal" value="0"/>
		<property name="MaxRange" valueSource="literal" value="4"/>
	</node>
	<node name="In Range" type="Select" id="44A88267E919E2BF">
		<insertChild id="C8C40B9F8F046AB6"/><!-- UseCaptureMacGuffin -->
	</node>
	<node name="Find Fight Target" type="FindBestTarget" id="0B464C93593D8523">
		<property name="TargetTypes" valueSource="literal" value="Creep,Minion,Heroic,Summoned,AITargetableStructure"/>
		<property name="SearchCenter" valueSource="intrinsic" value="SelfPos"/>
		<property name="MaxTargetDistance" valueSource="literal" value="6"/>
		<property name="AddSelfRadiusToMaxTargetDistance" valueSource="literal" value="false"/>
		<property name="DistanceFactor" valueSource="literal" value="1"/>
		<property name="OutputTarget" value="FightTarget"/>
		<insertChild id="F9E5479621E983E2"/><!-- Fight Target -->
	</node>
	<node name="Fight Target" type="HeroFight" id="F9E5479621E983E2">
		<property name="Target" valueSource="variable" value="FightTarget"/>
		<property name="AttackRangeFactor" valueSource="literal" value="0.7"/>
	</node>
	<node name="UseCaptureMacGuffin" type="Ability" id="C8C40B9F8F046AB6">
		<property name="Ability" valueSource="literal" value="CaptureMacGuffin"/>
		<property name="TargetUnit" valueSource="variable" value="PickupTarget"/>
	</node>
	<node name="Out of Range" type="Select" id="13AA222494688516" comment="Move towards the Interact target point">
		<variable name="FightTarget" type="Unit"/>
		<insertChild id="0B464C93593D8523"/><!-- Find Fight Target -->
		<insertChild id="A8E95176C4151B95"/><!-- Move to Pickup -->
	</node>
	<node name="Get Nearby Items" type="And" id="B76878F29DB6CFBF">
		<variable name="PickupTarget" type="Unit"/>
		<insertChild id="55B0B8578610A0E4"/><!--  -->
		<insertChild id="5A5F1FCFBB4BE917"/><!-- Get Nearby Pickups -->
	</node>
	<node name="" type="Or" id="7261CFED4B071A26">
		<insertChild id="6BFDC279D8388EE2"/><!-- Healing Pulse -->
		<insertChild id="57BA9FB99B1ABA6D"/><!-- Dragon Spirits -->
		<insertChild id="527DAC7F188BECF9"/><!-- Turret -->
	</node>
	<node name="Healing Pulse" type="FindBestTarget" id="6BFDC279D8388EE2">
		<property name="OutputTarget" value="PickupTarget"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="TargetTypes" valueSource="literal" value=""/>
		<property name="ExcludeTypes" valueSource="literal" value=""/>
		<property name="UnitType" valueSource="literal" value="HealingPulsePickup"/>
		<property name="SearchCenter" valueSource="intrinsic" value="SelfPos"/>
	</node>
	<node name="Dragon Spirits" type="FindBestTarget" id="57BA9FB99B1ABA6D">
		<property name="OutputTarget" value="PickupTarget"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="TargetTypes" valueSource="literal" value=""/>
		<property name="ExcludeTypes" valueSource="literal" value=""/>
		<property name="UnitType" valueSource="literal" value="DragonSpiritsPickup"/>
		<property name="SearchCenter" valueSource="intrinsic" value="SelfPos"/>
	</node>
	<node name="Turret" type="FindBestTarget" id="527DAC7F188BECF9">
		<property name="OutputTarget" value="PickupTarget"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="TargetTypes" valueSource="literal" value="Neutral"/>
		<property name="ExcludeTypes" valueSource="literal" value=""/>
		<property name="UnitType" valueSource="literal" value="TurretPickup"/>
		<property name="SearchCenter" valueSource="intrinsic" value="SelfPos"/>
	</node>
	<node name="Move to Pickup" type="HeroMoveToUnit" id="A8E95176C4151B95">
		<property name="Target" valueSource="variable" value="PickupTarget"/>
	</node>
	<node name="" type="And" id="55B0B8578610A0E4">
		<insertChild id="56B7E203C097FBD4"/><!-- HeroNotAlreadyCarryingItem -->
		<insertChild id="7261CFED4B071A26"/><!--  -->
	</node>
	<node name="" type="UnitHasBehavior" id="1F4D858EEA415D5D">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="MapMechanicStack"/>
	</node>
	<node name="HeroNotAlreadyCarryingItem" type="Not" id="56B7E203C097FBD4">
		<insertChild id="F169EC6F8E2AFA97"/><!--  -->
	</node>
	<node name="" type="Or" id="F169EC6F8E2AFA97">
		<insertChild id="1F4D858EEA415D5D"/><!--  -->
		<insertChild id="B5C62BD9779F6F8E"/><!--  -->
	</node>
	<node name="" type="UnitHasBehavior" id="B5C62BD9779F6F8E">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="HasMapMechanicInstantAbility"/>
	</node>
</tree>