include "TriggerLibs/NativeLib"
include "TriggerLibs/HeroesLib"
include "TriggerLibs/GameLib"
include "TriggerLibs/MapMechanicsLib"
include "TriggerLibs/AILib"
include "TriggerLibs/UILib"

include "LibOVER_h"

//--------------------------------------------------------------------------------------------------
// Library: Overwatch Data
//--------------------------------------------------------------------------------------------------
// External Library Initialization
void libOVER_InitLibraries () {
    libNtve_InitVariables();
    libCore_InitVariables();
    libGame_InitVariables();
    libMapM_InitVariables();
    libAIAI_InitVariables();
    libUIUI_InitVariables();
}

// Variable Initialization
bool libOVER_InitVariables_completed = false;

void libOVER_InitVariables () {
    if (libOVER_InitVariables_completed) {
        return;
    }

    libOVER_InitVariables_completed = true;

    libOVER_gv_itemsOnGround = UnitGroupEmpty();
    libOVER_gv_data_XP_TrioGroupCampCapture_C = 345.0;
    libOVER_gv_data_XP_IndividualCampCapture_C = 625.0;
    libOVER_gv_data_XP_TurretCampCapture_C = 460.0;
}

// Functions
void libOVER_gf_InitBossMercCampBossCamp1 () {
    // Variable Declarations
    int lv_campType;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_campType = (libMapM_ge_JungleCampDefenderTypes_BossCamp1);

    // Implementation
    TriggerEnable(libOVER_gt_BossEatsPlayer, true);
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campTypeMinimapLabel = StringExternal("Param/Value/lib_OVER_33B3B4E4");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_customTextTagInfoText = StringExternal("Param/Value/lib_OVER_257B3D59");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campIsSoloable = false;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_defendersCoweronDeath = false;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_initialSpawnDelay = 300.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_respawnTime = 300.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_numberOfCreeps = 1;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_creepUnitTypes[1] = "JungleGraveGolemDefender";
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_xPAwardForCapture = libOVER_gv_data_XP_BossCampCapture_C;
    libMapM_gv_dataJungleCampMercData[lv_campType].lv_numberOfMinionsSpawned = 0;
    libAIAI_gv_aIHeroBossCamp1MinimumNumberNeeded = 4;
    libAIAI_gv_aIHeroBossCamp1TotalLevelNeeded = 50;
    libMapM_gf_DataInitializeScalingDataForDefender(libMapM_ge_JungleCampDefenderTypes_BossCamp1, "OverwatchBossScaling");
}

void libOVER_gf_InitTrioGroupMercCampSiegeCamp3 () {
    // Variable Declarations
    int lv_campType;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_campType = (libMapM_ge_JungleCampDefenderTypes_SiegeCamp3);

    // Implementation
    TriggerEnable(libOVER_gt_PlayerPicksUpDragonSpirits, true);
    TriggerEnable(libOVER_gt_PlayerDiesWithDragonSpirits, true);
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campTypeMinimapLabel = StringExternal("Param/Value/lib_OVER_87517146");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campTypeMinimapTitleLabel = StringExternal("Param/Value/lib_OVER_48B58311");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_customTextTagTitle = StringExternal("Param/Value/lib_OVER_2D16B64B");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_customTextTagInfoText = StringExternal("Param/Value/lib_OVER_B7FFBCBC");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campIsSoloable = true;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_initialSpawnDelay = 60.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_respawnTime = 120.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_numberOfCreeps = 3;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_creepUnitTypes[1] = "MercDefenderMeleeBruiser";
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_creepUnitTypes[2] = "MercDefenderMeleeBruiser2";
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_creepUnitTypes[3] = "MercDefenderMeleeBruiser3";
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_xPAwardForCapture = libOVER_gv_data_XP_TrioGroupCampCapture_C;
    libMapM_gv_dataJungleCampMercData[lv_campType].lv_numberOfMinionsSpawned = 0;
    libAIAI_gv_aIHeroSiegeCamp3MinimumNumberNeeded = 1;
    libAIAI_gv_aIHeroSiegeCamp3TotalLevelNeeded = 4;
    libMapM_gf_DataInitializeScalingDataForDefender(libMapM_ge_JungleCampDefenderTypes_SiegeCamp3, "MeleeDefenderBruiserScaling");
    libUIUI_gf_PingCreateNewPingTarget("MercDefenderMeleeBruiser", false, StringExternal("Param/Value/lib_OVER_1602808D"), StringExternal("Param/Value/lib_OVER_287C8195"), StringExternal("Param/Value/lib_OVER_26F20FBE"), SoundLink("UI_Game_Ping_Attack", -1), SoundLink("UI_Game_Ping_Attack", -1));
    libUIUI_gf_PingSetHumanAISourceHeroVOForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libCore_ge_HeroVOEvents_PingAttackMercCamp, libCore_ge_HeroVOEvents_AIMercCapture);
    libUIUI_gf_PingSetCustomResponseTriggerForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libUIUI_gt_PingCallbackPlayerPingsMercCamp);
    libUIUI_gf_PingCreateNewPingTarget("MercDefenderMeleeBruiser2", false, StringExternal("Param/Value/lib_OVER_6478F204"), StringExternal("Param/Value/lib_OVER_D98A9A48"), StringExternal("Param/Value/lib_OVER_BC208D48"), SoundLink("UI_Game_Ping_Attack", -1), SoundLink("UI_Game_Ping_Attack", -1));
    libUIUI_gf_PingSetHumanAISourceHeroVOForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libCore_ge_HeroVOEvents_PingAttackMercCamp, libCore_ge_HeroVOEvents_AIMercCapture);
    libUIUI_gf_PingSetCustomResponseTriggerForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libUIUI_gt_PingCallbackPlayerPingsMercCamp);
    libUIUI_gf_PingCreateNewPingTarget("MercDefenderMeleeBruiser3", false, StringExternal("Param/Value/lib_OVER_96D84681"), StringExternal("Param/Value/lib_OVER_B001954E"), StringExternal("Param/Value/lib_OVER_B11F0D0A"), SoundLink("UI_Game_Ping_Attack", -1), SoundLink("UI_Game_Ping_Attack", -1));
    libUIUI_gf_PingSetHumanAISourceHeroVOForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libCore_ge_HeroVOEvents_PingAttackMercCamp, libCore_ge_HeroVOEvents_AIMercCapture);
    libUIUI_gf_PingSetCustomResponseTriggerForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libUIUI_gt_PingCallbackPlayerPingsMercCamp);
    libUIUI_gf_PingCreateNewPingTarget("DragonSpiritsPickup", false, StringExternal("Param/Value/lib_OVER_D0031FCE"), StringExternal("Param/Value/lib_OVER_B7533A08"), StringExternal("Param/Value/lib_OVER_C19333DA"), SoundLink("UI_Game_Ping_General", -1), SoundLink("UI_Game_Ping_General", -1));
}

void libOVER_gf_InitIndividualMercCampBruiserCamp3 () {
    // Variable Declarations
    int lv_campType;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_campType = (libMapM_ge_JungleCampDefenderTypes_BruiserCamp3);

    // Implementation
    TriggerEnable(libOVER_gt_PlayerPicksUpHealingPulse, true);
    TriggerEnable(libOVER_gt_PlayerDiesWithHealingPulse, true);
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campTypeMinimapLabel = StringExternal("Param/Value/lib_OVER_10917A4A");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campTypeMinimapTitleLabel = StringExternal("Param/Value/lib_OVER_D10BAD20");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_customTextTagTitle = StringExternal("Param/Value/lib_OVER_6A3E7449");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_customTextTagInfoText = StringExternal("Param/Value/lib_OVER_4AAA4585");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campIsSoloable = false;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_initialSpawnDelay = 165.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_respawnTime = 180.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_numberOfCreeps = 1;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_creepUnitTypes[1] = "MercDefenderMeleeIndividual";
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_xPAwardForCapture = libOVER_gv_data_XP_IndividualCampCapture_C;
    libMapM_gv_dataJungleCampMercData[lv_campType].lv_numberOfMinionsSpawned = 0;
    libMapM_gf_DataInitializeScalingDataForDefender(libMapM_ge_JungleCampDefenderTypes_BruiserCamp3, "MercDefenderIndividualCampScaling");
    libAIAI_gv_aIHeroBruiserCamp3MinimumNumberNeeded = 2;
    libAIAI_gv_aIHeroBruiserCamp3TotalLevelNeeded = 12;
    libUIUI_gf_PingCreateNewPingTarget("MercDefenderMeleeIndividual", false, StringExternal("Param/Value/lib_OVER_EF6E1819"), StringExternal("Param/Value/lib_OVER_C2289DE7"), StringExternal("Param/Value/lib_OVER_23AB7604"), SoundLink("UI_Game_Ping_Attack", -1), SoundLink("UI_Game_Ping_Attack", -1));
    libUIUI_gf_PingSetHumanAISourceHeroVOForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libCore_ge_HeroVOEvents_PingAttackMercCamp, libCore_ge_HeroVOEvents_AIMercCapture);
    libUIUI_gf_PingSetCustomResponseTriggerForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libUIUI_gt_PingCallbackPlayerPingsMercCamp);
    libUIUI_gf_PingCreateNewPingTarget("HealingPulsePickup", false, StringExternal("Param/Value/lib_OVER_A2872802"), StringExternal("Param/Value/lib_OVER_BA373CE2"), StringExternal("Param/Value/lib_OVER_4E0E5943"), SoundLink("UI_Game_Ping_General", -1), SoundLink("UI_Game_Ping_General", -1));
}

void libOVER_gf_InitTurretMercCampSiegeCamp1 () {
    // Variable Declarations
    int lv_campType;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_campType = (libMapM_ge_JungleCampDefenderTypes_SiegeCamp1);

    // Implementation
    TriggerEnable(libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility, true);
    TriggerEnable(libOVER_gt_PlayerPicksUpTurretItem, true);
    TriggerEnable(libOVER_gt_PlayerDiesWithTurretItem, true);
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campTypeMinimapLabel = StringExternal("Param/Value/lib_OVER_221294BA");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campTypeMinimapTitleLabel = StringExternal("Param/Value/lib_OVER_88F5BC6F");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_customTextTagTitle = StringExternal("Param/Value/lib_OVER_DAB2C82F");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_customTextTagInfoText = StringExternal("Param/Value/lib_OVER_8E833978");
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_campIsSoloable = true;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_initialSpawnDelay = 90.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_respawnTime = 150.0;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_numberOfCreeps = 2;
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_creepUnitTypes[1] = "OverwatchTurret";
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_creepUnitTypes[2] = "OverwatchMechanic";
    libMapM_gv_dataJungleCampDefenderData[lv_campType].lv_xPAwardForCapture = libOVER_gv_data_XP_TurretCampCapture_C;
    libMapM_gv_dataJungleCampMercData[lv_campType].lv_numberOfMinionsSpawned = 0;
    libMapM_gf_DataInitializeScalingDataForDefender(libMapM_ge_JungleCampDefenderTypes_SiegeCamp1, "OverwatchTurretScaling");
    libMapM_gf_DataInitializeScalingDataForMerc(libMapM_ge_JungleCampMercTypes_SiegeCamp1, "OverwatchMechanicScaling");
    libAIAI_gv_aIHeroSiegeCamp1MinimumNumberNeeded = 2;
    libAIAI_gv_aIHeroSiegeCamp1TotalLevelNeeded = 8;
    libUIUI_gf_PingCreateNewPingTarget("TurretPickup", false, StringExternal("Param/Value/lib_OVER_E59B469A"), StringExternal("Param/Value/lib_OVER_F88686E8"), StringExternal("Param/Value/lib_OVER_3AF565FD"), SoundLink("UI_Game_Ping_General", -1), SoundLink("UI_Game_Ping_General", -1));
    libUIUI_gf_PingCreateNewPingTarget("OverwatchTurretPlayer", false, StringExternal("Param/Value/lib_OVER_80BD7C33"), StringExternal("Param/Value/lib_OVER_A3E0517E"), StringExternal("Param/Value/lib_OVER_DD14DDAA"), SoundLink("UI_Game_Ping_Attack", -1), SoundLink("UI_Game_Ping_Attack", -1));
    libUIUI_gf_PingCreateNewPingTarget("OverwatchTurret", false, StringExternal("Param/Value/lib_OVER_2F368079"), StringExternal("Param/Value/lib_OVER_9464E0AD"), StringExternal("Param/Value/lib_OVER_87C571B3"), SoundLink("UI_Game_Ping_Attack", -1), SoundLink("UI_Game_Ping_Attack", -1));
    libUIUI_gf_PingSetHumanAISourceHeroVOForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libCore_ge_HeroVOEvents_PingAttackMercCamp, libCore_ge_HeroVOEvents_AIMercCapture);
    libUIUI_gf_PingSetCustomResponseTriggerForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libUIUI_gt_PingCallbackPlayerPingsMercCamp);
    libUIUI_gf_PingCreateNewPingTarget("OverwatchMechanic", false, StringExternal("Param/Value/lib_OVER_8F5D8AB1"), StringExternal("Param/Value/lib_OVER_9F471E44"), StringExternal("Param/Value/lib_OVER_32D81809"), SoundLink("UI_Game_Ping_Attack", -1), SoundLink("UI_Game_Ping_Attack", -1));
    libUIUI_gf_PingSetHumanAISourceHeroVOForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libCore_ge_HeroVOEvents_PingAttackMercCamp, libCore_ge_HeroVOEvents_AIMercCapture);
    libUIUI_gf_PingSetCustomResponseTriggerForPingTarget(libUIUI_gf_PingLastCreatedPingTarget(), libUIUI_gt_PingCallbackPlayerPingsMercCamp);
}

// Triggers
//--------------------------------------------------------------------------------------------------
// Trigger: Initialize OW Merc Data
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_InitializeOWMercData_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    // Actions
    if (!runActions) {
        return true;
    }

    TriggerEnable(TriggerGetCurrent(), false);
    libAIAI_gv_aIHeroEnemiesNearCampDistance = 15.0;
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_InitializeOWMercData_Init () {
    libOVER_gt_InitializeOWMercData = TriggerCreate("libOVER_gt_InitializeOWMercData_Func");
    TriggerAddEventMapInit(libOVER_gt_InitializeOWMercData);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Scaling Timer Expires
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_ScalingTimerExpires_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_campType;

    // Automatic Variable Declarations
    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    libOVER_gv_data_XP_TurretCampCapture_C += 10.0;
    libOVER_gv_data_XP_BossCampCapture_C += 10.0;
    libOVER_gv_data_XP_TrioGroupCampCapture_C += 10.0;
    libOVER_gv_data_XP_IndividualCampCapture_C += 10.0;
    libMapM_gv_dataJungleCampDefenderData[(libMapM_ge_JungleCampDefenderTypes_SiegeCamp1)].lv_xPAwardForCapture = libOVER_gv_data_XP_TurretCampCapture_C;
    libMapM_gv_dataJungleCampDefenderData[(libMapM_ge_JungleCampDefenderTypes_BossCamp1)].lv_xPAwardForCapture = libOVER_gv_data_XP_TurretCampCapture_C;
    libMapM_gv_dataJungleCampDefenderData[(libMapM_ge_JungleCampDefenderTypes_SiegeCamp3)].lv_xPAwardForCapture = libOVER_gv_data_XP_TrioGroupCampCapture_C;
    libMapM_gv_dataJungleCampDefenderData[(libMapM_ge_JungleCampDefenderTypes_BruiserCamp3)].lv_xPAwardForCapture = libOVER_gv_data_XP_IndividualCampCapture_C;
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_ScalingTimerExpires_Init () {
    libOVER_gt_ScalingTimerExpires = TriggerCreate("libOVER_gt_ScalingTimerExpires_Func");
    libGame_gf_ScalingIncremented(libOVER_gt_ScalingTimerExpires);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Boss Eats Player
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_BossEatsPlayer_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_bossUnit;
    unit lv_targetUnit;
    int lv_targetAllyTeam;
    int lv_targetEnemyTeam;
    fixed lv_bossEatingDuration;
    timer lv_eatingTimer;
    int lv_selfTextTag;
    int lv_allyTextTag;
    int lv_enemyTextTag;
    playergroup lv_allyPlayerGroup;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_bossUnit = EventPlayerEffectUsedUnit(c_effectUnitCaster);
    lv_targetUnit = EventPlayerEffectUsedUnitImpact();
    lv_targetAllyTeam = libGame_gf_TeamNumberOfPlayer(UnitGetOwner(lv_targetUnit));
    lv_targetEnemyTeam = libGame_gf_EnemyTeam(lv_targetAllyTeam);
    lv_bossEatingDuration = 4.9375;
    lv_eatingTimer = TimerCreate();
    lv_selfTextTag = c_textTagNone;
    lv_allyTextTag = c_textTagNone;
    lv_enemyTextTag = c_textTagNone;
    lv_allyPlayerGroup = PlayerGroupCopy(libGame_gf_PlayersOnTeamHeroes(lv_targetAllyTeam, false));

    // Actions
    if (!runActions) {
        return true;
    }

    if ((UnitIsValid(lv_bossUnit) == false)) {
        return true;
    }

    PlayerGroupRemove(lv_allyPlayerGroup, UnitGetOwner(lv_targetUnit));
    TimerStart(lv_eatingTimer, lv_bossEatingDuration, false, c_timeGame);
    TextExpressionSetToken("Param/Expression/lib_OVER_1211D4BF", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
    TextExpressionSetToken("Param/Expression/lib_OVER_1211D4BF", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 0));
    TextTagCreate(TextExpressionAssemble("Param/Expression/lib_OVER_1211D4BF"), 24, UnitGetPosition(lv_bossUnit), 1.0, true, true, PlayerGroupSingle(UnitGetOwner(lv_targetUnit)));
    lv_selfTextTag = TextTagLastCreated();
    TextExpressionSetToken("Param/Expression/lib_OVER_FDBAA0B1", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
    TextExpressionSetToken("Param/Expression/lib_OVER_FDBAA0B1", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 0));
    TextTagCreate(TextExpressionAssemble("Param/Expression/lib_OVER_FDBAA0B1"), 24, UnitGetPosition(lv_bossUnit), 1.0, true, true, lv_allyPlayerGroup);
    lv_allyTextTag = TextTagLastCreated();
    TextExpressionSetToken("Param/Expression/lib_OVER_9D93A1A1", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
    TextExpressionSetToken("Param/Expression/lib_OVER_9D93A1A1", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 0));
    TextTagCreate(TextExpressionAssemble("Param/Expression/lib_OVER_9D93A1A1"), 24, UnitGetPosition(lv_bossUnit), 1.0, true, true, libGame_gf_PlayersOnTeamHeroes(lv_targetEnemyTeam, false));
    TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
    lv_enemyTextTag = TextTagLastCreated();
    TextTagAttachToUnit(lv_allyTextTag, lv_bossUnit, 5.0);
    TextTagAttachToUnit(lv_enemyTextTag, lv_bossUnit, 5.0);
    TextTagAttachToUnit(lv_selfTextTag, lv_bossUnit, 5.0);
    if ((UnitTestState(lv_targetUnit, c_unitStateHallucination) == false) && (UnitIsAlive(lv_targetUnit) == true) && (UnitHasBehavior2(lv_targetUnit, "HeroGenericIgnoreFullscreenOverlay") == false)) {
        libUIUI_gf_FullscreenOverlayAddItemForPlayer(UnitGetOwner(lv_targetUnit), libUIUI_ge_FullscreenOverlayPriorities_Stasis, "Cutscenes\\GameUI_OverwatchBossImprisonOverlay.StormCutscene", "OverwatchBossBeingImprisonedBehavior");
    }

    UnitBehaviorSetDurationRemaining(lv_targetUnit, "OverwatchBossImprisonedBehavior", (lv_bossEatingDuration + 0.0625));
    while ((UnitIsValid(lv_bossUnit) == true) && (TimerGetRemaining(lv_eatingTimer) > 0.0)) {
        if ((UnitTestState(lv_bossUnit, c_unitStateInStasis) == false)) {
            TimerPause(lv_eatingTimer, false);
            if ((TimerGetRemaining(lv_eatingTimer) > 1.0)) {
                TextExpressionSetToken("Param/Expression/lib_OVER_72963902", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
                TextExpressionSetToken("Param/Expression/lib_OVER_72963902", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 0));
                TextTagSetText(lv_allyTextTag, TextExpressionAssemble("Param/Expression/lib_OVER_72963902"));
                TextExpressionSetToken("Param/Expression/lib_OVER_FBAC456E", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
                TextExpressionSetToken("Param/Expression/lib_OVER_FBAC456E", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 0));
                TextTagSetText(lv_enemyTextTag, TextExpressionAssemble("Param/Expression/lib_OVER_FBAC456E"));
                TextExpressionSetToken("Param/Expression/lib_OVER_39000723", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
                TextExpressionSetToken("Param/Expression/lib_OVER_39000723", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 0));
                TextTagSetText(lv_selfTextTag, TextExpressionAssemble("Param/Expression/lib_OVER_39000723"));
                Wait(1.0, c_timeGame);
            }
            else {
                TextExpressionSetToken("Param/Expression/lib_OVER_A9804111", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
                TextExpressionSetToken("Param/Expression/lib_OVER_A9804111", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 0));
                TextTagSetText(lv_allyTextTag, TextExpressionAssemble("Param/Expression/lib_OVER_A9804111"));
                TextExpressionSetToken("Param/Expression/lib_OVER_EDB9F42B", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
                TextExpressionSetToken("Param/Expression/lib_OVER_EDB9F42B", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 1));
                TextTagSetText(lv_enemyTextTag, TextExpressionAssemble("Param/Expression/lib_OVER_EDB9F42B"));
                TextExpressionSetToken("Param/Expression/lib_OVER_86245AA3", "B", UnitTypeGetName(UnitGetType(lv_targetUnit)));
                TextExpressionSetToken("Param/Expression/lib_OVER_86245AA3", "A", FixedToText(TimerGetRemaining(lv_eatingTimer), 1));
                TextTagSetText(lv_selfTextTag, TextExpressionAssemble("Param/Expression/lib_OVER_86245AA3"));
                Wait(0.0625, c_timeGame);
            }
        }
        else {
            TimerPause(lv_eatingTimer, true);
            Wait(0.0625, c_timeGame);
        }
    }
    libUIUI_gf_FullscreenOverlayRemoveItemFromQueueForPlayer(UnitGetOwner(lv_targetUnit), "Cutscenes\\GameUI_OverwatchBossImprisonOverlay.StormCutscene", "OverwatchBossBeingImprisonedBehavior");
    TextTagDestroy(lv_allyTextTag);
    TextTagDestroy(lv_enemyTextTag);
    TextTagDestroy(lv_selfTextTag);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_BossEatsPlayer_Init () {
    libOVER_gt_BossEatsPlayer = TriggerCreate("libOVER_gt_BossEatsPlayer_Func");
    TriggerEnable(libOVER_gt_BossEatsPlayer, false);
    TriggerAddEventPlayerEffectUsed(libOVER_gt_BossEatsPlayer, 15, "OverwatchBossImprisonApplyImprisonedBehavior");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Player Picks Up Healing Pulse
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_PlayerPicksUpHealingPulse_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_caster;
    unit lv_pickupUnit;
    point lv_positionOfItem;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_caster = EventPlayerEffectUsedUnit(c_effectUnitCaster);
    lv_positionOfItem = UnitGetPosition(EventPlayerEffectUsedUnit(c_effectUnitTarget));

    // Conditions
    if (testConds) {
        if (!((EventPlayerEffectUsedUnitType(c_effectUnitTarget) == "HealingPulsePickup"))) {
            return false;
        }

        if (!((UnitGroupHasUnit(libOVER_gv_itemsOnGround, EventPlayerEffectUsedUnit(c_effectUnitTarget)) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    UnitCreateEffectUnit(lv_caster, "CaptureMacguffinTargetIsHealingPulseModifyPlayerProperties", lv_caster);
    UnitGroupRemove(libOVER_gv_itemsOnGround, EventPlayerEffectUsedUnit(c_effectUnitTarget));
    RemoveUnitOfInterest(EventPlayerEffectUsedUnit(c_effectUnitTarget), "PickupOverwatchItem", libNtve_ge_GoalTeam_Both);
    TextTagDestroy(libCore_gf_TextTagStoredForUnit(EventPlayerEffectUsedUnit(c_effectUnitTarget), 1));
    if ((UnitHasBehavior2(lv_caster, "HasMapMechanicInstantAbility2") == true)) {
        UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility", 1);
        UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility2", 1);
        libNtve_gf_CreateUnitsWithDefaultFacing(1, "DragonSpiritsPickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
        lv_pickupUnit = UnitLastCreated();
        UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
        AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
        TextTagCreate(StringExternal("Param/Value/lib_OVER_A7B7F96E"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
        TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
        libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
    }
    else {
        if ((UnitHasBehavior2(lv_caster, "MapMechanicStack") == true)) {
            UnitBehaviorRemove(lv_caster, "MapMechanicStack", 1);
            libNtve_gf_CreateUnitsWithDefaultFacing(1, "TurretPickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
            lv_pickupUnit = UnitLastCreated();
            UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
            AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
            TextTagCreate(StringExternal("Param/Value/lib_OVER_EE97DF36"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
            TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
            libCore_gf_StoreTextTagForUnit(UnitLastCreated(), 1, TextTagLastCreated());
        }
        else {
            if ((UnitHasBehavior2(lv_caster, "HasMapMechanicInstantAbility1") == true)) {
                UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility", 1);
                UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility1", 1);
                libNtve_gf_CreateUnitsWithDefaultFacing(1, "HealingPulsePickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
                lv_pickupUnit = UnitLastCreated();
                UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
                AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
                TextTagCreate(StringExternal("Param/Value/lib_OVER_1F5EA6C2"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
                TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
                libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
            }

        }
    }
    UnitKill(EventPlayerEffectUsedUnit(c_effectUnitTarget));
    UnitBehaviorAdd(EventPlayerEffectUsedUnit(c_effectUnitCaster), "HasMapMechanicInstantAbility", EventPlayerEffectUsedUnit(c_effectUnitCaster), 1);
    UnitBehaviorAdd(EventPlayerEffectUsedUnit(c_effectUnitCaster), "HasMapMechanicInstantAbility1", EventPlayerEffectUsedUnit(c_effectUnitCaster), 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_PlayerPicksUpHealingPulse_Init () {
    libOVER_gt_PlayerPicksUpHealingPulse = TriggerCreate("libOVER_gt_PlayerPicksUpHealingPulse_Func");
    TriggerEnable(libOVER_gt_PlayerPicksUpHealingPulse, false);
    TriggerAddEventPlayerEffectUsed(libOVER_gt_PlayerPicksUpHealingPulse, c_playerAny, "CaptureMacGuffinCastComplete");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Player Dies With Healing Pulse
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_PlayerDiesWithHealingPulse_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_pickupUnit;

    // Automatic Variable Declarations
    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    if ((UnitHasBehavior2(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility") == true) && (UnitHasBehavior2(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility1") == true)) {
        UnitBehaviorRemove(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility", 1);
        UnitBehaviorRemove(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility1", 1);
        libNtve_gf_CreateUnitsWithDefaultFacing(1, "HealingPulsePickup", c_unitCreateIgnorePlacement, 0, libGame_gf_HeroKilledLocation());
        lv_pickupUnit = UnitLastCreated();
        UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
        AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
        TextTagCreate(StringExternal("Param/Value/lib_OVER_F1896F11"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
        TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
        libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_PlayerDiesWithHealingPulse_Init () {
    libOVER_gt_PlayerDiesWithHealingPulse = TriggerCreate("libOVER_gt_PlayerDiesWithHealingPulse_Func");
    TriggerEnable(libOVER_gt_PlayerDiesWithHealingPulse, false);
    libGame_gf_HeroKilled(libOVER_gt_PlayerDiesWithHealingPulse);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Player Picks Up Dragon Spirits
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_PlayerPicksUpDragonSpirits_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_caster;
    unit lv_pickupUnit;
    point lv_positionOfItem;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_caster = EventPlayerEffectUsedUnit(c_effectUnitCaster);
    lv_positionOfItem = UnitGetPosition(EventPlayerEffectUsedUnit(c_effectUnitTarget));

    // Conditions
    if (testConds) {
        if (!((EventPlayerEffectUsedUnitType(c_effectUnitTarget) == "DragonSpiritsPickup"))) {
            return false;
        }

        if (!((UnitGroupHasUnit(libOVER_gv_itemsOnGround, EventPlayerEffectUsedUnit(c_effectUnitTarget)) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    UnitCreateEffectUnit(lv_caster, "CaptureMacguffinTargetIsDragonSpiritsModifyPlayerProperties", lv_caster);
    UnitGroupRemove(libOVER_gv_itemsOnGround, EventPlayerEffectUsedUnit(c_effectUnitTarget));
    RemoveUnitOfInterest(EventPlayerEffectUsedUnit(c_effectUnitTarget), "PickupOverwatchItem", libNtve_ge_GoalTeam_Both);
    TextTagDestroy(libCore_gf_TextTagStoredForUnit(EventPlayerEffectUsedUnit(c_effectUnitTarget), 1));
    if ((UnitHasBehavior2(lv_caster, "HasMapMechanicInstantAbility2") == true)) {
        UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility", 1);
        UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility2", 1);
        libNtve_gf_CreateUnitsWithDefaultFacing(1, "DragonSpiritsPickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
        lv_pickupUnit = UnitLastCreated();
        UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
        AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
        TextTagCreate(StringExternal("Param/Value/lib_OVER_B4E3B4F7"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
        TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
        libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
    }
    else {
        if ((UnitHasBehavior2(lv_caster, "MapMechanicStack") == true)) {
            UnitBehaviorRemove(lv_caster, "MapMechanicStack", 1);
            libNtve_gf_CreateUnitsWithDefaultFacing(1, "TurretPickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
            lv_pickupUnit = UnitLastCreated();
            UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
            AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
            TextTagCreate(StringExternal("Param/Value/lib_OVER_7E996412"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
            TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
            libCore_gf_StoreTextTagForUnit(UnitLastCreated(), 1, TextTagLastCreated());
        }
        else {
            if ((UnitHasBehavior2(lv_caster, "HasMapMechanicInstantAbility1") == true)) {
                UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility", 1);
                UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility1", 1);
                libNtve_gf_CreateUnitsWithDefaultFacing(1, "HealingPulsePickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
                lv_pickupUnit = UnitLastCreated();
                UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
                AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
                TextTagCreate(StringExternal("Param/Value/lib_OVER_BE8F460F"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
                TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
                libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
            }

        }
    }
    UnitKill(EventPlayerEffectUsedUnit(c_effectUnitTarget));
    UnitBehaviorAdd(EventPlayerEffectUsedUnit(c_effectUnitCaster), "HasMapMechanicInstantAbility", EventPlayerEffectUsedUnit(c_effectUnitCaster), 1);
    UnitBehaviorAdd(EventPlayerEffectUsedUnit(c_effectUnitCaster), "HasMapMechanicInstantAbility2", EventPlayerEffectUsedUnit(c_effectUnitCaster), 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_PlayerPicksUpDragonSpirits_Init () {
    libOVER_gt_PlayerPicksUpDragonSpirits = TriggerCreate("libOVER_gt_PlayerPicksUpDragonSpirits_Func");
    TriggerEnable(libOVER_gt_PlayerPicksUpDragonSpirits, false);
    TriggerAddEventPlayerEffectUsed(libOVER_gt_PlayerPicksUpDragonSpirits, c_playerAny, "CaptureMacGuffinCastComplete");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Player Dies With Dragon Spirits
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_PlayerDiesWithDragonSpirits_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_pickupUnit;

    // Automatic Variable Declarations
    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    if ((UnitHasBehavior2(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility") == true) && (UnitHasBehavior2(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility2") == true)) {
        UnitBehaviorRemove(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility", 1);
        UnitBehaviorRemove(libGame_gf_HeroKilledUnit(), "HasMapMechanicInstantAbility2", 1);
        libNtve_gf_CreateUnitsWithDefaultFacing(1, "DragonSpiritsPickup", c_unitCreateIgnorePlacement, 0, libGame_gf_HeroKilledLocation());
        lv_pickupUnit = UnitLastCreated();
        UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
        AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
        TextTagCreate(StringExternal("Param/Value/lib_OVER_392ABC97"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
        TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
        libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_PlayerDiesWithDragonSpirits_Init () {
    libOVER_gt_PlayerDiesWithDragonSpirits = TriggerCreate("libOVER_gt_PlayerDiesWithDragonSpirits_Func");
    TriggerEnable(libOVER_gt_PlayerDiesWithDragonSpirits, false);
    libGame_gf_HeroKilled(libOVER_gt_PlayerDiesWithDragonSpirits);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Player Creates Turret From Map Mechanic Ability
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility_Func (bool testConds, bool runActions) {
    // Automatic Variable Declarations
    // Conditions
    if (testConds) {
        if (!((UnitGetType(EventUnitCreatedUnit()) == "OverwatchTurretPlayer"))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    UnitXPAddXP(EventUnitCreatedUnit(), "OverwatchTurretPlayerScaling", libGame_gv_teams[libGame_gf_TeamNumberOfPlayer(UnitGetOwner(EventUnit()))].lv_teamLevel);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility_Init () {
    libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility = TriggerCreate("libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility_Func");
    TriggerEnable(libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility, false);
    TriggerAddEventUnitCreated(libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility, null, "MapMechanicAbilityTarget", null);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Player Picks Up Turret Item
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_PlayerPicksUpTurretItem_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_caster;
    unit lv_pickupUnit;
    point lv_positionOfItem;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_caster = EventPlayerEffectUsedUnit(c_effectUnitCaster);
    lv_positionOfItem = UnitGetPosition(EventPlayerEffectUsedUnit(c_effectUnitTarget));

    // Conditions
    if (testConds) {
        if (!((EventPlayerEffectUsedUnitType(c_effectUnitTarget) == "TurretPickup"))) {
            return false;
        }

        if (!((UnitGroupHasUnit(libOVER_gv_itemsOnGround, EventPlayerEffectUsedUnit(c_effectUnitTarget)) == true))) {
            return false;
        }
    }

    // Actions
    if (!runActions) {
        return true;
    }

    UnitGroupRemove(libOVER_gv_itemsOnGround, EventPlayerEffectUsedUnit(c_effectUnitTarget));
    RemoveUnitOfInterest(EventPlayerEffectUsedUnit(c_effectUnitTarget), "PickupOverwatchItem", libNtve_ge_GoalTeam_Both);
    if ((UnitHasBehavior2(lv_caster, "HasMapMechanicInstantAbility2") == true)) {
        UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility", 1);
        UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility2", 1);
        libNtve_gf_CreateUnitsWithDefaultFacing(1, "DragonSpiritsPickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
        lv_pickupUnit = UnitLastCreated();
        UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
        AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
        TextTagCreate(StringExternal("Param/Value/lib_OVER_072B01C6"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
        TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
        libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
    }
    else {
        if ((UnitHasBehavior2(lv_caster, "MapMechanicStack") == true)) {
            UnitBehaviorRemove(lv_caster, "MapMechanicStack", 1);
            libNtve_gf_CreateUnitsWithDefaultFacing(1, "TurretPickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
            lv_pickupUnit = UnitLastCreated();
            UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
            AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
            TextTagCreate(StringExternal("Param/Value/lib_OVER_F58EF2C8"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
            TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
            libCore_gf_StoreTextTagForUnit(UnitLastCreated(), 1, TextTagLastCreated());
        }
        else {
            if ((UnitHasBehavior2(lv_caster, "HasMapMechanicInstantAbility1") == true)) {
                UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility", 1);
                UnitBehaviorRemove(lv_caster, "HasMapMechanicInstantAbility1", 1);
                libNtve_gf_CreateUnitsWithDefaultFacing(1, "HealingPulsePickup", c_unitCreateIgnorePlacement, 0, lv_positionOfItem);
                lv_pickupUnit = UnitLastCreated();
                UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
                AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
                TextTagCreate(StringExternal("Param/Value/lib_OVER_CE527E10"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
                TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
                libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
            }

        }
    }
    TextTagDestroy(libCore_gf_TextTagStoredForUnit(EventPlayerEffectUsedUnit(c_effectUnitTarget), 1));
    UnitKill(EventPlayerEffectUsedUnit(c_effectUnitTarget));
    UnitBehaviorAdd(EventPlayerEffectUsedUnit(c_effectUnitCaster), "MapMechanicStack", EventPlayerEffectUsedUnit(c_effectUnitCaster), 1);
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_PlayerPicksUpTurretItem_Init () {
    libOVER_gt_PlayerPicksUpTurretItem = TriggerCreate("libOVER_gt_PlayerPicksUpTurretItem_Func");
    TriggerEnable(libOVER_gt_PlayerPicksUpTurretItem, false);
    TriggerAddEventPlayerEffectUsed(libOVER_gt_PlayerPicksUpTurretItem, c_playerAny, "CaptureMacGuffinCastComplete");
}

//--------------------------------------------------------------------------------------------------
// Trigger: Player Dies With Turret Item
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_PlayerDiesWithTurretItem_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_pickupUnit;

    // Automatic Variable Declarations
    // Variable Initialization

    // Actions
    if (!runActions) {
        return true;
    }

    if ((UnitHasBehavior2(libGame_gf_HeroKilledUnit(), "MapMechanicStack") == true)) {
        UnitBehaviorRemove(libGame_gf_HeroKilledUnit(), "MapMechanicStack", 1);
        libNtve_gf_CreateUnitsWithDefaultFacing(1, "TurretPickup", c_unitCreateIgnorePlacement, 0, libGame_gf_HeroKilledLocation());
        lv_pickupUnit = UnitLastCreated();
        UnitGroupAdd(libOVER_gv_itemsOnGround, lv_pickupUnit);
        AddUnitOfInterest(lv_pickupUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
        TextTagCreate(StringExternal("Param/Value/lib_OVER_140C7EB9"), 24, UnitGetPosition(lv_pickupUnit), 3.0, true, false, PlayerGroupAll());
        TextTagSetFogVisibility(TextTagLastCreated(), c_visTypeFog);
        libCore_gf_StoreTextTagForUnit(lv_pickupUnit, 1, TextTagLastCreated());
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_PlayerDiesWithTurretItem_Init () {
    libOVER_gt_PlayerDiesWithTurretItem = TriggerCreate("libOVER_gt_PlayerDiesWithTurretItem_Func");
    TriggerEnable(libOVER_gt_PlayerDiesWithTurretItem, false);
    libGame_gf_HeroKilled(libOVER_gt_PlayerDiesWithTurretItem);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Merc Camp Killed
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_MercCampKilled_Func (bool testConds, bool runActions) {
    // Variable Declarations
    int lv_index;
    unit lv_chestUnit;

    // Automatic Variable Declarations
    const int auto75855403_ae = libMapM_gv_jungleMaxCamps;
    const int auto75855403_ai = 1;

    // Variable Initialization
    lv_chestUnit = UnitGroupUnit(UnitGroup("OWPickupChest", libCore_gv_cOMPUTER_Neutral, libAIAI_gf_DefenderLeashRegion(libGame_gf_JungleDefenderAIAllDefendersKilledIndex()), UnitFilter(0, 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 1), 1);

    // Actions
    if (!runActions) {
        return true;
    }

    lv_index = 1;
    for ( ; ( (auto75855403_ai >= 0 && lv_index <= auto75855403_ae) || (auto75855403_ai < 0 && lv_index >= auto75855403_ae) ) ; lv_index += auto75855403_ai ) {
        if ((libMapM_gv_jungleCreepCamps[lv_index].lv_aIDefenderAIIndex == libGame_gf_JungleDefenderAIAllDefendersKilledIndex())) {
            if ((libMapM_gv_jungleCreepCamps[lv_index].lv_mapDataCampDefenderType == libMapM_ge_JungleCampDefenderTypes_BruiserCamp3)) {
                libNtve_gf_SendActorMessageToUnit(lv_chestUnit, "StatusSet HealingPulse 1");
            }
            else if ((libMapM_gv_jungleCreepCamps[lv_index].lv_mapDataCampDefenderType == libMapM_ge_JungleCampDefenderTypes_SiegeCamp3)) {
                libNtve_gf_SendActorMessageToUnit(lv_chestUnit, "StatusSet DragonSpirits 1");
            }
            else if ((libMapM_gv_jungleCreepCamps[lv_index].lv_mapDataCampDefenderType == libMapM_ge_JungleCampDefenderTypes_SiegeCamp1)) {
                libNtve_gf_SendActorMessageToUnit(lv_chestUnit, "StatusSet Turret 1");
            }
            break;
        }

    }
    libNtve_gf_SendActorMessageToUnit(lv_chestUnit, "Signal SpawnItem");
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_MercCampKilled_Init () {
    libOVER_gt_MercCampKilled = TriggerCreate("libOVER_gt_MercCampKilled_Func");
    libGame_gf_JungleDefenderAIAllDefendersKilled(libOVER_gt_MercCampKilled);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Merc Camp Captured
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_MercCampCaptured_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_chestUnit;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_chestUnit = UnitGroupUnit(UnitGroup("OWPickupChest", libCore_gv_cOMPUTER_Neutral, libMapM_gv_jungleCreepCamps[libGame_gf_MercCampRewardGrantedCampIndex()].lv_mapDataDefenderLeashRegion, UnitFilter(0, 0, (1 << c_targetFilterMissile), (1 << (c_targetFilterDead - 32)) | (1 << (c_targetFilterHidden - 32))), 1), 1);

    // Actions
    if (!runActions) {
        return true;
    }

    if ((libMapM_gv_jungleCreepCamps[libGame_gf_MercCampRewardGrantedCampIndex()].lv_mapDataCampDefenderType == libMapM_ge_JungleCampDefenderTypes_BruiserCamp3)) {
        UnitCreateEffectPoint(lv_chestUnit, "OWPickupChestHealingPulseLaunchMissile", libMapM_gv_jungleCreepCamps[libGame_gf_MercCampRewardGrantedCampIndex()].lv_mapDataCampCaptainSpawnPoint);
    }
    else if ((libMapM_gv_jungleCreepCamps[libGame_gf_MercCampRewardGrantedCampIndex()].lv_mapDataCampDefenderType == libMapM_ge_JungleCampDefenderTypes_SiegeCamp3)) {
        UnitCreateEffectPoint(lv_chestUnit, "OWPickupChestDragonSpiritsLaunchMissile", libMapM_gv_jungleCreepCamps[libGame_gf_MercCampRewardGrantedCampIndex()].lv_mapDataCampCaptainSpawnPoint);
    }
    else if ((libMapM_gv_jungleCreepCamps[libGame_gf_MercCampRewardGrantedCampIndex()].lv_mapDataCampDefenderType == libMapM_ge_JungleCampDefenderTypes_SiegeCamp1)) {
        UnitCreateEffectPoint(lv_chestUnit, "OWPickupChestTurretLaunchMissile", libMapM_gv_jungleCreepCamps[libGame_gf_MercCampRewardGrantedCampIndex()].lv_mapDataCampCaptainSpawnPoint);
    }
    libNtve_gf_SendActorMessageToUnit(lv_chestUnit, "Signal ItemSpawned");
    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_MercCampCaptured_Init () {
    libOVER_gt_MercCampCaptured = TriggerCreate("libOVER_gt_MercCampCaptured_Func");
    libGame_gf_MercCampRewardGranted(libOVER_gt_MercCampCaptured);
}

//--------------------------------------------------------------------------------------------------
// Trigger: Item Spawned
//--------------------------------------------------------------------------------------------------
bool libOVER_gt_ItemSpawned_Func (bool testConds, bool runActions) {
    // Variable Declarations
    unit lv_itemUnit;
    timer lv_visionTimer;

    // Automatic Variable Declarations
    // Variable Initialization
    lv_itemUnit = EventPlayerEffectUsedUnit(c_effectUnitSource);
    lv_visionTimer = TimerCreate();

    // Actions
    if (!runActions) {
        return true;
    }

    UnitGroupAdd(libOVER_gv_itemsOnGround, lv_itemUnit);
    AddUnitOfInterest(lv_itemUnit, 0.0, 0.0, "PickupOverwatchItem", libNtve_ge_GoalTeam_Both, 0);
    Wait(0.5, c_timeGame);
    if ((UnitGetType(lv_itemUnit) == "HealingPulsePickup")) {
        TextTagCreate(StringExternal("Param/Value/lib_OVER_6B0FC639"), 24, UnitGetPosition(lv_itemUnit), 3.0, false, true, PlayerGroupAll());
    }
    else if ((UnitGetType(lv_itemUnit) == "DragonSpiritsPickup")) {
        TextTagCreate(StringExternal("Param/Value/lib_OVER_0FF3B904"), 24, UnitGetPosition(lv_itemUnit), 3.0, false, true, PlayerGroupAll());
    }
    else if ((UnitGetType(lv_itemUnit) == "TurretPickup")) {
        TextTagCreate(StringExternal("Param/Value/lib_OVER_8D4D576D"), 24, UnitGetPosition(lv_itemUnit), 3.0, false, true, PlayerGroupAll());
    }
    TextTagAttachToUnit(TextTagLastCreated(), lv_itemUnit, 3.0);
    libCore_gf_StoreTextTagForUnit(lv_itemUnit, 1, TextTagLastCreated());
    TimerStart(lv_visionTimer, 5.0, false, c_timeGame);
    while ((TimerGetRemaining(lv_visionTimer) > 0.0)) {
        if ((UnitIsAlive(lv_itemUnit) == true) && (libNtve_gf_UnitIsVisibleToPlayer(lv_itemUnit, libCore_gv_cOMPUTER_TeamOrder) == true)) {
            libNtve_gf_ShareVisionofUnit(lv_itemUnit, true, libCore_gv_cOMPUTER_TeamOrder);
            TextTagShow(libCore_gf_TextTagStoredForUnit(lv_itemUnit, 1), GameAttributePlayersForTeam(libGame_gv_teamOrderIndex_C), true);
        }

        if ((UnitIsAlive(lv_itemUnit) == true) && (libNtve_gf_UnitIsVisibleToPlayer(lv_itemUnit, libCore_gv_cOMPUTER_TeamChaos) == true)) {
            libNtve_gf_ShareVisionofUnit(lv_itemUnit, true, libCore_gv_cOMPUTER_TeamChaos);
            TextTagShow(libCore_gf_TextTagStoredForUnit(lv_itemUnit, 1), GameAttributePlayersForTeam(libGame_gv_teamChaosIndex_C), true);
        }

        Wait(0.5, c_timeGame);
    }
    if ((UnitIsAlive(lv_itemUnit) == true)) {
        libNtve_gf_ShareVisionofUnit(lv_itemUnit, true, libCore_gv_cOMPUTER_TeamOrder);
        libNtve_gf_ShareVisionofUnit(lv_itemUnit, true, libCore_gv_cOMPUTER_TeamChaos);
        TextTagShow(libCore_gf_TextTagStoredForUnit(lv_itemUnit, 1), GameAttributePlayersForTeam(libGame_gv_teamOrderIndex_C), true);
        TextTagShow(libCore_gf_TextTagStoredForUnit(lv_itemUnit, 1), GameAttributePlayersForTeam(libGame_gv_teamChaosIndex_C), true);
    }

    return true;
}

//--------------------------------------------------------------------------------------------------
void libOVER_gt_ItemSpawned_Init () {
    libOVER_gt_ItemSpawned = TriggerCreate("libOVER_gt_ItemSpawned_Func");
    TriggerAddEventPlayerEffectUsed(libOVER_gt_ItemSpawned, libCore_gv_cOMPUTER_Neutral, "OWPickupChestItemCreatedDummyPersistent");
}

void libOVER_InitTriggers () {
    libOVER_gt_InitializeOWMercData_Init();
    libOVER_gt_ScalingTimerExpires_Init();
    libOVER_gt_BossEatsPlayer_Init();
    libOVER_gt_PlayerPicksUpHealingPulse_Init();
    libOVER_gt_PlayerDiesWithHealingPulse_Init();
    libOVER_gt_PlayerPicksUpDragonSpirits_Init();
    libOVER_gt_PlayerDiesWithDragonSpirits_Init();
    libOVER_gt_PlayerCreatesTurretFromMapMechanicAbility_Init();
    libOVER_gt_PlayerPicksUpTurretItem_Init();
    libOVER_gt_PlayerDiesWithTurretItem_Init();
    libOVER_gt_MercCampKilled_Init();
    libOVER_gt_MercCampCaptured_Init();
    libOVER_gt_ItemSpawned_Init();
}

//--------------------------------------------------------------------------------------------------
// Library Initialization
//--------------------------------------------------------------------------------------------------
bool libOVER_InitLib_completed = false;

void libOVER_InitLib () {
    if (libOVER_InitLib_completed) {
        return;
    }

    libOVER_InitLib_completed = true;

    libOVER_InitLibraries();
    libOVER_InitVariables();
    libOVER_InitTriggers();
}

