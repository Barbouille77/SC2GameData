<?xml version="1.0" encoding="us-ascii"?>
<tree>
	<include file="AI/HeroMutator.aitree"/>
	<!-- Offensive -->
	<mod id="87811D772E337EB7">
		<insertChild id="E04BCA10C6726AC2"/><!-- Wrath of the Berserker -->
		<insertChild id="B8E1EB585D8F0D06"/><!-- Ancient Spear -->
		<insertChild id="A446FFF0A1BFA401"/><!-- Seismic Slam -->
		<insertChild id="8928C038A88F046F"/><!-- Whirlwind -->
		<insertChild id="6F2244C87517B58D"/><!-- Imposing Presence -->
		<insertChild id="69D99F5352D802EB"/><!-- Leap -->
	</mod>
	<!-- Always -->
	<mod id="A4058AA255280C17">
		<insertChild id="E9864B9878E93E33"/><!-- Shot of Fury -->
		<insertChild id="E2F318F17036B5E2"/><!-- Ferocious Healing -->
		<insertChild id="8B229A46831D648B"/><!-- Arreat Crater Active -->
		<insertChild id="3E4EB088730155CB"/><!-- Whirlwind Active -->
	</mod>
	<!-- Defensive -->
	<mod id="F21BCB9B06948439">
		<insertChild id="99784C6E0D6DA2DC"/><!-- Imposing Presence -->
		<insertChild id="88C21EEEDF12EBFA"/><!-- Ignore Pain -->
		<insertChild id="FF6F1929742D587B"/><!-- Nerves of Steel -->
		<insertChild id="C50CE89A1C558372"/><!-- Ancient Spear -->
	</mod>
	<node name="Imposing Presence" type="AbilityUsable" id="99784C6E0D6DA2DC">
		<property name="Ability" valueSource="literal" value="TalentImposingPresence"/>
		<insertChild id="2D147D61A0398792"/><!-- Defensive Use -->
	</node>
	<node name="Defensive Use" type="And" id="2D147D61A0398792">
		<variable name="Imposing Presence Range" type="Number" valueSource="lookup" value="Effect,TalentImposingPresenceActivatedSearch,AreaArray[0].Radius"/>
		<insertChild id="518B43DA1C8C9DB2"/><!-- 40% Health -->
		<insertChild id="0AB10B7FC593C6FA"/><!-- Enemies Nearby -->
		<insertChild id="2FFE1B4513C49B20"/><!-- Cast -->
	</node>
	<node name="40% Health" type="LifeFraction" id="518B43DA1C8C9DB2">
		<property name="Comparison" valueSource="literal" value="LT"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
		<property name="LifeFraction" valueSource="literal" value="0.4"/>
	</node>
	<node name="Enemies Nearby" type="Or" id="0AB10B7FC593C6FA">
		<insertChild id="CDA0199A16B42255"/><!-- 1 Hero -->
		<insertChild id="9D1D6093046E6630"/><!-- 3 Hero or Summons -->
	</node>
	<node name="1 Hero" type="UnitCount" id="CDA0199A16B42255">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Imposing Presence Range"/>
	</node>
	<node name="3 Hero or Summons" type="UnitCount" id="9D1D6093046E6630">
		<property name="TargetTypes" valueSource="literal" value="Heroic,Summoned"/>
		<property name="TargetCount" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Imposing Presence Range"/>
	</node>
	<node name="Cast" type="AbilityEnqueue" id="2FFE1B4513C49B20">
		<property name="Ability" valueSource="literal" value="TalentImposingPresence"/>
	</node>
	<node name="Imposing Presence" type="AbilityUsable" id="6F2244C87517B58D">
		<property name="Ability" valueSource="literal" value="TalentImposingPresence"/>
		<insertChild id="106D327DF10BC9AB"/><!-- Offensive Use -->
	</node>
	<node name="Offensive Use" type="And" id="106D327DF10BC9AB">
		<variable name="Imposing Presence Range" type="Number" valueSource="lookup" value="Effect,TalentImposingPresenceActivatedSearch,AreaArray[0].Radius"/>
		<insertChild id="625CFE2A04A5A2B8"/><!-- Target Selection -->
		<insertChild id="BDE07CCDFE21680D"/><!-- Cast -->
	</node>
	<node name="Target Selection" type="Or" id="625CFE2A04A5A2B8">
		<insertChild id="15D77BC1FBA5AE9B"/><!-- One Low Enemy Hero -->
		<insertChild id="E649815255011DDD"/><!-- Two Hurt Enemy Heroes -->
		<insertChild id="C8023CAC505D3D6F"/><!-- Three Enemy Heroes -->
	</node>
	<node name="One Low Enemy Hero" type="UnitCount" id="15D77BC1FBA5AE9B">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Imposing Presence Range"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.4"/>
	</node>
	<node name="Two Hurt Enemy Heroes" type="UnitCount" id="E649815255011DDD">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Imposing Presence Range"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.7"/>
	</node>
	<node name="Three Enemy Heroes" type="UnitCount" id="C8023CAC505D3D6F">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Imposing Presence Range"/>
		<property name="MaxLifeFraction" valueSource="literal" value="1"/>
	</node>
	<node name="Cast" type="AbilityEnqueue" id="BDE07CCDFE21680D">
		<property name="Ability" valueSource="literal" value="TalentImposingPresence"/>
	</node>
	<node name="Ancient Spear" type="AbilityUsable" id="B8E1EB585D8F0D06">
		<property name="Ability" valueSource="literal" value="BarbarianAncientSpear"/>
		<insertChild id="C8BB1B574DD5A657"/><!-- Ancient Spear Offensive -->
	</node>
	<node name="Ancient Spear Offensive" type="And" id="C8BB1B574DD5A657">
		<variable name="Ancient Spear Length" type="Number" value="8.25"/>
		<variable name="Ancient Spear Half Width" type="Number" value="0.625"/>
		<variable name="Ancient Spear Target Point" type="Point"/>
		<variable name="Ancient Spear Target Unit" type="Unit"/>
		<insertChild id="B44076FDA08AA4DA"/><!-- Talent Upgrades -->
		<insertChild id="13268DC1E6698F9D"/><!-- Not Rooted -->
		<insertChild id="23E16E3DB656FF71"/><!-- Target Selection -->
		<insertChild id="5BB8662D03973337"/><!-- Convert Unit to Point -->
		<insertChild id="E3AB466E6143A9F5"/><!-- Cast -->
	</node>
	<node name="Talent Upgrades" type="Sequence" id="B44076FDA08AA4DA">
		<property name="IgnoreChildFailures" valueSource="literal" value="true"/>
		<insertChild id="78AC91106B0E798F"/><!-- Composite Spear -->
	</node>
	<node name="Composite Spear" type="UnitHasTalent" id="78AC91106B0E798F">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Talent" valueSource="literal" value="BarbarianMasteryCompositeSpearAncientSpear"/>
		<insertChild id="98BBC8DD52DFDC2D"/><!-- Increase Range -->
	</node>
	<node name="Increase Range" type="SetNumber" id="98BBC8DD52DFDC2D">
		<property name="Variable" value="Ancient Spear Length"/>
		<property name="Value" valueSource="literal" value="10.45"/>
	</node>
	<node name="Cast" type="Ability" id="E3AB466E6143A9F5">
		<property name="Ability" valueSource="literal" value="BarbarianAncientSpear"/>
		<property name="TargetPoint" valueSource="variable" value="Ancient Spear Target Point"/>
	</node>
	<node name="Target Selection" type="Or" id="23E16E3DB656FF71">
		<insertChild id="AE5080C6B04C5804"/><!-- Engage Hero -->
		<insertChild id="640B6F3A967154DA"/><!-- Generate Fury on Hero -->
		<insertChild id="94D8C900528B774A"/><!-- Generate Fury on non-Hero -->
	</node>
	<node name="No Hero Adjacent" type="UnitCount" id="7D02D0443E208D8C">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<property name="MaxTargetDistance" valueSource="literal" value="3"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
	</node>
	<node name="Find Enemy Hero" type="FindBestTarget" id="73344AF1070EC207">
		<property name="PredictionSeconds" valueSource="literal" value="0.1875"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="MissileRadius" valueSource="variable" value="Ancient Spear Half Width"/>
		<property name="TargetBlockingTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Ancient Spear Length"/>
		<property name="MinTargetDistance" valueSource="literal" value="3"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="OutputTarget" value="Ancient Spear Target Unit"/>
	</node>
	<node name="Convert Unit to Point" type="UnitPosition" id="5BB8662D03973337">
		<property name="PredictionSeconds" valueSource="literal" value="0.1875"/>
		<property name="OutputPosition" value="Ancient Spear Target Point"/>
		<property name="InputUnit" valueSource="variable" value="Ancient Spear Target Unit"/>
	</node>
	<node name="No Hero Nearby" type="UnitCount" id="9DE43EFF06FA0980">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="literal" value="10"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
	</node>
	<node name="Target Selection" type="Or" id="2BDFF4448F4D7734">
		<insertChild id="A08271077E425239"/><!-- Find Enemy Minion or Summon -->
		<insertChild id="EA19AE56914D70B9"/><!-- Find Enemy Structure -->
		<insertChild id="B86F58EEB6F3EACF"/><!-- Find Merc or Map Creature -->
	</node>
	<node name="Find Enemy Minion or Summon" type="FindBestTarget" id="A08271077E425239">
		<property name="PredictionSeconds" valueSource="literal" value="0.1875"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="TargetTypes" valueSource="literal" value="Minion,Summoned"/>
		<property name="MissileRadius" valueSource="variable" value="Ancient Spear Half Width"/>
		<property name="TargetBlockingTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Ancient Spear Length"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="OutputTarget" value="Ancient Spear Target Unit"/>
	</node>
	<node name="Find Enemy Structure" type="FindBestTarget" id="EA19AE56914D70B9">
		<property name="PredictionSeconds" valueSource="literal" value="0.1875"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="TargetTypes" valueSource="literal" value="AITargetableStructure"/>
		<property name="MissileRadius" valueSource="variable" value="Ancient Spear Half Width"/>
		<property name="TargetBlockingTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Ancient Spear Length"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="OutputTarget" value="Ancient Spear Target Unit"/>
		<insertChild id="CAC8D21744FD5642"/><!-- 3+ Ally Minions Nearby -->
	</node>
	<node name="Find Merc or Map Creature" type="FindBestTarget" id="B86F58EEB6F3EACF">
		<property name="PredictionSeconds" valueSource="literal" value="0.1875"/>
		<property name="TargetTypes" valueSource="literal" value="Creep,MapCreature"/>
		<property name="MissileRadius" valueSource="variable" value="Ancient Spear Half Width"/>
		<property name="TargetBlockingTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Ancient Spear Length"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="OutputTarget" value="Ancient Spear Target Unit"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.99"/>
	</node>
	<node name="3+ Ally Minions Nearby" type="UnitCount" id="CAC8D21744FD5642">
		<property name="TargetTypes" valueSource="literal" value="Minion"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="Comparison" valueSource="literal" value="GE"/>
		<property name="MaxTargetDistance" valueSource="literal" value="10"/>
		<property name="TargetCount" valueSource="literal" value="3"/>
		<property name="SearchCenter" valueSource="variable" value="Ancient Spear Target Unit"/>
	</node>
	<node name="Ancient Spear" type="AbilityUsable" id="C50CE89A1C558372">
		<property name="Ability" valueSource="literal" value="BarbarianAncientSpear"/>
		<insertChild id="DFEC1211A5776988"/><!-- Ancient Spear Defensive -->
	</node>
	<node name="Ancient Spear Defensive" type="And" id="DFEC1211A5776988">
		<variable name="Ancient Spear Safe Position" type="Point"/>
		<variable name="Ancient Spear Length" type="Number" value="8.25"/>
		<insertChild id="D5D0281DE2198568"/><!-- Talent Upgrades -->
		<insertChild id="4A9E5A2E3F5D18B1"/><!-- Mystical Spear -->
		<insertChild id="659FDD15B1678F34"/><!-- Critical Health -->
		<insertChild id="CC0719315CF38E9F"/><!-- Not Rooted -->
		<insertChild id="B955AD092D2BE737"/><!-- 1+ Enemy Hero Nearby -->
		<insertChild id="4AE12CC5DE3DB3CE"/><!-- Find Safest Point -->
		<insertChild id="9A2E9D8B73682C9B"/><!-- Cast -->
	</node>
	<node name="Cast" type="Ability" id="9A2E9D8B73682C9B">
		<property name="Ability" valueSource="literal" value="BarbarianAncientSpear"/>
		<property name="TargetPoint" valueSource="intrinsic" value="SafePos"/>
	</node>
	<node name="Mystical Spear" type="UnitHasTalent" id="4A9E5A2E3F5D18B1">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Talent" valueSource="literal" value="BarbarianMasteryMysticalSpearAncientSpear"/>
	</node>
	<node name="Critical Health" type="LifeFraction" id="659FDD15B1678F34">
		<property name="Comparison" valueSource="literal" value="LT"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
		<property name="LifeFraction" valueSource="variable" value="Health_ReturnToSpawn"/>
	</node>
	<node name="1+ Enemy Hero Nearby" type="UnitCount" id="B955AD092D2BE737">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxTargetDistance" valueSource="literal" value="10"/>
	</node>
	<node name="Shot of Fury" type="AbilityUsable" id="E9864B9878E93E33">
		<property name="Ability" valueSource="literal" value="BarbarianShotofFury"/>
		<insertChild id="207828FA18D3166D"/><!-- Shot of Fury -->
	</node>
	<node name="LE 20% Energy" type="EnergyFraction" id="B0D8B5E518B4D218">
		<property name="EnergyFraction" valueSource="literal" value="0.2"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="Shot of Fury" type="And" id="207828FA18D3166D">
		<insertChild id="B0D8B5E518B4D218"/><!-- LE 20% Energy -->
		<insertChild id="59E09B0CF459D90C"/><!--  -->
		<insertChild id="32FAB82877141DC3"/><!--  -->
		<insertChild id="D08AB0DECF3DE8EC"/><!-- Cast -->
	</node>
	<node name="" type="Not" id="59E09B0CF459D90C">
		<insertChild id="82FBB0F1B6B6800B"/><!-- Mounted -->
	</node>
	<node name="Mounted" type="UnitHasBehavior" id="82FBB0F1B6B6800B">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="Mounted"/>
	</node>
	<node name="Cast" type="AbilityEnqueue" id="D08AB0DECF3DE8EC">
		<property name="Ability" valueSource="literal" value="BarbarianShotofFury"/>
	</node>
	<node name="" type="Not" id="32FAB82877141DC3">
		<insertChild id="D12208B0237E723F"/><!-- Ancient Spear -->
	</node>
	<node name="Ancient Spear" type="AbilityUsable" id="D12208B0237E723F">
		<property name="Ability" valueSource="literal" value="BarbarianAncientSpear"/>
	</node>
	<node name="Ferocious Healing" type="AbilityUsable" id="E2F318F17036B5E2">
		<property name="Ability" valueSource="literal" value="BarbarianFerociousHealing"/>
		<insertChild id="96919544350A4D0D"/><!-- Ferocious Healing -->
	</node>
	<node name="Ferocious Healing" type="And" id="96919544350A4D0D">
		<insertChild id="B0D8381140A99EAB"/><!-- Use Cases -->
		<insertChild id="EF719BF42E60DF52"/><!--  -->
		<insertChild id="1A75487578BB8E91"/><!--  -->
		<insertChild id="CD9DA897A5B4B50C"/><!-- Cast -->
	</node>
	<node name="Cast" type="AbilityEnqueue" id="CD9DA897A5B4B50C">
		<property name="Ability" valueSource="literal" value="BarbarianFerociousHealing"/>
	</node>
	<node name="GE 60% Energy" type="EnergyFraction" id="8B2C57D6683E41C6">
		<property name="EnergyFraction" valueSource="literal" value="0.6"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="" type="Not" id="EF719BF42E60DF52">
		<insertChild id="7EC6118D971C8A1D"/><!-- Mounted -->
	</node>
	<node name="Mounted" type="UnitHasBehavior" id="7EC6118D971C8A1D">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="Mounted"/>
	</node>
	<node name="LE 75%" type="LifeFraction" id="5F5F5B57CF20F217">
		<property name="LifeFraction" valueSource="literal" value="0.75"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="&gt; 50% Health" type="LifeFraction" id="872A385289E482F5">
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="Whirlwind" type="AbilityUsable" id="8928C038A88F046F">
		<property name="Ability" valueSource="literal" value="BarbarianWhirlwind"/>
		<insertChild id="D2955CFF86B2D2AA"/><!-- Whirlwind -->
	</node>
	<node name="Whirlwind" type="And" id="D2955CFF86B2D2AA">
		<variable name="Whirlwind Radius" type="Number" valueSource="lookup" value="Effect,BarbarianWhirlwindSearchArea,AreaArray[0].Radius"/>
		<variable name="Whirlwind Search Bonus" type="Number" value="1"/>
		<insertChild id="735D596B525A5A54"/><!-- Target Selection -->
		<insertChild id="7F3E2BA716F0BF3B"/><!-- Cast -->
	</node>
	<node name="Cast" type="Ability" id="7F3E2BA716F0BF3B">
		<property name="Ability" valueSource="literal" value="BarbarianWhirlwind"/>
	</node>
	<node name="Target Selection" type="Or" id="735D596B525A5A54">
		<variable name="Dummy Output" type="Point"/>
		<insertChild id="BC43C7339372CCA5"/><!-- LE 70% -->
		<insertChild id="4117A0DEC3848798"/><!-- 2+ Heroes -->
		<insertChild id="C8B457318588EC8F"/><!-- 4 of Any Enemy in Range -->
		<insertChild id="0482B814E65B019E"/><!-- 3 of Any Hostile Unit in Range -->
	</node>
	<node name="No Enemies in Range" type="UnitCount" id="42B5D7A758AE745E">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Radius Plus Buffer"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<property name="TargetTypes" valueSource="literal" value="Creep,Minion,Heroic,Summoned,MapCreature"/>
	</node>
	<node name="Cast Cancel" type="AbilityEnqueue" id="67E789A2614976DD">
		<property name="Ability" valueSource="literal" value="BarbarianWhirlwindCancel"/>
		<property name="DoNotThrottle" valueSource="literal" value="true"/>
	</node>
	<node name="Whirlwind Active" type="UnitHasBehavior" id="66F173822133D1BA">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="BarbarianWhirlwindChannel"/>
	</node>
	<node name="Whirlwind Active" type="And" id="3E4EB088730155CB">
		<insertChild id="66F173822133D1BA"/><!-- Whirlwind Active -->
		<insertChild id="6943D9D1F26B9288"/><!-- Health > 50% -->
		<insertChild id="CFD1AFBEF3EBC194"/><!--  -->
	</node>
	<node name="" type="IfElse" id="CFD1AFBEF3EBC194">
		<variable name="Whirlwind Radius Plus Buffer" type="Number" value="5"/>
		<insertChild id="42B5D7A758AE745E"/><!-- No Enemies in Range -->
		<insertChild id="67E789A2614976DD"/><!-- Cast Cancel -->
		<insertChild id="242B630BF42653E8"/><!-- Move for AoE -->
	</node>
	<node name="Move for AoE" type="And" id="242B630BF42653E8">
		<variable name="Whirlwind Target Point" type="Point"/>
		<variable name="Whirlwind Radius" type="Number" valueSource="lookup" value="Effect,BarbarianWhirlwindSearchArea,AreaArray[0].Radius"/>
		<variable name="Whirlwind Scan Range" type="Number" value="3"/>
		<insertChild id="17F7B461D1982C26"/><!--  -->
		<insertChild id="E907BB5077E136B9"/><!-- Move to AoE point -->
	</node>
	<node name="Move to AoE point" type="HeroMoveToPoint" id="E907BB5077E136B9">
		<property name="TargetPosition" valueSource="variable" value="Whirlwind Target Point"/>
	</node>
	<node name="Best Enemy AoE Point" type="FindBestAOEPoint" id="6D5046CB687131B6">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AOERadius" valueSource="variable" value="Whirlwind Radius"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Scan Range"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="OutputTarget" value="Whirlwind Target Point"/>
		<property name="MinTargets" valueSource="literal" value="1"/>
		<property name="TargetTypes" valueSource="literal" value="Minion,Heroic,Summoned"/>
	</node>
	<node name="Engage Hero" type="And" id="AE5080C6B04C5804">
		<insertChild id="872A385289E482F5"/><!-- > 50% Health -->
		<insertChild id="7D02D0443E208D8C"/><!-- No Hero Adjacent -->
		<insertChild id="73344AF1070EC207"/><!-- Find Enemy Hero -->
	</node>
	<node name="Generate Fury on Hero" type="And" id="640B6F3A967154DA">
		<insertChild id="EC875AD56F142FDA"/><!-- > 50% Health -->
		<insertChild id="00314FB156EA79DB"/><!--  -->
		<insertChild id="AD3B7117F2E938F7"/><!-- Find Enemy Hero -->
	</node>
	<node name="&gt; 50% Health" type="LifeFraction" id="EC875AD56F142FDA">
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="Find Enemy Hero" type="FindBestTarget" id="AD3B7117F2E938F7">
		<property name="PredictionSeconds" valueSource="literal" value="0.1875"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="MissileRadius" valueSource="variable" value="Ancient Spear Half Width"/>
		<property name="TargetBlockingTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Ancient Spear Length"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="OutputTarget" value="Ancient Spear Target Unit"/>
	</node>
	<node name="LE 30% Energy" type="EnergyFraction" id="0A5FF898B8203746">
		<property name="EnergyFraction" valueSource="literal" value="0.3"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="Generate Fury on non-Hero" type="And" id="94D8C900528B774A">
		<insertChild id="9996808B5EFAB01D"/><!--  -->
		<insertChild id="9DE43EFF06FA0980"/><!-- No Hero Nearby -->
		<insertChild id="2BDFF4448F4D7734"/><!-- Target Selection -->
	</node>
	<node name="" type="Or" id="17F7B461D1982C26">
		<insertChild id="6D5046CB687131B6"/><!-- Best Enemy AoE Point -->
		<insertChild id="EAC532719E0C36E5"/><!-- Best Hostile AoE Point -->
	</node>
	<node name="Best Hostile AoE Point" type="FindBestAOEPoint" id="EAC532719E0C36E5">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AOERadius" valueSource="variable" value="Whirlwind Radius"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Scan Range"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="OutputTarget" value="Whirlwind Target Point"/>
		<property name="TargetTypes" valueSource="literal" value="Creep,MapCreature"/>
		<property name="MinTargets" valueSource="literal" value="1"/>
	</node>
	<node name="Use Cases" type="Or" id="B0D8381140A99EAB">
		<insertChild id="7A2202456998DCEB"/><!-- High Health -->
		<insertChild id="393F7DB7B0F771B6"/><!-- LE 50% -->
	</node>
	<node name="High Health" type="And" id="7A2202456998DCEB">
		<insertChild id="5F5F5B57CF20F217"/><!-- LE 75% -->
		<insertChild id="8B2C57D6683E41C6"/><!-- GE 60% Energy -->
	</node>
	<node name="LE 50%" type="LifeFraction" id="393F7DB7B0F771B6">
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="1+ Hero" type="FindBestAOEPoint" id="6A88A18C76CEE4F5">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AOERadius" valueSource="variable" value="Whirlwind Radius"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Search Bonus"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="OutputTarget" value="Dummy Output"/>
		<property name="MinTargets" valueSource="literal" value="1"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
	</node>
	<node name="2+ Heroes" type="FindBestAOEPoint" id="4117A0DEC3848798">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AOERadius" valueSource="variable" value="Whirlwind Radius"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Search Bonus"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="OutputTarget" value="Dummy Output"/>
		<property name="MinTargets" valueSource="literal" value="2"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
	</node>
	<node name="4 of Any Enemy in Range" type="FindBestAOEPoint" id="C8B457318588EC8F">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AOERadius" valueSource="variable" value="Whirlwind Radius"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Search Bonus"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="OutputTarget" value="Dummy Output"/>
		<property name="MinTargets" valueSource="literal" value="4"/>
		<property name="TargetTypes" valueSource="literal" value="Minion,Heroic,Summoned"/>
	</node>
	<node name="3 of Any Hostile Unit in Range" type="FindBestAOEPoint" id="0482B814E65B019E">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AOERadius" valueSource="variable" value="Whirlwind Radius"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Search Bonus"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="OutputTarget" value="Dummy Output"/>
		<property name="MinTargets" valueSource="literal" value="3"/>
		<property name="TargetTypes" valueSource="literal" value="Creep,MapCreature"/>
	</node>
	<node name="Seismic Slam" type="AbilityUsable" id="A446FFF0A1BFA401">
		<property name="Ability" valueSource="literal" value="BarbarianSeismicSlam"/>
		<insertChild id="FA2AC057399F4197"/><!-- Seismic Slam -->
	</node>
	<node name="Seismic Slam" type="And" id="FA2AC057399F4197">
		<variable name="Seismic Slam Target Unit" type="Unit"/>
		<variable name="Seismic Slam Range" type="Number" valueSource="lookup" value="Abil,BarbarianSeismicSlam,Range"/>
		<insertChild id="03B3D510DE70A532"/><!-- Fury Throttling -->
		<insertChild id="0120FF5140FCCE25"/><!-- Cast -->
	</node>
	<node name="Cast" type="Ability" id="0120FF5140FCCE25">
		<property name="Ability" valueSource="literal" value="BarbarianSeismicSlam"/>
		<property name="TargetUnit" valueSource="variable" value="Seismic Slam Target Unit"/>
	</node>
	<node name="Find Critical Enemy Hero" type="FindBestTarget" id="1818C709FC0A3E70">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.25"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
	</node>
	<node name="Fury Throttling" type="Or" id="03B3D510DE70A532">
		<insertChild id="1818C709FC0A3E70"/><!-- Find Critical Enemy Hero -->
		<insertChild id="D0A55EE758B45789"/><!-- High Fury or Discount Slam -->
		<insertChild id="2D4A303D2DE1B1F3"/><!-- GE 33% Energy -->
	</node>
	<node name="GE 66% Energy" type="EnergyFraction" id="77D127521811BAD7">
		<property name="EnergyFraction" valueSource="literal" value="0.66"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="GE 33% Energy" type="EnergyFraction" id="2D4A303D2DE1B1F3">
		<property name="EnergyFraction" valueSource="literal" value="0.33"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
		<insertChild id="47293D6C9C72B4E9"/><!-- Target Selection -->
	</node>
	<node name="Target Selection" type="Or" id="2F7C0CFB9B0F68F4">
		<insertChild id="0D6F5FDB214C54F2"/><!-- Find Enemy Hero -->
		<insertChild id="FE0A40087029E535"/><!-- No Hero Nearby -->
	</node>
	<node name="Find Enemy Hero" type="FindBestTarget" id="0D6F5FDB214C54F2">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
	</node>
	<node name="Find Enemy Tower" type="FindBestTarget" id="B333AF9F39E39FE4">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Tower"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
	</node>
	<node name="Find Enemy Structure, Map Boss or Merc" type="FindBestTarget" id="BA2D449B2B728068">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Merc,MapBoss,AITargetableStructure"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
	</node>
	<node name="Find Merc or Map Boss" type="FindBestTarget" id="F92C49E8B286E4C0">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Creep,MapBoss"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.99"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
	</node>
	<node name="No Hero Nearby" type="UnitCount" id="FE0A40087029E535">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="literal" value="6"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<insertChild id="01F38EB10140F386"/><!-- Non Hero Targets -->
	</node>
	<node name="Non Hero Targets" type="Or" id="01F38EB10140F386">
		<insertChild id="B333AF9F39E39FE4"/><!-- Find Enemy Tower -->
		<insertChild id="BA2D449B2B728068"/><!-- Find Enemy Structure, Map Boss or Merc -->
		<insertChild id="F92C49E8B286E4C0"/><!-- Find Merc or Map Boss -->
	</node>
	<node name="LE 70%" type="LifeFraction" id="BC43C7339372CCA5">
		<property name="LifeFraction" valueSource="literal" value="0.7"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
		<insertChild id="FEE383B0C9B448E0"/><!--  -->
	</node>
	<node name="Target Selection" type="Or" id="47293D6C9C72B4E9">
		<insertChild id="C7B8877037A9AB94"/><!-- Find 50% Enemy Hero -->
		<insertChild id="2AE69534CDC55C71"/><!-- No Hero Nearby -->
	</node>
	<node name="Find 50% Enemy Hero" type="FindBestTarget" id="C7B8877037A9AB94">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.5"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
	</node>
	<node name="No Hero Nearby" type="UnitCount" id="2AE69534CDC55C71">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="literal" value="10"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<insertChild id="8D9503CFB60AAD6E"/><!-- Non Hero Targets -->
	</node>
	<node name="Non Hero Targets" type="Or" id="8D9503CFB60AAD6E">
		<insertChild id="5EEFDB49E8431C60"/><!-- Find Enemy Tower -->
		<insertChild id="943972D136B699B3"/><!-- Find Enemy Structure, Map Boss or Merc -->
		<insertChild id="F75D3C314E8FDD01"/><!-- Find Merc or Map Boss -->
	</node>
	<node name="Find Enemy Tower" type="FindBestTarget" id="5EEFDB49E8431C60">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Tower"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
	</node>
	<node name="Find Enemy Structure, Map Boss or Merc" type="FindBestTarget" id="943972D136B699B3">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Merc,MapBoss,AITargetableStructure"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
	</node>
	<node name="High Fury or Discount Slam" type="And" id="D0A55EE758B45789">
		<insertChild id="40369ABCF9D069B4"/><!-- Requirements -->
		<insertChild id="2F7C0CFB9B0F68F4"/><!-- Target Selection -->
	</node>
	<node name="Requirements" type="Or" id="40369ABCF9D069B4">
		<insertChild id="77D127521811BAD7"/><!-- GE 66% Energy -->
		<insertChild id="E318FD0EB3969294"/><!-- Aftershock Behavior -->
	</node>
	<node name="Aftershock Behavior" type="UnitHasBehavior" id="E318FD0EB3969294">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="BarbarianSeismicSlamAftershockFuryReductionBehavior"/>
	</node>
	<node name="Ignore Pain" type="AbilityUsable" id="88C21EEEDF12EBFA">
		<property name="Ability" valueSource="literal" value="SonyaTalentIgnorePain"/>
		<insertChild id="4F2745D749402159"/><!-- Ignore Pain -->
	</node>
	<node name="Ignore Pain" type="And" id="4F2745D749402159">
		<insertChild id="28EFEFCC1A2ECD26"/><!-- Use Cases -->
		<insertChild id="58E93841B439FBDC"/><!-- In Combat -->
		<insertChild id="2674F2AACE12620A"/><!-- Cast -->
	</node>
	<node name="Use Cases" type="Or" id="28EFEFCC1A2ECD26">
		<insertChild id="FB50DDACB5C4767A"/><!--  -->
		<insertChild id="9FE8F8645B32B875"/><!--  -->
		<insertChild id="510EA5D6F4196FAE"/><!-- 20% Health -->
	</node>
	<node name="" type="And" id="FB50DDACB5C4767A">
		<insertChild id="09BEAE2817CF320E"/><!-- Two Enemy Heroes -->
		<insertChild id="9BD3B18B3423CF91"/><!-- Less than 70% -->
	</node>
	<node name="Two Enemy Heroes" type="UnitCount" id="09BEAE2817CF320E">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MaxLifeFraction" valueSource="literal" value="1"/>
	</node>
	<node name="Less than 70%" type="LifeFraction" id="9BD3B18B3423CF91">
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="LifeFraction" valueSource="literal" value="0.7"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="" type="And" id="9FE8F8645B32B875">
		<insertChild id="DC01D609262E9BDD"/><!-- One Enemy Hero -->
		<insertChild id="46D1C5F77BB98196"/><!-- Less than Half -->
	</node>
	<node name="One Enemy Hero" type="UnitCount" id="DC01D609262E9BDD">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MaxLifeFraction" valueSource="literal" value="1"/>
	</node>
	<node name="Less than Half" type="LifeFraction" id="46D1C5F77BB98196">
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="20% Health" type="LifeFraction" id="510EA5D6F4196FAE">
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="LifeFraction" valueSource="literal" value="0.2"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="In Combat" type="Validator" id="58E93841B439FBDC">
		<property name="Target" valueSource="intrinsic" value="Self"/>
		<property name="Validator" valueSource="literal" value="CasterInCombat"/>
	</node>
	<node name="Cast" type="AbilityEnqueue" id="2674F2AACE12620A">
		<property name="Ability" valueSource="literal" value="SonyaTalentIgnorePain"/>
	</node>
	<node name="Nerves of Steel" type="AbilityUsable" id="FF6F1929742D587B">
		<property name="Ability" valueSource="literal" value="SonyaTalentNervesOfSteel"/>
		<insertChild id="84FF417953BADBB7"/><!-- Nerves of Steel -->
	</node>
	<node name="Nerves of Steel" type="And" id="84FF417953BADBB7">
		<insertChild id="6684A297AF645910"/><!-- Use Cases -->
		<insertChild id="DA716236744FA4DE"/><!-- In Combat -->
		<insertChild id="38825EDD13F79C6B"/><!-- Cast -->
	</node>
	<node name="Use Cases" type="Or" id="6684A297AF645910">
		<insertChild id="873EA33EF54F3BB2"/><!--  -->
		<insertChild id="6A7CD70664C28866"/><!--  -->
		<insertChild id="E4AF8362D1153B6F"/><!-- 20% Health -->
	</node>
	<node name="" type="And" id="873EA33EF54F3BB2">
		<insertChild id="62539F026ED5E416"/><!-- Two Enemy Heroes -->
		<insertChild id="D10C23DBC88B870D"/><!-- Less than 70% -->
	</node>
	<node name="Two Enemy Heroes" type="UnitCount" id="62539F026ED5E416">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MaxLifeFraction" valueSource="literal" value="1"/>
	</node>
	<node name="Less than 70%" type="LifeFraction" id="D10C23DBC88B870D">
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="LifeFraction" valueSource="literal" value="0.7"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="" type="And" id="6A7CD70664C28866">
		<insertChild id="23B699BE21B1D775"/><!-- One Enemy Hero -->
		<insertChild id="A5CDB2809D8EF90A"/><!-- Less than Half -->
	</node>
	<node name="One Enemy Hero" type="UnitCount" id="23B699BE21B1D775">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MaxLifeFraction" valueSource="literal" value="1"/>
	</node>
	<node name="Less than Half" type="LifeFraction" id="A5CDB2809D8EF90A">
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="20% Health" type="LifeFraction" id="E4AF8362D1153B6F">
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="LifeFraction" valueSource="literal" value="0.2"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="In Combat" type="Validator" id="DA716236744FA4DE">
		<property name="Target" valueSource="intrinsic" value="Self"/>
		<property name="Validator" valueSource="literal" value="CasterInCombat"/>
	</node>
	<node name="Cast" type="AbilityEnqueue" id="38825EDD13F79C6B">
		<property name="Ability" valueSource="literal" value="SonyaTalentNervesOfSteel"/>
	</node>
	<node name="Leap" type="AbilityUsable" id="69D99F5352D802EB">
		<property name="Ability" valueSource="literal" value="BarbarianLeap"/>
		<insertChild id="124918E82D4F993E"/><!-- Leap -->
	</node>
	<node name="Leap" type="And" id="124918E82D4F993E">
		<variable name="Leap Target Point" type="Point"/>
		<variable name="Leap Range" type="Number" valueSource="lookup" value="Abil,BarbarianLeap,Range"/>
		<variable name="Leap AoE Radius" type="Number" valueSource="lookup" value="Effect,BarbarianLeapSearchArea,AreaArray[0].Radius"/>
		<insertChild id="B1BD3968F1000D8D"/><!-- 50% Health -->
		<insertChild id="8984D6D84171C7C5"/><!-- Fight Checks -->
		<insertChild id="0D355310DA979890"/><!-- Cast -->
	</node>
	<node name="Cast" type="Ability" id="0D355310DA979890">
		<property name="Ability" valueSource="literal" value="BarbarianLeap"/>
		<property name="TargetPoint" valueSource="variable" value="Leap Target Point"/>
	</node>
	<node name="Fight Checks" type="Or" id="8984D6D84171C7C5">
		<insertChild id="00FCC09CBC6E0A2B"/><!-- Team Fight Check -->
		<insertChild id="E3BF489B0C227674"/><!-- Winning Fight Check -->
	</node>
	<node name="Team Fight Check" type="And" id="00FCC09CBC6E0A2B">
		<insertChild id="94F6067581914C84"/><!-- 2+ Enemy Heroes -->
		<insertChild id="79531AD9C0CE720B"/><!-- 2+ Allies Nearby -->
	</node>
	<node name="2+ Enemy Heroes" type="FindBestAOEPoint" id="94F6067581914C84">
		<property name="OutputTarget" value="Leap Target Point"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Leap Range"/>
		<property name="MinTargets" valueSource="literal" value="2"/>
		<property name="AOERadius" valueSource="variable" value="Leap AoE Radius"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="PredictionSeconds" valueSource="literal" value="0.5625"/>
	</node>
	<node name="2+ Allies Nearby" type="UnitCount" id="79531AD9C0CE720B">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="SearchCenter" valueSource="variable" value="Leap Target Point"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MinLifeFraction" valueSource="literal" value="0.5"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="2+ 60% Enemy Heroes" type="FindBestAOEPoint" id="156235E8EE1242A2">
		<property name="OutputTarget" value="Leap Target Point"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Leap Range"/>
		<property name="MinTargets" valueSource="literal" value="2"/>
		<property name="AOERadius" valueSource="variable" value="Leap AoE Radius"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.6"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="PredictionSeconds" valueSource="literal" value="0.5625"/>
	</node>
	<node name="1+ Allies Nearby" type="UnitCount" id="D925AA69DC6F48A9">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MinLifeFraction" valueSource="literal" value="0.5"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="SearchCenter" valueSource="variable" value="Leap Target Point"/>
	</node>
	<node name="Winning Fight Check" type="And" id="E3BF489B0C227674">
		<insertChild id="156235E8EE1242A2"/><!-- 2+ 60% Enemy Heroes -->
		<insertChild id="D925AA69DC6F48A9"/><!-- 1+ Allies Nearby -->
	</node>
	<node name="50% Health" type="LifeFraction" id="B1BD3968F1000D8D">
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="Arreat Crater Active" type="And" id="8B229A46831D648B">
		<insertChild id="1E40A7F9556DE7FF"/><!-- Arreat Crater Active -->
		<insertChild id="4E6C985B5B3C5A18"/><!-- No Enemy Heroes Nearby -->
		<insertChild id="1B60D1CDB4C78A9A"/><!-- Cast Cancel -->
	</node>
	<node name="Arreat Crater Active" type="UnitHasBehavior" id="1E40A7F9556DE7FF">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="BarbarianLeapArreatCraterDummyBehavior"/>
	</node>
	<node name="No Enemy Heroes Nearby" type="UnitCount" id="4E6C985B5B3C5A18">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="literal" value="3"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
	</node>
	<node name="Cast Cancel" type="AbilityEnqueue" id="1B60D1CDB4C78A9A">
		<property name="Ability" valueSource="literal" value="BarbarianCancelLeapArreatCrater"/>
		<property name="DoNotThrottle" valueSource="literal" value="true"/>
	</node>
	<node name="" type="Or" id="00314FB156EA79DB">
		<insertChild id="0A5FF898B8203746"/><!-- LE 30% Energy -->
		<insertChild id="37AFA776B934E704"/><!-- Wrath of the Berserker -->
	</node>
	<node name="Wrath of the Berserker" type="UnitHasBehavior" id="37AFA776B934E704">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="BarbarianWrathoftheBerserkerBase"/>
	</node>
	<node name="" type="Or" id="9996808B5EFAB01D">
		<insertChild id="E5B48547FB0199DE"/><!-- LE 30% Energy -->
		<insertChild id="0ECF22A0ECC9AF54"/><!-- Wrath of the Berserker -->
	</node>
	<node name="LE 30% Energy" type="EnergyFraction" id="E5B48547FB0199DE">
		<property name="EnergyFraction" valueSource="literal" value="0.3"/>
		<property name="Comparison" valueSource="literal" value="LE"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="Wrath of the Berserker" type="UnitHasBehavior" id="0ECF22A0ECC9AF54">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="BarbarianWrathoftheBerserkerBase"/>
	</node>
	<node name="Wrath of the Berserker" type="AbilityUsable" id="E04BCA10C6726AC2">
		<property name="Ability" valueSource="literal" value="BarbarianWrathoftheBerserker"/>
		<insertChild id="642FFB7FEC2E3128"/><!-- Wrath of the Berserker -->
	</node>
	<node name="Wrath of the Berserker" type="And" id="642FFB7FEC2E3128">
		<insertChild id="F28B0EF80A31B6B8"/><!-- 50% Health -->
		<insertChild id="D94A365102A1475B"/><!-- Fight Checks -->
		<insertChild id="945B7EC4D472A73F"/><!-- Wrath of the Berserker -->
	</node>
	<node name="50% Health" type="LifeFraction" id="F28B0EF80A31B6B8">
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
	<node name="Fight Checks" type="Or" id="D94A365102A1475B">
		<insertChild id="9C4EE52DF2ADD5B4"/><!-- Team Fight Check -->
		<insertChild id="D110629D6EF86BEB"/><!-- Winning Fight Check -->
		<insertChild id="B9D2B4669555952F"/><!-- No Hero Nearby -->
	</node>
	<node name="Team Fight Check" type="And" id="9C4EE52DF2ADD5B4">
		<insertChild id="E9F5EFD135B5206C"/><!-- 2+ Enemy Heroes -->
		<insertChild id="8AB432D8F0BB7B6C"/><!-- 2+ Allies Nearby -->
	</node>
	<node name="2+ Allies Nearby" type="UnitCount" id="8AB432D8F0BB7B6C">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MinLifeFraction" valueSource="literal" value="0.5"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="Winning Fight Check" type="And" id="D110629D6EF86BEB">
		<insertChild id="66B62052872B5C66"/><!-- 2+ 60% Enemy Heroes -->
		<insertChild id="2B3AACF159430ED8"/><!-- 1+ Allies Nearby -->
	</node>
	<node name="1+ Allies Nearby" type="UnitCount" id="2B3AACF159430ED8">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Ally"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="MinLifeFraction" valueSource="literal" value="0.5"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
	</node>
	<node name="Wrath of the Berserker" type="AbilityEnqueue" id="945B7EC4D472A73F">
		<property name="Ability" valueSource="literal" value="BarbarianWrathoftheBerserker"/>
	</node>
	<node name="2+ Enemy Heroes" type="UnitCount" id="E9F5EFD135B5206C">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
	</node>
	<node name="2+ 60% Enemy Heroes" type="UnitCount" id="66B62052872B5C66">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="literal" value="8"/>
		<property name="TargetCount" valueSource="literal" value="2"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.6"/>
	</node>
	<node name="No Hero Nearby" type="UnitCount" id="B9D2B4669555952F">
		<property name="TargetTypes" valueSource="literal" value="Heroic"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="MaxTargetDistance" valueSource="literal" value="10"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<insertChild id="CD26F4E6F771F2C1"/><!-- 1+ 50% Enemy Structure or Map Boss -->
	</node>
	<node name="1+ 50% Enemy Structure or Map Boss" type="UnitCount" id="CD26F4E6F771F2C1">
		<property name="TargetTypes" valueSource="literal" value="MapBoss,AITargetableStructure"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="MaxTargetDistance" valueSource="literal" value="6"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.5"/>
	</node>
	<node name="" type="Or" id="FEE383B0C9B448E0">
		<insertChild id="6A88A18C76CEE4F5"/><!-- 1+ Hero -->
		<insertChild id="90EBCAA5AD878A53"/><!-- 2 of Any Hostile Unit in Range -->
	</node>
	<node name="2 of Any Hostile Unit in Range" type="FindBestAOEPoint" id="90EBCAA5AD878A53">
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
		<property name="AOERadius" valueSource="variable" value="Whirlwind Radius"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Whirlwind Search Bonus"/>
		<property name="FilterTargetsBehindGate" valueSource="literal" value="true"/>
		<property name="OutputTarget" value="Dummy Output"/>
		<property name="MinTargets" valueSource="literal" value="2"/>
		<property name="TargetTypes" valueSource="literal" value="Creep,MapCreature"/>
	</node>
	<node name="" type="Not" id="1A75487578BB8E91">
		<insertChild id="F686B1AD65F3BD52"/><!-- Is In Base -->
	</node>
	<node name="Is In Base" type="UnitHasBehavior" id="F686B1AD65F3BD52">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Behavior" valueSource="literal" value="HomeShieldProtection"/>
	</node>
	<node name="Find Merc or Map Boss" type="FindBestTarget" id="F75D3C314E8FDD01">
		<property name="OutputTarget" value="Seismic Slam Target Unit"/>
		<property name="TargetTypes" valueSource="literal" value="Creep,MapBoss"/>
		<property name="AddUnitRadiusToMaxTargetDistance" valueSource="intrinsic" value="Self"/>
		<property name="LifeFractionFactor" valueSource="literal" value="3"/>
		<property name="MaxLifeFraction" valueSource="literal" value="0.99"/>
		<property name="MaxTargetDistance" valueSource="variable" value="Seismic Slam Range"/>
		<property name="RequiredTypes" valueSource="literal" value="Enemy"/>
	</node>
	<node name="Find Safest Point" type="FindSafePoint" id="4AE12CC5DE3DB3CE">
		<property name="OutputTarget" value="Ancient Spear Safe Position"/>
		<property name="FleeDistance" valueSource="variable" value="Ancient Spear Length"/>
		<property name="PreferredPoint" valueSource="intrinsic" value="SafePos"/>
	</node>
	<node name="Talent Upgrades" type="Sequence" id="D5D0281DE2198568">
		<property name="IgnoreChildFailures" valueSource="literal" value="true"/>
		<insertChild id="0E6332517AC1D517"/><!-- Composite Spear -->
	</node>
	<node name="Composite Spear" type="UnitHasTalent" id="0E6332517AC1D517">
		<property name="Unit" valueSource="intrinsic" value="Self"/>
		<property name="Talent" valueSource="literal" value="BarbarianMasteryCompositeSpearAncientSpear"/>
		<insertChild id="1C8751C4BE018FEC"/><!-- Increase Range -->
	</node>
	<node name="Increase Range" type="SetNumber" id="1C8751C4BE018FEC">
		<property name="Variable" value="Ancient Spear Length"/>
		<property name="Value" valueSource="literal" value="10.45"/>
	</node>
	<node name="Not Rooted" type="FilterBehaviorCategory" id="CC0719315CF38E9F">
		<property name="ExcludeCategories" valueSource="literal" value="DebuffRoot"/>
		<insertChild id="077EA9009B305D8E"/><!-- Self -->
	</node>
	<node name="Self" type="UnitCount" id="077EA9009B305D8E">
		<property name="TargetTypes" valueSource="literal" value="Self"/>
		<property name="RequiredTypes" valueSource="literal" value="Player"/>
		<property name="MaxTargetDistance" valueSource="literal" value="1"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
	</node>
	<node name="Not Rooted" type="FilterBehaviorCategory" id="13268DC1E6698F9D">
		<property name="ExcludeCategories" valueSource="literal" value="DebuffRoot"/>
		<insertChild id="457DD20AC32DD400"/><!-- Self -->
	</node>
	<node name="Self" type="UnitCount" id="457DD20AC32DD400">
		<property name="TargetTypes" valueSource="literal" value="Self"/>
		<property name="RequiredTypes" valueSource="literal" value="Player"/>
		<property name="MaxTargetDistance" valueSource="literal" value="1"/>
		<property name="Comparison" valueSource="literal" value="Eq"/>
		<property name="TargetCount" valueSource="literal" value="1"/>
	</node>
	<node name="Health &gt; 50%" type="LifeFraction" id="6943D9D1F26B9288">
		<property name="LifeFraction" valueSource="literal" value="0.5"/>
		<property name="Target" valueSource="intrinsic" value="Self"/>
	</node>
</tree>