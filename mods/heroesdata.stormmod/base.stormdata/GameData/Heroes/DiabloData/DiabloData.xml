<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<Catalog>
    <CAbilEffectTarget id="DiabloHellgate" parent="HeroGenericSelfTeleportAbility">
        <Effect value="DiabloHellgateTeleport"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="100"/>
        </Cost>
        <Range value="7.2"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloHellgateTalent"/>
        <CursorEffect value="ApocalypseSearch"/>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="DiabloFearfulPresence">
        <PrepEffect value="DismountDecloakCasterSet"/>
        <Effect value="DiabloFearfulPresenceActivatedSearch"/>
        <Flags index="CanToggleAutoCast" value="0"/>
        <Flags index="NoDeceleration" value="1"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="30"/>
        </Cost>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloFearfulPresence">
            <Flags index="AllowSelfCast" value="1"/>
        </CmdButtonArray>
    </CAbilEffectInstant>
    <CAbilEffectInstant id="DiabloTalentLordOfTerror">
        <PrepEffect value="DismountDecloakCasterSet"/>
        <Effect value="DiabloLordOfTerrorSearch"/>
        <Flags index="NoDeceleration" value="1"/>
        <Cost>
            <Cooldown Location="Unit" TimeUse="60"/>
        </Cost>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloLordOfTerror"/>
    </CAbilEffectInstant>
    <CAbilEffectTarget id="DiabloOverpower">
        <PrepEffect value="DismountDecloakCasterSet"/>
        <Effect value="DiabloOverpowerCheckForDisplaceableInitialSet"/>
        <Flags index="ClearLastAttackTargetOutOfRange" value="1"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Cost>
            <Vital index="Energy" value="60"/>
            <Charge>
                <CountMax value="1"/>
                <CountStart value="1"/>
                <CountUse value="1"/>
                <HideCount value="1"/>
                <Location value="Unit"/>
                <TimeUse value="12"/>
            </Charge>
            <Cooldown Location="Unit" TimeUse="0.5"/>
        </Cost>
        <TargetFilters value="-;Player,Ally,Neutral,Missile,Item,Stasis,Dead,Hidden,Invulnerable,Unstoppable"/>
        <Range value="1"/>
        <RangeSlop value="5"/>
        <CastIntroTime value="0.0625"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <SetLastTarget value="Attack"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloOverpower"/>
        <AbilityCategories index="Chase" value="1"/>
        <AbilityCategories index="Control" value="1"/>
    </CAbilEffectTarget>
    <CAbilEffectTarget id="DiabloShadowCharge">
        <Effect value="DiabloShadowChargeInitialSet"/>
        <Flags index="BestUnit" value="0"/>
        <Flags index="ClearLastAttackTargetOutOfRange" value="1"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Cost>
            <Vital index="Energy" value="60"/>
            <Charge Location="Unit"/>
            <Cooldown Location="Unit" TimeUse="12"/>
        </Cost>
        <TargetFilters value="Visible;Player,Ally,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
        <Range value="5.75"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloShadowCharge"/>
        <CursorEffect value="DiabloShadowChargeDummySearch"/>
        <Arc value="360"/>
        <PrepEffect value="DismountDecloakCasterSet"/>
        <AbilityCategories index="Chase" value="1"/>
        <AbilityCategories index="Control" value="1"/>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="LightningBreathCancel">
        <ParentAbil value="DiabloLightningBreath"/>
        <Effect value="DiabloLightningBreathRemoveControllerBehavior"/>
        <Flags index="Transient" value="1"/>
        <Cost>
            <Charge Link="Abil/DiabloLightningBreathCancel"/>
            <Cooldown>
                <Link value="Abil/DiabloLightningBreathCancel"/>
                <Location value="Unit"/>
                <TimeStart value="1.5"/>
                <TimeUse value="1.5"/>
            </Cooldown>
        </Cost>
        <CmdButtonArray index="Execute" AutoQueueId="" DefaultButtonFace="DiabloLightningBreathCancel" Requirements="LightningBreathTargetedActive"/>
    </CAbilEffectInstant>
    <CAbilEffectTarget id="DiabloLightningBreath">
        <Activity value="Abil/Activity/DiabloLightningBreath"/>
        <PrepEffect value="DismountDecloakCasterSet"/>
        <Effect value="DiabloLightningBreathInitialPersistent"/>
        <Flags index="ClearLastAttackTargetOutOfRange" value="1"/>
        <Flags index="RequireTargetVision" value="0"/>
        <Flags index="UpdateTarget" value="1"/>
        <Cost>
            <Vital index="Energy" value="80"/>
            <Cooldown Location="Unit" TimeUse="60"/>
        </Cost>
        <Range value="500"/>
        <Arc value="360"/>
        <ShowProgressArray index="Cast" value="1"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <CursorEffect value="DiabloLightningBreathSearchArea"/>
        <CastOutroTimeEffect value="DiabloLightningBreathInitialPersistent"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloLightningBreath" Requirements="Ultimate2Unlocked">
            <Flags index="AllowSelfCast" value="0"/>
        </CmdButtonArray>
    </CAbilEffectTarget>
    <CAbilEffectInstant id="DiabloFireStomp">
        <Effect value="DiabloFireStompInitialSet"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Cost>
            <Vital index="Energy" value="40"/>
            <Charge Link="Abil/FireStomp"/>
            <Cooldown Link="Abil/FireStomp" Location="Unit" TimeUse="6"/>
        </Cost>
        <CastIntroTime value="0.2"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloFireStomp"/>
        <PrepEffect value="DismountDecloakCasterSet"/>
    </CAbilEffectInstant>
    <CAbilEffectInstant id="DiabloApocalypse">
        <PrepEffect value="DismountDecloakCasterSet"/>
        <Effect value="DiabloApocalypseEnumerateTrackedUnits"/>
        <Flags index="ClearLastMoveTarget" value="1"/>
        <Cost>
            <Vital index="Energy" value="100"/>
            <Cooldown Location="Unit" TimeUse="100"/>
        </Cost>
        <CastIntroTime value="0.2"/>
        <UninterruptibleArray index="Cast" value="1"/>
        <UninterruptibleArray index="Channel" value="1"/>
        <UninterruptibleArray index="Finish" value="1"/>
        <CmdButtonArray index="Execute" DefaultButtonFace="DiabloApocalypse" Requirements="Ultimate1Unlocked"/>
    </CAbilEffectInstant>
    <CAccumulatorToken id="HellfireMissileDamageAccumulator" parent="BaseAccumulator">
        <MaxAccumulation value="1.2"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Scale value="0.12"/>
        <UnitSource Value="Source"/>
    </CAccumulatorToken>
    <CAccumulatorToken id="DiabloBlackSoulstoneDevilsDueTalentAccumulator" parent="BaseAccumulator">
        <MaxAccumulation value="2"/>
        <TokenId value="DiabloBlackSoulstoneDevilsDueTokenCounter"/>
        <Scale value="0.02"/>
    </CAccumulatorToken>
    <CAccumulatorToken id="DiabloBlackSoulstoneSoulShieldTalentAccumulator" parent="BaseAccumulator">
        <MaxAccumulation value="0.25"/>
        <ApplicationRule value="Add"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
        <Scale value="0.0024"/>
    </CAccumulatorToken>
    <CAccumulatorToken id="DiabloBlackSoulstoneSoulFeastTalentRegenAccumulator" parent="BaseAccumulator">
        <MaxAccumulation value="40"/>
        <ApplicationRule value="Add"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
        <Scale value="0.4"/>
    </CAccumulatorToken>
    <CAccumulatorToken id="DiabloBlackSoulstoneHealthAccumulator" parent="BaseAccumulator">
        <MaxAccumulation value="0.4"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
        <Scale value="0.004"/>
        <ApplicationRule value="Add"/>
    </CAccumulatorToken>
    <CActorSiteOpForward id="SOpPoundForwardGuide">
        <HostForward Subject="::actor.PoundTarget" Actor="Find"/>
    </CActorSiteOpForward>
    <CActorSiteOpLocalOffset id="PoundUnitOffset"/>
    <CActorSiteOpRotationExplicit id="PoundUnitRotation">
        <Forward value="0.000000,1.000000,0.000000" Y="1.000000"/>
        <IsLocal value="1"/>
    </CActorSiteOpRotationExplicit>
    <CActorSiteOpEffect id="SOpPoundCaster">
        <Location value="CasterUnit"/>
    </CActorSiteOpEffect>
    <CActorSite id="PoundGrabSite">
        <HostSiteOps Ops="SOpPoundCaster SOpAttachWeapon01"/>
        <On Terms="ActorCreation" Target="::Creator" Send="Signal PoundGrabSiteCreated"/>
    </CActorSite>
    <CActorModel id="DiabloFireStompFireDevilDamageModel" parent="StormModelAnimationStyleOneShotUnit">
        <Inherits index="BaseModelScale" value="1"/>
        <Inherits index="Scale" value="1"/>
        <On Terms="Effect.DiabloFireStompFireDevilTalentDamage.Start; At Target" Send="Create"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
        <Model value="DiabloFireDevilImpact"/>
        <AutoScaleFactor value="1.000000"/>
    </CActorModel>
    <CActorSound id="DiabloBlackSoulstoneMissileLoop" parent="SoundContinuous">
        <Host Subject="::Creator"/>
        <Sound value="Diablo_BlackSoulstone_Missile_Loop"/>
    </CActorSound>
    <CActorAction id="DiabloBlackSoulstoneHeroLaunchMissileActionActor" parent="GenericAttackPointStorm" effectImpact="DiabloBlackSoulstoneDummyImpactEffect" effectLaunch="DiabloBlackSoulstoneHeroTargetLaunchMissile">
        <LaunchSiteOps Ops="SOpMoveUpBy2"/>
        <Missile value="DiabloBlackSoulstoneHeroMissile"/>
        <ImpactSiteOps Ops="SOpAttachCenter"/>
        <ImpactAttachQuery Methods="AMFilterCenter"/>
        <ShieldFlashType value="None"/>
    </CActorAction>
    <CActorMissile id="DiabloBlackSoulstoneHeroMissile" parent="GenericAttackMissile" unitName="DiabloBlackSoulstoneHeroMissile">
        <Filter index="Ally" value="1"/>
        <Filter index="Neutral" value="1"/>
        <Filter index="Enemy" value="1"/>
        <On Terms="ActorCreation" Send="Create DiabloBlackSoulstoneMissileLoop"/>
        <On Terms="ActorDestruction" Send="DestroyParticles"/>
    </CActorMissile>
    <CActorAction id="DiabloBlackSoulstoneNonHeroLaunchMissileActionActor" parent="GenericAttackPointStorm" effectImpact="DiabloBlackSoulstoneDummyImpactEffect" effectLaunch="DiabloBlackSoulstoneNonHeroTargetLaunchMissile">
        <LaunchSiteOps Ops="SOpMoveUpBy2"/>
        <Missile value="DiabloBlackSoulstoneNonHeroMissile"/>
        <ImpactSiteOps Ops="SOpAttachCenter"/>
        <ImpactAttachQuery Methods="AMFilterCenter"/>
        <ImpactMap index="None" Sound="Diablo_BlackSoulstone_Missile_Impact_NonHero"/>
        <ShieldFlashType value="None"/>
    </CActorAction>
    <CActorMissile id="DiabloBlackSoulstoneNonHeroMissile" parent="GenericAttackMissile" unitName="DiabloBlackSoulstoneNonHeroMissile">
        <Filter index="Ally" value="1"/>
        <Filter index="Neutral" value="1"/>
        <Filter index="Enemy" value="1"/>
        <On Terms="ActorCreation" Send="Create DiabloBlackSoulstoneMissileLoop"/>
        <On Terms="ActorDestruction" Send="DestroyParticles"/>
    </CActorMissile>
    <CActorModel id="DiabloSpeedDemonSpeedRibbon" parent="StormMoveSpeedRibbon">
        <On Terms="Behavior.DemonSpeedDemonSpeedBuff.On" Send="Create"/>
        <On Terms="Behavior.DemonSpeedDemonSpeedBuff.Off" Send="AnimBracketStop BSD"/>
    </CActorModel>
    <CActorUnit id="DiabloHellgateItem" parent="StormItemBase" unitName="DiabloHellgateItem">
        <HighlightTooltip value="Unit/Name/Bogus"/>
    </CActorUnit>
    <CActorSplat id="DiabloHellgateRangeSplat" parent="StormRangeSplat">
        <Preload index="0" value="FlashoftheStormsRangeSplat"/>
        <Scale value="7.200000"/>
    </CActorSplat>
    <CActorSplat id="DiabloHellgateCursorSplat" parent="StormGuideVisualCircle" abil="DiabloHellgate">
        <Model value="DiabloHellgateCursorSplat"/>
    </CActorSplat>
    <CActorModel id="DiabloHellgateTeleportInModel" parent="StormModelAnimationStyleOneShot">
        <Flags index="VisionTestCenterOnly" value="1"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <FogVisibility value="Hidden"/>
        <On Terms="Effect.DiabloHellgateTeleport.Stop; At Source" Send="Create"/>
        <On Terms="ActorCreation" Send="Create FlashoftheStormSound"/>
        <Host Scope="Caster"/>
        <HostSiteOps Ops="SOpAttachCenterStationary SOpForwardOriginPoint"/>
    </CActorModel>
    <CActorModel id="DiabloHellgateTeleportOutModel" parent="StormModelAnimationStyleOneShot">
        <Flags index="VisionTestCenterOnly" value="1"/>
        <InheritType value="OneShot"/>
        <Inherits index="CloakEffect" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <FogVisibility value="Hidden"/>
        <On Terms="ActorCreation" Send="Create FlashoftheStormSound"/>
        <On Terms="Effect.DiabloHellgateTeleport.Start; At Source" Send="Create"/>
        <Host Subject="_Selectable"/>
        <HostSiteOps Ops="SOpAttachCenterStationary SOpForwardCasterPoint"/>
        <ModelFlags index="AllowHitTest" value="0"/>
    </CActorModel>
    <CActorModel id="DiabloHellgateModel">
        <CopySource value="_Unit"/>
        <InheritType value="OneShot"/>
        <Inherits index="BaseModelScale" value="1"/>
        <Inherits index="CastShadows" value="1"/>
        <Inherits index="CreepEngulfment" value="1"/>
        <Inherits index="Opacity" value="1"/>
        <Inherits index="Scale" value="1"/>
        <Inherits index="TeamColor" value="1"/>
        <Inherits index="TintColor" value="1"/>
        <Inherits index="Visibility" value="1"/>
        <AcceptedTransfers index="Animator" value="1"/>
        <AcceptedTransfers index="AnimProps" value="1"/>
        <AcceptedTransfers index="Model" value="1"/>
        <AcceptedTransfers index="Textures" value="1"/>
        <AcceptedTransfers index="Status" value="1"/>
        <AcceptedHostedPropTransfers index="WarpGroup" value="0"/>
        <On Terms="Effect.DiabloHellgateTeleport.Start; At Source" Send="Create"/>
        <On Terms="ActorCreation" Send="AnimHookSet HookedBaseline _Unit ::Baseline"/>
        <On Terms="ActorCreation" Send="AnimHookClear HookedBaseline"/>
        <On Terms="ActorCreation" Send="RefClear ::Host"/>
        <On Terms="ActorCreation" Send="$Spell,Forward"/>
        <On Terms="ActorCreation" Send="SetTintColor 64,64,255 0.500000"/>
        <On Terms="ActorCreation" Send="SetOpacity 0.100000 0.250000"/>
        <On Terms="ActorCreation" Send="TimerSet 0.250000 OpacityTimer"/>
        <On Terms="TimerExpired; TimerName OpacityTimer" Send="SetOpacity 0.000000 0.250000"/>
        <On Terms="ActorCreation" Send="TimerSet 0.600000 DelayDestroy"/>
        <On Terms="TimerExpired; TimerName DelayDestroy" Send="Destroy"/>
        <Host Subject="_Unit"/>
        <HostSiteOps HoldPosition="1" HoldRotation="1"/>
        <ModelFlags index="AllowHitTest" value="0"/>
    </CActorModel>
    <CActorRange id="DiabloHellgateRange" parent="StormRangeAbilPlusSplat" abil="DiabloHellgate"/>
    <CActorUnit id="DiabloFearfulPresence" parent="StormItemBase" unitName="DiabloFearfulPresence">
        <HighlightTooltip value="Unit/Name/Bogus"/>
    </CActorUnit>
    <CActorSplat id="DiabloFearfulPresenceActiveRangeSplat" parent="StormRangeSplat">
        <Scale value="5.000000"/>
    </CActorSplat>
    <CActorModel id="DiabloFearfulPresenceCastModel" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Abil.DiabloFearfulPresence.SourceCastStart" Send="Create"/>
        <HostSiteOps HoldRotation="1"/>
    </CActorModel>
    <CActorRange id="DiabloFearfulPresenceActiveRange" parent="StormRangeAbilPlusSplat" abil="DiabloFearfulPresence"/>
    <CActorSound id="DiabloFearfulPresenceCastSound" parent="SoundOneShot">
        <Flags index="SuppressSaveLoad" value="0"/>
        <InheritType value="Continuous"/>
        <Supporter Subject="::Creator"/>
        <On Terms="Abil.DiabloFearfulPresence.SourceCastStart" Send="Create"/>
        <Sound value="Diablo_FearfulPresence_Cast_Self"/>
    </CActorSound>
    <CActorSound id="HeroDiabloTauntVO" parent="SoundOneShot">
        <Sound value="Diablo_Taunt"/>
    </CActorSound>
    <CActorSound id="HeroDiabloTauntUEVO" parent="SoundOneShot">
        <Sound value="Diablo_Taunt_Evo"/>
    </CActorSound>
    <CActorModel id="DiabloBlackSoulstoneResurrectModelAllyModel" parent="StormModelAddition">
        <On Terms="Effect.DiabloBlackSoulstoneResurrectDummyPersistent.Start" Send="Create"/>
        <On Terms="ActorCreation" Send="TimerSet 5.000000 SoulStoneTimer"/>
        <On Terms="TimerExpired; TimerName SoulStoneTimer" Send="Destroy"/>
        <Model value="DiabloBlackSoulstoneModel"/>
        <FogVisibility value="Visible"/>
        <Filter index="Enemy" value="1"/>
    </CActorModel>
    <CActorModel id="DiabloBlackSoulstoneResurrectModelEnemyModel" parent="StormModelAddition">
        <On Terms="Effect.DiabloBlackSoulstoneResurrectDummyPersistent.Start" Send="Create"/>
        <On Terms="ActorCreation" Send="TimerSet 5.000000 SoulStoneTimer"/>
        <On Terms="TimerExpired; TimerName SoulStoneTimer" Send="Destroy"/>
        <Model value="DiabloBlackSoulstoneModel"/>
        <Filter index="Ally" value="1"/>
    </CActorModel>
    <CActorSimple id="DiabloLightningBreathUnstoppable" parent="StormUnstoppable">
        <On Terms="Behavior.DiabloLightningBreathActive.On" Send="Create"/>
        <On Terms="Behavior.DiabloLightningBreathActive.Off" Send="Destroy"/>
    </CActorSimple>
    <!--                                                                                         -->
    <!-- Diablo                                                                                  -->
    <!--                                                                                         -->
    <CActorUnit id="HeroDiablo" parent="StormHeroBasePredictive" unitName="HeroDiablo">
        <DeathArray index="Normal" SoundLink="Diablo_Death"/>
        <DeathActorModelLow value="UnitDeathModel"/>
        <AnimBlendTime value="0.200000"/>
        <!--[W] Fire Stomp -->
        <On Terms="Abil.DiabloFireStomp.SourceCastStart" Send="$Spell,A 0 0.100000 0.300000 1.000000 AsTimeScale"/>
        <On Terms="Effect.DiabloFireStompReturnPersistentSwitch.Start" Send="Create DiabloFireStompReturnSound"/>
        <On Terms="Effect.DiabloFireStompInitialSet.Start" Send="Create FireStompLaunchSoundInvisibleModel"/>
        <!--[R1] Apocalypse-->
        <On Terms="Abil.DiabloApocalypse.SourceCastStart" Send="$Spell,C 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!--[Q] Shadow Charge-->
        <On Terms="Effect.DiabloShadowChargeInitialSet.Start; At Caster" Send="AnimPlay Charge Spell,B PlayForever -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="Behavior.DiabloShadowChargeCasterBehavior.Off" Send="AnimClear Charge"/>
        <On Terms="Behavior.DiabloShadowChargeCasterPostChargeBehavior.On" Send="AnimPlay Charge Spell,B PlayForever -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="Behavior.DiabloShadowChargeCasterPostChargeBehavior.Off" Send="AnimClear Charge"/>
        <On Terms="Behavior.DiabloShadowChargeCasterPostChargeBehavior.Off" Send="$Spell,B,End 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!--[E] Overpower-->
        <On Terms="Signal.*.PoundTargetDummyCreated" Send="RefSetFromMsg ::actor.PoundTarget ::Sender"/>
        <On Terms="Signal.*.PoundTargetDummyCreated" Send="HostSiteOpsSet ::Host {SOpBasicScopeFollow SOpPoundForwardGuide}"/>
        <On Terms="Behavior.DiabloOverpowerCasterBehavior.On" Send="AnimBaselineSuppressWalk"/>
        <On Terms="Behavior.DiabloOverpowerCasterBehavior.Off" Send="AnimBaselineSuppressWalk 0"/>
        <On Terms="Effect.DiabloOverpowerWalkableSet.Start" Send="AnimPlay OverpowerWalkable Spell,F 0 -1.000000 0.000000 1.000000 AsTimeScale"/>
        <On Terms="AnimDone; AnimName OverpowerWalkable" Send="$Spell,F,End 5 0.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="AnimDone; AnimName OverpowerWalkable" Send="HostSiteOpsSet ::Host SOpBasicScopeFollow"/>
        <On Terms="Behavior.DiabloOverpowerCasterBehavior.Off" Send="AnimBaselineSuppressWalk 0"/>
        <!-- This timer is to ensure that, when Diablo's back is to a wall, his actor first looks at the target before we unhook it -->
        <On Terms="Effect.DiabloOverpowerNotWalkableSet.Start" Send="TimerSet 0.125000 ScopeTimer"/>
        <On Terms="TimerExpired; TimerName ScopeTimer" Send="HostSiteOpsSet ::Host SOpBasicScopeFollow"/>
        <On Terms="Effect.DiabloOverpowerNotWalkableSet.Start" Send="$Spell,H 5 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <!--[R2] Lightning Breath-->
        <On Terms="Abil.DiabloLightningBreath.SourceCastStart" Send="$Spell,D,Start 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="Behavior.DiabloLightningBreathActive.On" Send="$Spell,D PlayForever -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="Behavior.DiabloLightningBreathActive.Off" Send="AnimClear Spell"/>
        <!-- Setup for the Shadow charge knockback arrow -->
        <!-- Had to set initial timer to less than 0.0625 so it always beats the cursor setup delay of 0.0625 regardless of order of operations -->
        <!-- Also added a recurring timer to fix the bug where if you mouse over Q, Click Q, Mouse off Q it would lose the cursor reference -->
        <On Terms="Abil.DiabloShadowCharge.TargetOn" Send="StatusSet CursorFind 1"/>
        <On Terms="Abil.DiabloShadowCharge.TargetOn" Send="TimerSet 0.031250 CursorFind"/>
        <On Terms="TimerExpired; TimerName CursorFind; IsStatus CursorFind 1" Target="::Cursor" Send="Signal LinkDiablo"/>
        <On Terms="TimerExpired; TimerName CursorFind; IsStatus CursorFind 1" Send="TimerSet 0.062500 CursorFind"/>
        <On Terms="Abil.DiabloShadowCharge.TargetOff" Send="StatusSet CursorFind 0"/>
        <On Terms="Signal.*.CreateDiabloShadowChargeCursorGuide" Send="RefSetFromMsg ::scope.targetted ::Sender"/>
        <On Terms="Signal.*.CreateDiabloShadowChargeCursorGuide" Send="Create DiabloShadowChargeCursorGuide"/>
        <On Terms="Signal.*.DestroyDiabloShadowChargeCursorGuide" Target="DiabloShadowChargeCursorGuide" Send="Destroy"/>
        <On Terms="UnitDeath" Target="DiabloShadowChargeCursorGuide" Send="Destroy"/>
        <!-- Siphon The Dead -->
        <On Terms="Behavior.SiphonTheDead.On" Send="$Spell,D PlayForever"/>
        <On Terms="Behavior.SiphonTheDead.Off" Send="AnimClear Spell"/>
        <On Terms="ModelEvent; ModelEventName StepLeft" Send="Create DiabloFootstepSound"/>
        <On Terms="ModelEvent; ModelEventName StepRight" Send="Create DiabloFootstepSound"/>
        <On Terms="Effect.DiabloOverpowerRedirectSet.Start" Send="AnimClear OverpowerWalkable"/>
        <On Terms="Effect.DiabloOverpowerRedirectSet.Start" Send="AnimClear Spell"/>
        <On Terms="Effect.DiabloOverpowerRedirectSet.Start" Send="HostSiteOpsSet ::Host SOpBasicScopeFollow"/>
        <On Terms="Abil.DiabloTalentLordOfTerror.SourceCastStart; !AnimPlaying Spell" Send="$Spell,A 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <On Terms="Behavior.SiphonTheDeadHealOverTime.On; !AnimPlaying Spell" Send="$Spell,D 0 -1.000000 -1.000000 1.000000 AsTimeScale"/>
        <EventDataSound Name="DiabloAttackLaunch" Actor="UnitSound" Sound="SpineCrawler_AttackLaunch"/>
        <EventDataSound Name="DiabloAttackImpact" Actor="UnitSound" Sound="SpineCrawler_AttackImpact"/>
        <EventDataSound Name="DiabloAttackLaunchSlice" Actor="UnitSound" Sound="SC2_Shared_Zerg_AttackLaunchLargeSwing"/>
        <EventDataSound Name="DiabloAttackImpactSlice" Actor="UnitSound" Sound="SC2_Shared_Zerg_AttackImpactLargeSlice"/>
        <NameOffset value="40"/>
        <UnitIcon value="Assets\Textures\ui_targetportrait_hero_diablo.dds"/>
        <HeroIcon value="Assets\Textures\ui_targetportrait_hero_diablo.dds"/>
        <GroupIcon>
            <Image value="Assets\Textures\storm_ui_ingame_partyframe_diablo.dds"/>
        </GroupIcon>
        <ErrorArray Error="NotEnoughEnergy" Sound="Diablo_LowMana"/>
        <Wireframe>
            <Image value="Assets\Textures\ui_targetportrait_hero_diablo.dds"/>
        </Wireframe>
        <SoundArray index="Ready" value="Diablo_Revive"/>
        <SoundArray index="Yes" value="Diablo_Yes"/>
        <SoundArray index="Attack" value="Diablo_Attack"/>
        <SoundArray index="Pissed" value="Diablo_Pissed"/>
        <MinimapIcon value="Assets\Textures\storm_ui_minimapicon_heros_diablo.dds"/>
        <AbilSoundArray AbilCmd="DiabloDemonicCharge,Execute" Sound="Diablo_VOX_CastingA"/>
        <AbilSoundArray AbilCmd="DiabloShadowCharge,Execute" Sound="Diablo_VOX_CastingA"/>
        <AbilSoundArray AbilCmd="DiabloFireStomp,Execute" Sound="Diablo_VOX_CastingB"/>
        <AbilSoundArray AbilCmd="DiabloOverpower,255" Sound="StormNoSound"/>
        <AbilSoundArray AbilCmd="DiabloApocalypse,Execute" Sound="Diablo_Ultimate1Used"/>
        <AbilSoundArray AbilCmd="DiabloLightningBreath,255" Sound="StormNoSound"/>
        <PortraitActor value="DiabloPortrait"/>
        <PortraitModel value="DiabloPortrait"/>
        <MinimapIconBackgroundScale value="0.950000"/>
    </CActorUnit>
    <CActorModel id="HeroDiabloDeathRagdoll" parent="StormHeroDeathRagdoll"/>
    <!-- Attack                                                                                    -->
    <CActorAction id="DiabloAttackAction" parent="MeleeHeroAttack" effectAttack="DiabloHeroWeaponDamage">
        <ImpactMap index="None" Sound="Diablo_AttackImpact_Unit"/>
        <ImpactMap index="Rock" Sound="Diablo_AttackImpact_Building"/>
    </CActorAction>
    <!-- Lord of Terror                                                                           -->
    <CActorUnit id="DiabloTalentLordOfTerror" parent="StormItemBase" unitName="DiabloTalentLordOfTerror"/>
    <CActorSound id="DiabloLordofTerrorCastSound" parent="SoundOneShot">
        <On Terms="Abil.DiabloTalentLordOfTerror.SourceCastStart" Send="Create"/>
        <Sound value="Diablo_LordTerror_Reveal"/>
    </CActorSound>
    <CActorSound id="DiabloLordOfTerrorImpactSound" parent="SoundOneShot">
        <On Terms="Effect.DiabloLordOfTerrorDamage.Start; At Target" Send="Create"/>
        <Sound value="Talent_BloodForBlood_Impact"/>
    </CActorSound>
    <CActorBeamSimple id="DiabloLordOfTerrorBeam" parent="BeamSimpleAnimationStyleContinuous"/>
    <CActorAction id="DiabloLordOfTerrorBeamAction" parent="GenericAttack" effectAttack="DiabloLordOfTerrorModifyUnitDummy">
        <LaunchSiteOps Ops="SOpTargetUnit"/>
        <LaunchSound value="DiabloLordOfTerrorImpactSound"/>
        <Beam value="DiabloLordOfTerrorBeam"/>
        <ImpactSiteOps Ops="SOpCasterUnit"/>
        <ShieldFlashType value="None"/>
    </CActorAction>
    <CActorModel id="LordOfTerrorCastFX" parent="ModelAnimationStyleOneShot">
        <On Terms="Abil.DiabloTalentLordOfTerror.SourceCastStart" Send="Create"/>
        <HostSiteOps Ops="SOpAttachOrigin" HoldRotation="1"/>
        <Model value="LordOfTerrorCast"/>
    </CActorModel>
    <!--Diablo Overpower-->
    <CActorModel id="DiabloOverpowerTargetDummy">
        <On Terms="Effect.DiabloOverpowerInitialPersistent.Start; At Target" Send="Create"/>
        <On Terms="ActorCreation" Send="RefSetFromRequest ::actor.PoundCaster _Unit Caster Find"/>
        <On Terms="ActorCreation" Target="::actor.PoundCaster" Send="Signal PoundTargetDummyCreated"/>
        <On Terms="ActorCreation" Send="TimerSet 2.000000 DelayDestroy"/>
        <On Terms="TimerExpired; TimerName DelayDestroy" Send="Destroy"/>
        <On Terms="ActorCreation" Send="AnimPlay BSD Stand PlayForever"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachOrigin SOpShadow" HoldPosition="1" HoldRotation="1"/>
        <Model value="Invisible"/>
    </CActorModel>
    <CActorModel id="DiabloOverpowerCastModel" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.DiabloOverpowerInitialSet.Start; At Target" Send="Create"/>
        <HostSiteOps Ops="SOpAttachOrigin" HoldPosition="1" HoldRotation="1"/>
        <Model value="DiabloOverpowerCast"/>
    </CActorModel>
    <CActorModel id="DiabloOverpowerMissile" parent="StormModelAddition">
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.On" Send="Create"/>
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.Off" Send="AnimBracketStop BSD 0 1.000000 AsTimeScale"/>
        <HostSiteOps Ops="SOpAttachCenterSoft"/>
    </CActorModel>
    <CActorRange id="DiabloOverpowerRange" parent="StormRangeAbilPlusSplat" abil="DiabloOverpower"/>
    <CActorSplat id="DiabloOverpowerRangeSplat" parent="StormRangeSplat">
        <Scale value="3.200000"/>
    </CActorSplat>
    <CActorModel id="DiabloOverpowerFlail" parent="StormFlailStunForward">
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.On" Send="Create"/>
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.Off" Send="Destroy"/>
        <On Terms="ActorCreation" Target="_Unit" Send="AnimClear Spell"/>
        <On Terms="ActorCreation" Target="_Unit" Send="AnimClear Channel"/>
    </CActorModel>
    <CActorModel id="DiabloOverpowerImpactModel" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.DiabloOverpowerApplyStunToTarget.Start; At Target" Send="Create"/>
        <HostSiteOps Ops="SOpAttachOrigin SOpShadow" HoldPosition="1" HoldRotation="1"/>
        <Model value="DiabloOverpowerImpact"/>
    </CActorModel>
    <CActorSound id="DiabloOverpowerImpactSound" parent="SoundOneShot">
        <On Terms="Effect.DiabloOverpowerApplyStunToTarget.Start; At Target" Send="Create"/>
        <Sound value="Diablo_OverPower_Impact"/>
    </CActorSound>
    <CActorSound id="DiabloOverpowerLaunchSound" parent="SoundOneShot">
        <On Terms="Effect.DiabloOverpowerApplyTargetBehavior.Start; At Target" Send="Create"/>
        <Sound value="Diablo_OverPower_Launch"/>
        <Layers Sound="Diablo_OverPower_VOX"/>
        <Layers Sound="Diablo_OverPower_Whoosh" PlayDelay="50,50"/>
    </CActorSound>
    <CActorModel id="DiabloOverpowerStunModel" parent="StormStun">
        <On Terms="Behavior.DiabloOverpowerStun.On" Send="Create"/>
        <On Terms="Behavior.DiabloOverpowerStun.Off" Send="AnimBracketStop BSD"/>
    </CActorModel>
    <CActorEventMacro id="DiabloOverpowerAnimationMacro">
        <On Terms="Signal.*.PoundGrabSiteCreated; IsStatus Billboarded 0" Send="RefClear ::Host"/>
        <On Terms="Signal.*.PoundGrabSiteCreated; IsStatus Billboarded 0" Send="RefSetFromMsg ::Host ::Sender"/>
        <On Terms="Signal.*.PoundGrabSiteCreated; IsStatus Billboarded 0" Send="HostSiteOpsSet ::Host {PoundUnitOffset PoundUnitRotation}"/>
        <On Terms="Signal.*.PoundGrabSiteCreated" Send="AnimPlay Grabbed Flail PlayForever"/>
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.Off; IsStatus Billboarded 0" Send="RefClear ::Host"/>
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.Off; IsStatus Billboarded 0" Send="RefSet ::Host Implicit"/>
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.Off; IsStatus Billboarded 0" Send="HostSiteOpsSet ::Host SOpBasicScopeFollow"/>
        <On Terms="Behavior.DiabloOverpowerTargetBehavior.Off" Send="AnimClear Grabbed"/>
    </CActorEventMacro>
    <!-- Shadow Charge                                                                  -->
    <CActorModel id="DiabloShadowChargeFlail" parent="StormFlailStun">
        <On Terms="Behavior.DiabloShadowChargeKnockbackStun.On" Send="Create"/>
        <On Terms="Behavior.DiabloShadowChargeKnockbackStun.Off" Send="AnimBracketStop BSD"/>
    </CActorModel>
    <CActorModel id="DiabloShadowChargeExtraStunModel" parent="StormStun">
        <On Terms="Behavior.DiabloShadowChargeExtraStun.On" Send="Create"/>
        <On Terms="Behavior.DiabloShadowChargeExtraStun.Off" Send="AnimBracketStop BSD"/>
    </CActorModel>
    <CActorModel id="DiabloShadowChargeTrailModel" parent="StormModelAddition">
        <Remove Terms="ActorCreation" Send="AnimBracketStart BSD Birth Stand Death"/>
        <On Terms="ActorCreation" Send="AnimBracketStart BSD Stand Death GLstand"/>
        <On Terms="Behavior.DiabloShadowChargeCasterBehavior.On" Send="Create"/>
        <On Terms="Behavior.DiabloShadowChargeCasterBehavior.Off" Send="Destroy"/>
        <On Terms="Behavior.DiabloShadowChargeCasterPostChargeBehavior.On" Send="Create"/>
        <On Terms="Behavior.DiabloShadowChargeCasterPostChargeBehavior.Off" Send="Destroy"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachOriginSoft"/>
        <Model value="DiabloShadowChargeTrail"/>
    </CActorModel>
    <CActorModel id="DiabloShadowChargeImpactModel" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Behavior.DiabloShadowChargeExtraStun.On" Send="Create"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
        <Model value="DiabloShadowChargeImpact"/>
    </CActorModel>
    <CActorSound id="DiabloShadowChargeImpactSound" parent="SoundOneShot">
        <On Terms="Effect.DiabloShadowChargeSecondaryImpactSet.Start; At Target" Send="Create"/>
        <Host Subject="_Unit"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
        <Sound value="Diablo_DemonicCharge_Impact"/>
    </CActorSound>
    <CActorSound id="DiabloShadowChargeLaunchSound" parent="SoundOneShot">
        <On Terms="Abil.DiabloShadowCharge.SourceCastStart" Send="Create"/>
        <Sound value="Diablo_DemonicCharge_Cast"/>
        <Layers Sound="Diablo_DemonicCharge_Whoosh"/>
    </CActorSound>
    <CActorRange id="DiabloShadowChargeRange" parent="StormRangeAbilPlusSplat" abil="DiabloShadowCharge"/>
    <CActorSplat id="DiabloShadowChargeRangeSplat" parent="StormRangeSplat">
        <Scale value="7.000000"/>
    </CActorSplat>
    <!-- CActorQuad id="DiabloShadowChargeGuide" parent="StormGuideVisualQuadDownClosestFantasy" abil="DiabloShadowCharge">-->
    <!--        <Height value="5.000000"/>-->
    <!--        <Width value="0.700000"/>-->
    <!--    </CActorQuad -->
    <!-- Test using a model, to see if we can get it to use the caster facing from QueryCaster -->
    <!--CActorModel id="DiabloShadowChargeSearchCursorModel">-->
    <!--        <Model value="MinionMeleeKingsCrest"/>-->
    <!--        <FogVisibility value="Visible"/>-->
    <!--        <On Terms="ActorOrphan" Send="Destroy"/>-->
    <!--        <HostSiteOps Ops="SOpBasicScopeFollow SOpForwardQueryCaster SOp2DRotation"/>-->
    <!--        <Flags index="SuppressSaveLoad" value="1"/>-->
    <!--        <On Terms="Abil.DiabloShadowCharge.Cursor" Send="Create"/>-->
    <!--        <On Terms="ActorCreation" Target="::QueryCaster" Send="Signal Test3"/>-->
    <!--    </CActorModel-->
    <CActorSplat id="DiabloShadowChargeSearchCursorSplat">
        <!-- The fake targeting splat use to create the guide, model is not important. -->
        <Aliases value="_Scalable"/>
        <Flags index="SuppressSaveLoad" value="1"/>
        <FogVisibility value="Visible"/>
        <On Terms="Abil.DiabloShadowCharge.Cursor" Send="Create"/>
        <On Terms="ActorCreation" Send="Create DiabloShadowChargeCursorRegion"/>
        <On Terms="ActorDestruction" Target="DiabloShadowChargeCursorRegion" Send="Destroy"/>
        <On Terms="ActorOrphan" Send="Destroy"/>
        <!-- This is created earlier than the signal, due to the abil.cursor message -->
        <!-- Once it gets the link signal it starts linking the different cursor actors together so they all know the caster actor -->
        <On Terms="Signal.*.LinkDiablo" Send="RefSetFromMsg ::actor.Diablo ::Sender"/>
        <On Terms="Signal.*.LinkDiablo" Target="DiabloShadowChargeCursorRegion" Send="RefSet ::actor.Diablo ::actor.Diablo"/>
        <HostSiteOps Ops="SOpBasicScopeFollow"/>
        <FadeOut value="0.000000"/>
        <HoldTime value="-1.000000"/>
        <Layer value="AOELayer"/>
        <Model value="StormRangeSplatBase"/>
        <Height value="MinimumTerrain"/>
    </CActorSplat>
    <CActorRegionCircle id="DiabloShadowChargeCursorRegion">
        <Aliases value="_Scalable"/>
        <On Terms="ActorCreation" Send="QueryPersistent DiabloShadowChargeAddCursor DiabloShadowChargeRemoveCursor AgainstRadiusGame"/>
        <On Terms="ActorOrphan" Send="Destroy"/>
        <On Terms="Signal.*.DiabloShadowChargeArrowOn" Send="RefSetFromMsg ::actor.DiabloShadowChargeTarget ::Sender"/>
        <On Terms="Signal.*.DiabloShadowChargeArrowOn" Target="::actor.DiabloShadowChargeTarget" Send="RefSet ::actor.Diablo ::actor.Diablo"/>
        <On Terms="Signal.*.DiabloShadowChargeArrowOn" Target="::actor.DiabloShadowChargeTarget" Send="Signal DiabloShadowChargeTargetSet"/>
        <HostSiteOps Ops="SOpBasicScopeFollow"/>
        <NotifyRadiusKey value="_Scalable"/>
        <NotifyArcKey value="_Scalable"/>
        <Radius value="1.000000"/>
    </CActorRegionCircle>
    <!-- This gets created by the caster and uses the target as its host, different to standard targeting quads -->
    <CActorQuad id="DiabloShadowChargeCursorGuide" parent="StormGuideVisualQuadDownFantasy">
        <On index="0" Terms="Abil.Guide"/>
        <Host Subject="::scope.targetted" Actor="Find"/>
        <HostSiteOps Ops="SOpAttachOriginDiabloTarget SOpForwardQueryDiablo SOp2DRotation"/>
        <Height value="5.000000"/>
        <Width value="0.700000"/>
    </CActorQuad>
    <CActorSiteOpAttach id="SOpAttachOriginDiabloTarget">
        <AttachQuery Methods="Origin"/>
        <Supporter Subject="::scope.targetted" Actor="Find"/>
        <ForceSoftAttach value="1"/>
    </CActorSiteOpAttach>
    <CActorSiteOpForward id="SOpForwardQueryDiablo">
        <HostForward Subject="_Unit" Actor="Find"/>
        <Invert value="1"/>
    </CActorSiteOpForward>
    <CActorQueryResponse id="DiabloShadowChargeAddCursor">
        <Subject Filters="Snapshot,Unit,Missile" Terms="ValidateUnit TargetIsEnemyAndIsVisible IncludeDerivedSnapshot System_Snapshot_Dummy"/>
        <OnResponse Send="StatusIncrement PreTargetingModel"/>
        <OnResponse Send="StatusIncrement PreTargetingTint"/>
        <OnResponse Send="RefSet ::actor.PreTargetingSource ::QueryDirector"/>
        <OnResponse Send="StatusSet DiabloShadowCharge 1"/>
    </CActorQueryResponse>
    <CActorQueryResponse id="DiabloShadowChargeRemoveCursor">
        <Subject Filters="Snapshot,Unit,Missile"/>
        <OnResponse Send="StatusDecrement PreTargetingModel"/>
        <OnResponse Send="StatusDecrement PreTargetingTint"/>
        <OnResponse Send="RefClear ::actor.PreTargetingSource"/>
        <OnResponse Send="StatusSet DiabloShadowCharge 0"/>
    </CActorQueryResponse>
    <!-- Fire Stomp                                                                        -->
    <!-- Impact offset has to be done in the effect so the death model appears at the right height -->
    <CActorAction id="DiabloFireStompActionActor" parent="GenericAttack" effectImpact="FireStompImpactDummy" effectLaunch="FireStompLaunchMissile">
        <LaunchAttachQuery Methods="" Fallback="Origin"/>
        <Missile value="DiabloFireStompMissile"/>
        <ImpactPointSiteOps Ops="SOpTargetPoint SOpShadowRespectsBaseHeight SOpHeightLaunch"/>
        <ShieldFlashType value="None"/>
    </CActorAction>
    <CActorAction id="DiabloFireStompReturnActionActor" parent="GenericAttack" effectImpact="FireStompImpactDummy" effectLaunch="FireStompLaunchReturnMissile">
        <LaunchSiteOps Ops="SOpTargetPointStationary SOpShadowRespectsBaseHeight"/>
        <Missile value="DiabloFireStompReturnMissile"/>
        <ImpactSiteOps Ops="SOpAttachOrigin"/>
        <ShieldFlashType value="None"/>
    </CActorAction>
    <CActorRange id="DiabloFireStompRange" parent="StormRangeAbilPlusSplat" abil="DiabloFireStomp"/>
    <CActorSplat id="DiabloFireStompRangeSplat" parent="StormRangeSplat">
        <Scale value="10.500000"/>
    </CActorSplat>
    <CActorMissile id="DiabloFireStompReturnMissile" parent="StormMissileWithDeath" unitName="DiabloFireStompReturnMissile">
        <Macros value="GlobalLoopMacro"/>
        <Remove Terms="UnitBirth" Send="AnimBracketStart Lifetime Birth Stand"/>
        <Remove Terms="UnitBirth" Send="AnimBracketStart BSD Birth Stand Death"/>
        <On Terms="UnitBirth" Send="AnimBracketStart Birth IGNORE Stand Death"/>
        <HostSiteOps Ops="SOpPointSouthWorld"/>
        <Model value="DiabloFireStormMissile"/>
        <DeathArray index="Normal" ModelLink="DiabloFireStompMissile"/>
    </CActorMissile>
    <CActorMissile id="DiabloFireStompMissile" parent="StormMissileWithDeath" unitName="DiabloFireStompMissile">
        <Macros value="GlobalLoopMacro"/>
        <Remove Terms="UnitBirth" Send="AnimBracketStart Lifetime Birth Stand"/>
        <HostSiteOps Ops="SOpPointSouthWorld"/>
    </CActorMissile>
    <CActorModel id="FireStompReturnImpact" parent="StormModelAnimationStyleOneShot">
        <On Terms="Effect.FireStompReturnDamage.Start" Send="Create"/>
        <AutoScaleFactor value="1.000000"/>
        <ModelFlags index="AllowHitTest" value="0"/>
    </CActorModel>
    <CActorModel id="DiabloFireStompFireDevilTalentBuffModel" parent="StormModelAddition">
        <On Terms="Behavior.FireDevil.On" Send="Create"/>
        <On Terms="Behavior.FireDevil.Off" Send="AnimBracketStop BSD"/>
        <HostSiteOps Ops="SOpAttachCenter" HoldRotation="1"/>
    </CActorModel>
    <!-- Invisible model used for vision test for FireStomp cast sound so that it can be heard if the missiles-->
    <!--         can be seen-->
    <CActorModel id="FireStompLaunchSoundInvisibleModel" parent="StormModelAnimationStyleContinuous">
        <On Terms="ActorCreation" Send="TimerSet 3.000000 DestroyTimer"/>
        <On Terms="TimerExpired; TimerName DestroyTimer" Send="Destroy"/>
        <On Terms="ActorCreation" Send="Create FireStompLaunch"/>
    </CActorModel>
    <CActorSound id="DiabloFireStompReturnSound" parent="SoundOneShot">
        <!-- Removed from the dummy effect as its timing changes -->
        <!--On Terms="Effect.FireStompReturnSoundDummy.Start" Send="Create"/-->
        <Terms value="Cap 1"/>
        <Sound value="Diablo_FireStomp_Return"/>
    </CActorSound>
    <!-- Added to impact on the TAV instead of the above-->
    <CActorAction id="DiabloFireStompImpactActionActor" parent="GenericAttackStorm" effectAttack="FireStompDamage">
        <ImpactMap index="None" Model="FireStompImpact"/>
    </CActorAction>
    <CActorModel id="DiabloFireStompCastModel" parent="StormModelAnimationStyleOneShot">
        <On Terms="Abil.DiabloFireStomp.SourceCastStop" Send="Create"/>
        <On Terms="ActorCreation" Send="SetTintColor 255,0,0"/>
        <HostSiteOps Ops="SOpAttachOriginStationary" HoldPosition="1" HoldRotation="1"/>
        <Model value="DiabloFireStompCast"/>
        <ModelFlags index="AllowHitTest" value="0"/>
    </CActorModel>
    <CActorModel id="DiabloLightningBreathGroundModel" parent="StormModelAnimationStyleContinuousUnit">
        <On Terms="Behavior.LightningBreathCaster.On" Send="Create"/>
        <On Terms="Behavior.LightningBreathCaster.Off" Send="AnimBracketStop BSD"/>
        <HostSiteOps Ops="SOpAttachOriginSoft"/>
        <Model value="LightningBreathGround"/>
    </CActorModel>
    <CActorModel id="DiabloLightningBreathChargeBreatheInModel" parent="StormModelNoAnimsUnit">
        <Aliases value="_TimeStopAffectedActor"/>
        <VisibilityShape Shape="DiabloLightningBreathQuad"/>
        <On Terms="Abil.DiabloLightningBreath.SourceCastStart" Send="Create"/>
        <On Terms="ActorCreation" Send="$Birth"/>
        <On Terms="ActorCreation" Send="Create DiabloLightningBreathLaunchSound"/>
        <On Terms="Abil.DiabloLightningBreath.SourceCancel" Send="AnimClear Birth"/>
        <On Terms="StatusOn.*.TimeStopPaused" Send="AnimClear Birth"/>
        <On Terms="Behavior.Dead.On" Send="Destroy Immediate"/>
        <On Terms="Abil.DiabloLightningBreath.SourcePause" Send="Destroy Immediate"/>
        <On Terms="Behavior.DiabloLightningBreathActive.Off" Send="Destroy"/>
        <On Terms="Effect.DiabloLightningBreathInterruptCooldownRefund.Start" Send="Destroy"/>
        <HostSiteOps Ops="SOpAttachWeapon"/>
        <Model value="DiabloLightningBreathTargetedChargeModel"/>
    </CActorModel>
    <CActorSound id="DiabloLightningBreathEndSound" parent="SoundOneShot">
        <InheritType value="Continuous"/>
        <On Terms="Behavior.DiabloLightningBreathActive.Off" Send="Create"/>
        <Sound value="Diablo_LightningBreath_End"/>
    </CActorSound>
    <CActorSound id="DiabloBlackSoulstoneResurrectLaugh" parent="SoundOneShot">
        <Filter index="Self" value="1"/>
        <Inherits index="Visibility" value="0"/>
        <On Terms="Effect.DiabloBlackSoulstoneResurrectDummyPersistent.Start" Send="Create"/>
        <Sound value="Diablo_Resurrect_Laugh"/>
        <SoundFlags index="UpdateVisibility" value="0"/>
    </CActorSound>
    <CActorSound id="DiabloBlackSoulstoneResurrectLaughPlayer" parent="SoundOneShot">
        <Filter index="Ally" value="1"/>
        <Filter index="Neutral" value="1"/>
        <Filter index="Enemy" value="1"/>
        <Inherits index="Visibility" value="0"/>
        <On Terms="Effect.DiabloBlackSoulstoneResurrectDummyPersistent.Start" Send="Create"/>
        <Sound value="Diablo_Resurrect_Laugh_Player"/>
        <SoundFlags index="UpdateVisibility" value="0"/>
    </CActorSound>
    <CActorForceConeRoundedEnd id="DiabloLightningBreathForce">
        <On Terms="Effect.LightningBreathSearch.Start; At Caster" Send="Create"/>
        <Host Subject="LightningBreathAttackMissile"/>
        <HostSiteOps Ops="SOpShadow" HoldPosition="1" HoldRotation="1"/>
        <Duration value="0.125500"/>
        <Magnitude value="50.000000"/>
        <ForceFlags index="FallOff" value="0"/>
        <HostEndSiteOps Ops="SOpMoveBy5Dot5"/>
        <Angle value="28.000000"/>
        <Length value="1.500000"/>
    </CActorForceConeRoundedEnd>
    <CActorSiteOpLocalOffset id="DiabloLightningBreathAttackOffset">
        <LocalOffset value="0.000000,0.000000,1.000000" Z="1.000000"/>
    </CActorSiteOpLocalOffset>
    <CActorModel id="DiabloLightningBreathImpactModel" parent="StormModelAnimationStyleOneShotUnit">
        <On Terms="Effect.DiabloLightningBreathDamage.Start; At Target" Send="Create"/>
        <HostSiteOps Ops="SOpAttachCenter"/>
        <Model value="LightningBreathTargetedImpact"/>
    </CActorModel>
    <CActorSound id="DiabloLightningBreathImpactSound" parent="SoundOneShot">
        <On Terms="Behavior.DiabloLightningBreathTarget.On" Send="Create"/>
        <Sound value="Diablo_LightningBreath_Impact"/>
    </CActorSound>
    <CActorQuad id="DiabloLightningBreathGuide" parent="StormGuideVisualQuadDownClosestFantasy" abil="DiabloLightningBreath">
        <LaunchHeight value="3.000000"/>
        <CenterHeight value="3.000000"/>
        <ImpactHeight value="3.000000"/>
        <Height value="10.500000"/>
        <Width value="4.000000"/>
    </CActorQuad>
    <CActorModel id="DiabloLightningBreathChargeBreatheOutModel" parent="StormModelNoAnimsUnit">
        <Aliases value="_TimeStopAffectedActor"/>
        <Flags index="VisionTestCenterOnly" value="0"/>
        <VisibilityShape Shape="DiabloLightningBreathQuad"/>
        <On Terms="ActorCreation" Send="AnimBracketStart BSD {} Stand Death 0 1.000000 AsTimeScale"/>
        <On Terms="Behavior.DiabloLightningBreathActive.On" Send="Create"/>
        <On Terms="Behavior.DiabloLightningBreathActive.Off" Send="AnimBracketStop BSD"/>
        <On Terms="ActorOrphan" Send="Destroy"/>
        <On Terms="AnimBracketState.*.AfterClosing; AnimPlaying BSD" Send="Destroy"/>
        <On Terms="StatusOn.*.TimeStopPaused" Send="Destroy Immediate"/>
        <On Terms="Behavior.Dead.On" Send="Destroy Immediate"/>
        <HostSiteOps Ops="SOpAttachWeapon"/>
        <Model value="DiabloLightningBreathTargetedChargeModel"/>
        <ModelFlags index="AutomateGlobalLoops" value="1"/>
    </CActorModel>
    <CActorSound id="DiabloLightningBreathLaunchSound" parent="SoundOneShot">
        <InheritType value="Continuous"/>
        <On Terms="Behavior.DiabloLightningBreathController.Off" Send="Destroy"/>
        <On Terms="Behavior.DiabloLightningBreathActive.Off" Send="SoundSetPaused 1"/>
        <On Terms="Behavior.DiabloLightningBreathActive.On" Send="SoundSetPaused"/>
        <On Terms="Abil.DiabloLightningBreath.SourcePause" Send="Destroy"/>
        <On Terms="Effect.DiabloLightningBreathInterruptCooldownRefund.Start" Send="Destroy"/>
        <Host Subject="::Creator"/>
        <Sound value="Diablo_LightningEndless_Launch"/>
        <Layers Sound="Diablo_LightningEndless_VOX"/>
    </CActorSound>
    <!-- Apocalypse                                                                           -->
    <CActorModel id="DiabloApocalypseWarningModel" parent="StormModelNoAnims">
        <Inherits index="TeamColor" value="1"/>
        <On Terms="Effect.ApocalypseCreatePersistent.Start" Send="Create"/>
        <On Terms="ActorCreation" Send="AnimPlay Build Build 0 -1.000000 -1.000000 1.000000 AsAutomatic -1.000000"/>
        <On Terms="Effect.ApocalypseCreatePersistent.Stop" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce"/>
        <On Terms="AnimBracketState.*.AfterClosing; AnimName BSD" Send="Destroy"/>
        <On Terms="Effect.ApocalypseCreatePersistent.Stop" Send="AnimClear Build"/>
        <On Terms="Effect.DiabloHellgateApocalypseCreatePersistent.Stop" Send="AnimClear Build"/>
        <On Terms="Effect.DiabloHellgateApocalypseCreatePersistent.Start" Send="Create"/>
        <On Terms="Effect.DiabloHellgateApocalypseCreatePersistent.Stop" Send="AnimBracketStart BSD Birth Stand Death ContentPlayOnce"/>
        <HostSiteOps Ops="SOpShadow"/>
    </CActorModel>
    <CActorSound id="DiabloApocalypseWarningSound" parent="SoundOneShot">
        <On Terms="Effect.ApocalypseCreatePersistent.Start" Send="Create"/>
        <On Terms="Effect.DiabloHellgateApocalypseCreatePersistent.Start" Send="Create"/>
        <Sound value="Diablo_Apocalypse_Cast"/>
    </CActorSound>
    <CActorModel id="DiabloApocalypseCast" parent="StormModelAnimationStyleOneShotUnit">
        <Inherits index="Scale" value="1"/>
        <On Terms="Abil.DiabloApocalypse.SourceCastStart" Send="Create"/>
        <HostSiteOps Ops="SOpAttachOverhead SOpVisIconAwareOffset"/>
    </CActorModel>
    <CActorSound id="DiabloApocalypseCastSound" parent="SoundOneShot">
        <On Terms="Abil.DiabloApocalypse.SourceCastStart" Send="Create"/>
        <Sound value="Diablo_Apocalypse_Roar"/>
    </CActorSound>
    <CActorSound id="DiabloApocalypseExplodeSound" parent="SoundOneShot">
        <On Terms="Effect.ApocalypseSearch.Start" Send="Create"/>
        <Sound value="Diablo_Apocalypse_Explosion"/>
    </CActorSound>
    <CActorSound id="DiabloApocalypseImpactSound" parent="HeroAttackImpactSoundOneShot">
        <On Terms="Effect.ApocalypseDamage.Start" Send="Create"/>
        <Sound value="Diablo_Apocalypse_Impact"/>
    </CActorSound>
    <CActorModel id="DiabloApocalypseStun" parent="StormStun">
        <On Terms="Behavior.ApocalypseStun.On" Send="Create"/>
        <On Terms="Behavior.ApocalypseStun.Off" Send="AnimBracketStop BSD"/>
    </CActorModel>
    <CActorForceCylinder id="DiabloApocalypseUpForce">
        <On Terms="Effect.ApocalypseSearch.Stop" Send="Create"/>
        <On Terms="ActorCreation" Send="Create DiabloApocalypseOutForce"/>
        <Duration value="0.012500"/>
        <Magnitude value="75.000000"/>
        <HostEndSiteOps Ops="SOpHigherBy3"/>
        <Radius value="2.500000"/>
    </CActorForceCylinder>
    <CActorForceSphere id="DiabloApocalypseOutForce">
        <Host Subject="SOpSplashDamagePositionVariance"/>
        <Duration value="0.150000"/>
        <Magnitude value="75.000000"/>
        <Radius value="2.500000"/>
    </CActorForceSphere>
    <CActorSound id="DiabloFootstepSound" parent="SoundOneShot">
        <Sound value="Diablo_Footstep"/>
    </CActorSound>
    <CActorSound id="PulledSoundHeroDiablo" parent="SoundOneShot">
        <Sound value="Diablo_VOX_Pulled"/>
    </CActorSound>
    <CActorSimple id="DiabloOverpowerCasterBehaviorUnstoppable" parent="StormUnstoppable">
        <On Terms="Behavior.DiabloOverpowerCasterBehavior.On" Send="Create"/>
        <On Terms="Behavior.DiabloOverpowerCasterBehavior.Off" Send="Destroy"/>
    </CActorSimple>
    <CActorSimple id="DiabloShadowChargeCasterBehaviorUnstoppable" parent="StormUnstoppable">
        <On Terms="Behavior.DiabloShadowChargeCasterBehavior.On" Send="Create"/>
        <On Terms="Behavior.DiabloShadowChargeCasterBehavior.Off" Send="Destroy"/>
    </CActorSimple>
    <CBehaviorBuff id="ShadowChargeFullDurationCasterBehavior">
        <RemoveValidatorArray value="CasterNotDeadOrStunnedOrRootedOrPolymorphedOrStasisOrDazedOrFearedExceptTimeStop"/>
        <Modification>
            <StateFlags index="SuppressCollision" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorTokenCounter id="DiabloFireStompHellfireTalentMissileTokenCounter" parent="StormGenericToken">
        <Face value="DiabloHellfireToken"/>
        <Alignment value="Positive"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <Max value="10"/>
    </CBehaviorTokenCounter>
    <CBehaviorBuff id="DiabloLightningBreathUnstoppable" parent="StormUnstoppableParent">
        <DisplayDuration index="Self" value="1"/>
        <DisplayDuration index="Ally" value="1"/>
        <DisplayDuration index="Neutral" value="1"/>
        <DisplayDuration index="Enemy" value="1"/>
        <!-- Special remove case for Divine Palm proc -->
        <RemoveValidatorArray value="DoesNotHaveChanneledAbilityFullStopBehavior"/>
        <RemoveValidatorArray value="CasterNotInStasisExceptTimeStop"/>
        <Duration value="4.5625"/>
        <Modification PushPriority="5000" AlliedPushPriority="5000">
            <ModifyFlags index="SuppressMoving" value="1"/>
            <StateFlags index="SuppressCloak" value="1"/>
            <StateFlags index="SuppressFidgeting" value="1"/>
            <StateFlags index="SuppressItemUsage" value="1"/>
            <AbilClassDisableArray index="CAbilAttack" value="1"/>
            <AbilClassDisableArray index="CAbilEffectInstant" value="1"/>
            <AbilClassDisableArray index="CAbilEffectTarget" value="1"/>
            <AbilLinkEnableArray value="move"/>
            <AbilLinkEnableArray value="LightningBreathCancel"/>
            <AbilLinkEnableArray value="DiabloLightningBreath"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeStunLimiter">
        <EditorCategories value="AbilityorEffectType:Units"/>
        <Duration value="0.0625"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeDevastatingChargeTalentCarry" parent="CarryBehaviorParent">
        <EditorCategories value="AbilityorEffectType:Units"/>
        <DamageResponse>
            <Chance value="1"/>
            <Handled value="DiabloShadowChargeDevastatingChargeTalentDamage"/>
            <Location value="Attacker"/>
            <TargetFilters value="Heroic;Player,Ally"/>
            <RequireEffectArray value="DiabloShadowChargeProcDamage"/>
        </DamageResponse>
    </CBehaviorBuff>
    <CBehaviorTokenCounter id="DiabloShadowChargeDevastatingChargeTalentTokenCounter" parent="StormQuestToken">
        <Face value="DiabloDevastatingChargeToken"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <IncreaseEvents index="0" EventId="QuestIncrease" Effect="DiabloShadowChargeDevastatingChargeTalentModifyPlayer"/>
        <AtMinEvents index="0" EventId="QuestReset" Effect="DiabloShadowChargeDevastatingChargeTalentResetPlayer"/>
        <Max value="5"/>
    </CBehaviorTokenCounter>
    <CBehaviorTokenCounter id="DiabloBlackSoulstoneDevilsDueTalentTokenCounter" parent="StormGenericToken">
        <Face value="DiabloBlackSoulstoneToken"/>
        <InfoFlags index="Hidden" value="1"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <TokenId value="DiabloBlackSoulstoneDevilsDueTokenCounter"/>
        <Max value="100"/>
    </CBehaviorTokenCounter>
    <CBehaviorBuff id="DiabloSoulShieldCarry" parent="StormArmorPermanent">
        <DisableValidatorArray value="DiabloSourceHasGTE1BlackSoulstoneTokens"/>
        <DamageResponse Chance="1" Handled="SpellShieldImpactDummySet">
            <Kind index="Basic" value="0"/>
        </DamageResponse>
        <ArmorModification>
            <ArmorSet index="Hero">
                <ArmorMitigationTable index="Ability" value="0.25"/>
            </ArmorSet>
            <ArmorSet index="Merc">
                <ArmorMitigationTable index="Ability" value="0.25"/>
            </ArmorSet>
            <ArmorSet index="Monster">
                <ArmorMitigationTable index="Ability" value="0.25"/>
            </ArmorSet>
            <ArmorSet index="Summon">
                <ArmorMitigationTable index="Ability" value="0.25"/>
            </ArmorSet>
            <ArmorSet index="Structure">
                <ArmorMitigationTable index="Ability" value="0.25"/>
            </ArmorSet>
            <ArmorSet index="Minion">
                <ArmorMitigationTable index="Ability" value="0.25"/>
            </ArmorSet>
        </ArmorModification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloFireStompDebilitatingFlamesTalentSlow" parent="StormSlowParent">
        <EditorCategories value="AbilityorEffectType:Units"/>
        <MaxStackCount value="2"/>
        <MaxStackCountPerCaster value="2"/>
        <Duration value="2"/>
        <Modification>
            <UnifiedMoveSpeedFactor value="-0.15"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DemonSpeedDemonSpeedBuff">
        <BehaviorCategories index="Fast" value="1"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <Duration value="5"/>
        <Modification>
            <UnifiedMoveSpeedFactor value="0.3"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorTokenCounter id="DiabloBlackSoulstoneTokenCounter" parent="StormGenericToken">
        <Face value="DiabloBlackSoulstoneToken"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <Max value="100"/>
    </CBehaviorTokenCounter>
    <CBehaviorBuff id="DiabloFireStompHellfireTalentStack">
        <BehaviorFlags index="Permanent" value="1"/>
        <BehaviorFlags index="EnabledWhileDead" value="1"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <MaxStackCount value="10"/>
    </CBehaviorBuff>
    <CBehaviorTokenCounter id="DiabloFireStompHellfireTalentTokenCounter" parent="StormGenericToken">
        <Face value="DiabloHellfireToken"/>
        <Alignment value="Positive"/>
        <EditorCategories value="AbilityorEffectType:Units"/>
        <Max value="10"/>
    </CBehaviorTokenCounter>
    <CBehaviorBuff id="DiabloFearfulPresence" parent="StormDamageReduction">
        <BehaviorCategories index="DebuffAbilityPower" value="1"/>
        <BehaviorCategories index="User10" value="1"/>
        <Duration value="3"/>
        <Modification>
            <DamageDealtFraction index="Splash" value="-0.3"/>
            <DamageDealtFraction index="Basic" value="-0.3"/>
            <DamageDealtFraction index="Ability" value="-0.3"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloFearfulPresenceCarry" parent="CarryBehaviorParent">
        <DamageResponse Chance="1" Handled="DiabloFearfulPresenceApplyDamageResponseBehavior">
            <Kind index="Ability" value="0"/>
        </DamageResponse>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloFearfulPresenceDebuff">
        <BehaviorCategories index="User10" value="1"/>
        <Duration value="2.5"/>
        <Modification>
            <AdditiveAttackSpeedFactor value="-0.2"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloLightningBreathChanneledCoolup" parent="HeroGenericCancellingChanneledAbilityParent">
        <Name value="Behavior/Name/DiabloLightningBreathChanneledCoolup"/>
        <Tooltip value="Behavior/Tooltip/DiabloLightningBreathChanneledCoolup"/>
        <RemoveValidatorArray value="DoesNotHaveChanneledAbilityFullStopBehavior"/>
        <Duration value="0.5625"/>
        <FinalEffect value="DiabloLightningBreathInterruptCooldownRefund"/>
        <Modification>
            <AbilLinkEnableArray value="DiabloLightningBreath"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeTargetFoundBehavior">
        <Duration value="0.0625"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloDemonicStrengthSlow" parent="StormSlowParent">
        <Duration value="3"/>
        <Modification>
            <UnifiedMoveSpeedFactor value="-0.3"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="FireStompReturnMissileSuicideBehavior">
        <EditorCategories value="AbilityorEffectType:Units"/>
        <RemoveValidatorArray value="FireStompReturnMissileSuicideValidator"/>
        <FinalEffect value="SuicideRemove"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="BlackSoulstone">
        <Face value="DiabloBlackSoulstoneFace"/>
        <Alignment value="Positive"/>
        <BehaviorFlags index="Permanent" value="1"/>
        <BehaviorFlags index="EnabledWhileDead" value="1"/>
        <MaxStackCount value="100"/>
        <InfoIcon value="Assets\Textures\storm_temp_war3_btnsoulgem.dds"/>
        <Modification>
            <VitalMaxAdditiveMultiplierArray index="Life" value="0.004"/>
        </Modification>
        <BehaviorCategories index="User12" value="1"/>
        <InfoFlags index="AlwaysUseGameText" value="1"/>
        <SortIndex value="5"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="BlackSoulstoneCarryBehavior" parent="CarryBehaviorParent">
        <InfoIcon value="Assets\Textures\storm_temp_war3_btnsoulgem.dds"/>
        <Modification>
            <VitalMaxAdditiveMultiplierArray index="Life" value="0">
                <AccumulatorArray value="DiabloBlackSoulstoneHealthAccumulator"/>
            </VitalMaxAdditiveMultiplierArray>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloLightningBreathController" parent="StormUnstoppableParent">
        <InfoFlags index="AlwaysUseGameText" value="1"/>
        <BehaviorCategories index="Restorable" value="1"/>
        <!-- Special remove case for Divine Palm proc -->
        <RemoveValidatorArray value="DoesNotHaveChanneledAbilityFullStopBehavior"/>
        <RemoveValidatorArray value="CasterNotInStasisExceptTimeStop"/>
        <Duration value="4"/>
        <InitialEffect value="DiabloLightningBreathApplyActiveBehavior"/>
        <FinalEffect value="DiabloLightningBreathRemoveActiveBehavior"/>
        <Modification PushPriority="5000" AlliedPushPriority="5000">
            <ModifyFlags index="SuppressMoving" value="1"/>
            <StateFlags index="SuppressFidgeting" value="1"/>
            <StateFlags index="SuppressItemUsage" value="1"/>
            <AbilClassDisableArray index="CAbilAttack" value="1"/>
            <AbilClassDisableArray index="CAbilEffectInstant" value="1"/>
            <AbilClassDisableArray index="CAbilEffectTarget" value="1"/>
            <AbilLinkEnableArray value="move"/>
            <AbilLinkEnableArray value="DiabloLightningBreath"/>
            <AbilLinkEnableArray value="LightningBreathCancel"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloBlackSoulstoneSoulFeastTalentCarry" parent="CarryBehaviorParent">
        <Modification>
            <VitalRegenArray index="Life" value="0">
                <AccumulatorArray value="DiabloBlackSoulstoneSoulFeastTalentRegenAccumulator"/>
            </VitalRegenArray>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="FireDevil">
        <Face value="DiabloFirestompFireDevilTalent"/>
        <Alignment value="Positive"/>
        <DisableValidatorArray value="NotMounted"/>
        <DisableValidatorArray value="CasterNotInStasis"/>
        <DisableValidatorArray value="SourceNotDead"/>
        <DisableValidatorArray value="NoTyraelDeathExplosionBehavior"/>
        <DisableValidatorArray value="NotCloaked"/>
        <Duration value="6"/>
        <Period value="1"/>
        <InitialEffect value="DiabloFireStompFireDevilTalentSearch"/>
        <PeriodicEffect value="DiabloFireStompFireDevilTalentSearch"/>
        <Modification>
            <DamageDealtFraction index="Basic" value="0.2"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloNotWalkableCasterBehavior">
        <Duration value="1.5"/>
        <InfoIcon value="Assets\Textures\storm_temp_war3_btngrabtree.dds"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloOverpowerLaunchDummy">
        <RemoveValidatorArray value="OverpowerTargetHasOverpower"/>
        <Duration value="1"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="FireStompDummyBehavior">
        <Duration value="0.0625"/>
        <InitialEffect value="DiabloOverpowerDestroyInitialPersistent"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloFireStompReturnMissilePause">
        <Duration value="0.5"/>
        <Modification PushPriority="5000" AlliedPushPriority="5000">
            <ModifyFlags index="SuppressMoving" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloOverpowerCasterBehavior">
        <RemoveValidatorArray value="TargetNotTimeStopped"/>
        <Duration value="0.625"/>
        <Modification>
            <ModifyFlags index="SuppressTurning" value="1"/>
            <StateFlags index="SuppressAttack" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloOverpowerStun" parent="StormStun">
        <Duration value="0.25"/>
        <ExpireEffect value="DiabloOverpowerApplyDemonicStrengthSlow"/>
        <Modification>
            <StateFlags index="SuppressAttack" value="1"/>
            <StateFlags index="SuppressCloak" value="1"/>
            <StateFlags index="SuppressFidgeting" value="1"/>
            <AbilLinkEnableArray value="SgtHammerSiegeMode"/>
            <AbilLinkEnableArray value="SgtHammerTankMode"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloOverpowerTargetBehavior" parent="StormDisplacement">
        <Duration value="0.5625"/>
        <FinalEffect value="HeroRemovePushPullDebuffs"/>
        <ExpireEffect value="DiabloOverpowerImpactSet"/>
        <Modification>
            <StateFlags index="OrdersPaused" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeCasterPostChargeBehaviorChannel">
        <BuffFlags index="Channeled" value="1"/>
        <RemoveValidatorArray value="DiabloShadowChargeCasterHasPostChargeBehavior"/>
        <FinalEffect value="DiabloShadowChargeFullDurationCasterBehaviorRemoveBehavior"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeCasterPostChargeBehavior">
        <InfoIcon value="Assets\Textures\storm_temp_war3_btnghoulfrenzy.dds"/>
        <BuffFlags index="UpdateDurationWhileDisabled" value="1"/>
        <Duration value="0.1875"/>
        <Modification>
            <MoveSpeedMaximum value="27"/>
            <MoveSpeedMinimum value="27"/>
            <BehaviorCategoriesDisable index="Slow" value="1"/>
            <BehaviorCategoriesDisable index="Fast" value="1"/>
        </Modification>
        <FinalEffect value="DiabloShadowChargeIssueAttackOrder"/>
        <ExpireEffect value="DiabloShadowChargeIssueAttackOrder"/>
        <RemoveValidatorArray value="DiabloShadowChargeDiabloKnockbackValidator"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeCasterBehavior">
        <Alignment value="Positive"/>
        <BuffFlags index="Channeled" value="1"/>
        <BuffFlags index="UpdateDurationWhileDisabled" value="1"/>
        <Duration value="1"/>
        <Modification>
            <StateFlags index="SuppressCollision" value="1"/>
        </Modification>
        <InfoIcon value="Assets\Textures\storm_temp_war3_btnghoulfrenzy.dds"/>
        <RemoveValidatorArray value="CasterNotDeadOrStunnedOrRootedOrPolymorphedOrStasisOrDazedOrFearedExceptTimeStop"/>
        <InitialEffect value="DiabloShadowChargeFullDurationCasterBehaviorApplyBehavior"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeExtraStun" parent="StormStun">
        <Duration value="1"/>
        <Modification>
            <AbilLinkEnableArray value="SgtHammerSiegeMode"/>
            <AbilLinkEnableArray value="SgtHammerTankMode"/>
        </Modification>
        <InitialEffect value="DiabloShadowChargeTerrainCollisionDamageSet"/>
        <RefreshEffect value="DiabloShadowChargeTerrainCollisionDamageSet"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeKnockbackStun" parent="PushPullParent">
        <Duration value="0.25"/>
        <Modification>
            <BehaviorCategoriesDisable index="User5" value="1"/>
        </Modification>
        <InitialEffect value="DiabloShadowChargeIssueStopOrder"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeTargetMoveSpeedBehavior" parent="PushPullParent">
        <Duration value="0.1875"/>
        <Modification>
            <MoveSpeedMaximum value="27"/>
            <MoveSpeedMinimum value="27"/>
            <BehaviorLinkDisableArray value="Mounted"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="FireStompAntiGibBehavior">
        <Duration value="0.5"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="FireStompReturnMissileSearch">
        <Period value="0.0625"/>
        <PeriodicEffect value="FireStompReturnSearch"/>
        <InitialEffect value="DiabloFireStompApplyReturnMissilePause"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloLightningBreathTarget">
        <Alignment value="Negative"/>
        <InfoIcon value="Assets\Textures\storm_btn_d3_wizard_shockpulse.dds"/>
        <BehaviorCategories index="Permanent" value="1"/>
        <Duration value="0.4375"/>
        <Period value="0.2812"/>
        <InitialEffect value="DiabloLightningBreathDamageSet"/>
        <PeriodicEffect value="DiabloLightningBreathDamageSet"/>
        <RevealUnit Effect="DiabloLightningBreathApplyTargetBehavior" Value="Caster"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloLightningBreathActive">
        <DisableValidatorArray value="TargetNotTimeStopped"/>
        <DisableValidatorArray value="TargetNotInDevouringMaw"/>
        <RemoveValidatorArray value="TargetNotDead"/>
        <BuffFlags index="Channeled" value="1"/>
        <Duration value="10"/>
        <Period value="0.1875"/>
        <InitialEffect value="DiabloLightningBreathOffsetPersistent"/>
        <PeriodicEffect value="DiabloLightningBreathOffsetPersistent"/>
        <FinalEffect value="DiabloLightningBreathRemoveUnstoppableBehavior"/>
        <Modification>
            <StateFlags index="SuppressCloak" value="1"/>
            <StateFlags index="Unstoppable" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="FireStompMissileSearch">
        <Period value="0.0625"/>
        <PeriodicEffect value="FireStompSearch"/>
    </CBehaviorBuff>
    <CBehaviorBuff id="ApocalypseStun" parent="StormStun">
        <Duration value="1.75"/>
        <Modification>
            <StateFlags index="SuppressFidgeting" value="1"/>
        </Modification>
    </CBehaviorBuff>
    <CBehaviorBuff id="DiabloShadowChargeArmorIncrease" parent="StormArmor">
        <BehaviorCategories index="User2" value="1"/>
        <Duration value="2"/>
        <ArmorModification AllArmorBonus="25"/>
    </CBehaviorBuff>
    <CButton id="DiabloDevastatingChargeToken" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_shadowcharge_var1.dds"/>
    </CButton>
    <CButton id="DiabloDevastatingCharge" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_shadowcharge_var1.dds"/>
    </CButton>
    <CButton id="DiabloSoulShield" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_blacksoulstone_var2.dds"/>
    </CButton>
    <CButton id="DiabloBlackSoulstoneSoulFeastTalentToken" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_blacksoulstone_var1.dds"/>
        <HotkeyAlias value="DiabloBlackSoulstoneToken"/>
    </CButton>
    <CButton id="DiabloBlackSoulstoneToken" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_blacksoulstone_var1.dds"/>
        <TooltipAppender Validator="HasDiabloSoulFeast" Text="Abil/DiabloBlackSoulstoneSoulFeastTalentAppender"/>
        <TooltipAppender Validator="DiabloHasSoulShieldTalent" Text="Abil/DiabloBlackSoulstoneDemonicArmorTalentAppender"/>
    </CButton>
    <CButton id="DiabloHellfireToken" parent="StormButtonParentTrait">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_firestomp_a.dds"/>
        <SimpleDisplayText value="Button/SimpleDisplayText/DiabloHellfire"/>
    </CButton>
    <CButton id="DiabloHellgateTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_talent_boltofthestorm.dds"/>
    </CButton>
    <CButton id="DiabloFearfulPresence" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_talent_imposingpresence.dds"/>
    </CButton>
    <CButton id="DiabloFearfulPresenceTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_talent_imposingpresence.dds"/>
        <HotkeyAlias value="GenericImposingPresenceTalent"/>
        <Tooltip value="Button/Tooltip/DiabloFearfulPresence"/>
    </CButton>
    <CButton id="DiabloHellfire" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_firestomp_a.dds"/>
    </CButton>
    <CButton id="DiabloDebilitatingFlames" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_firestomp.dds"/>
    </CButton>
    <CButton id="DiabloLifeLeechTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_talent_autoattack_heal.dds"/>
        <HotkeyAlias value="DiabloBlackSoulstoneSoulCatcherTalent"/>
    </CButton>
    <CButton id="DiabloLordOfTerror" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_lordofterror.dds"/>
    </CButton>
    <CButton id="DiabloOverpowerDominationTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_overpower_var1.dds"/>
    </CButton>
    <CButton id="DiabloBulwark" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_shadowcharge_var1.dds"/>
    </CButton>
    <CButton id="DiabloSpeedDemon" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_talent_relentless.dds"/>
    </CButton>
    <CButton id="DiabloOverpowerDemonicStrengthTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_overpower_var1.dds"/>
    </CButton>
    <CButton id="DiabloBlackSoulstone" parent="StormButtonParentTrait">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_blacksoulstone_var1.dds"/>
        <TooltipAppender Validator="HasDiabloDevilsDue" Face="DiabloBlackSoulstoneDevilsDueTalent"/>
        <TooltipAppender Validator="HasDiabloSoulFeast" Face="DiabloBlackSoulstoneSoulFeastTalent"/>
        <TooltipAppender Validator="DiabloHasSoulShieldTalent" Face="DiabloSoulShield"/>
    </CButton>
    <CButton id="DiabloBlackSoulstoneDevilsDueTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_blacksoulstone_var1.dds"/>
    </CButton>
    <CButton id="DiabloApocalypseDyingBreathTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_apocalypse.dds"/>
    </CButton>
    <CButton id="DiabloLightningBreathHellstormTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_lightningbreath.dds"/>
    </CButton>
    <CButton id="DiabloFirestompFireDevilTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_firestomp.dds"/>
    </CButton>
    <CButton id="DiabloShadowChargeFromTheShadowsTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_shadowcharge_var1.dds"/>
    </CButton>
    <CButton id="DiabloBlackSoulstoneSoulFeastTalent" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_blacksoulstone_var1.dds"/>
    </CButton>
    <CButton id="DiabloOverpower" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_overpower_var1.dds"/>
        <TooltipAppender Validator="HasDiabloDemonicStrength" Face="DiabloOverpowerDemonicStrengthTalent"/>
        <TooltipAppender Validator="HasDiabloDomination" Face="DiabloOverpowerDominationTalent"/>
        <TooltipCooldownOverrideText value="DiabloOverpowerCooldownOverride"/>
    </CButton>
    <CButton id="DiabloShadowCharge" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_shadowcharge_var1.dds"/>
        <TooltipAppender Validator="DiabloHasBulwarkTalent" Face="DiabloBulwark"/>
        <TooltipAppender Validator="HasDiabloFromTheShadows" Face="DiabloShadowChargeFromTheShadowsTalent"/>
        <TooltipAppender Validator="DiabloHasDevastatingChargeTalent" Face="DiabloDevastatingCharge"/>
    </CButton>
    <CButton id="DiabloDiabolicalMomentum" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_talent_autoattack_cooldown.dds"/>
    </CButton>
    <CButton id="DiabloLightningBreathCancel" parent="StormButtonParent">
        <Icon value="Assets\Textures\hud_btn_bg_ability_cancel.dds"/>
        <TooltipFlags index="ShowCooldown" value="0"/>
    </CButton>
    <CButton id="DiabloLightningBreath" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_lightningbreath.dds"/>
        <HotkeyAlias value="DiabloApocalypse"/>
        <TooltipAppender Validator="HasDiabloHellstorm" Face="DiabloLightningBreathHellstormTalent"/>
    </CButton>
    <CButton id="DiabloFireStomp" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_firestomp.dds"/>
        <TooltipAppender Validator="HasDiabloFireDevil" Face="DiabloFirestompFireDevilTalent"/>
        <TooltipAppender Validator="DiabloHasHellfireTalent" Face="DiabloHellfire"/>
        <TooltipAppender Validator="HasDiabloFirestorm" Face="DiabloFireStompFirestormTalent"/>
        <TooltipAppender Validator="DiabloHasDebilitatingFlames" Face="DiabloDebilitatingFlames"/>
    </CButton>
    <CButton id="DiabloApocalypse" parent="StormButtonParent">
        <Icon value="Assets\Textures\storm_ui_icon_diablo_apocalypse.dds"/>
        <TooltipAppender Validator="HasDiabloDyingBreath" Face="DiabloApocalypseDyingBreathTalent"/>
    </CButton>
    <CEffectRemoveBehavior id="DiabloShadowChargeFullDurationCasterBehaviorRemoveBehavior">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="ShadowChargeFullDurationCasterBehavior"/>
    </CEffectRemoveBehavior>
    <CEffectApplyBehavior id="DiabloShadowChargeFullDurationCasterBehaviorApplyBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="ShadowChargeFullDurationCasterBehavior"/>
    </CEffectApplyBehavior>
    <CEffectEnumTrackedUnits id="DiabloApocalypseEnumerateTrackedUnits">
        <Marker>
            <MatchFlags index="Id" value="1"/>
        </Marker>
        <BehaviorLink value="AllHeroicUnitsTrackingBehavior"/>
        <Effect value="ApocalypseCreatePersistent"/>
    </CEffectEnumTrackedUnits>
    <CEffectApplyBehavior id="DiabloShadowChargeApplyStunLimiter">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Behavior value="DiabloShadowChargeStunLimiter"/>
    </CEffectApplyBehavior>
    <CEffectDamage id="DiabloShadowChargeDevastatingChargeTalentDamage" parent="StormSpellPercentDamage">
        <ValidatorArray value="TargetIsHero"/>
        <ValidatorArray value="DiabloHasDevastatingChargeTalent"/>
        <Flags index="Crit" value="1"/>
        <VitalFractionMax index="Life" value="0.05"/>
        <SourceButtonFace value="DiabloDevastatingCharge"/>
    </CEffectDamage>
    <CEffectModifyPlayer id="DiabloShadowChargeDevastatingChargeTalentModifyPlayer">
        <EffectArray Reference="Effect,DiabloShadowChargeDevastatingChargeTalentDamage,VitalFractionMax[Life]" Value="0.02"/>
    </CEffectModifyPlayer>
    <CEffectModifyPlayer id="DiabloShadowChargeDevastatingChargeTalentResetPlayer">
        <EffectArray Operation="Set" Reference="Effect,DiabloShadowChargeDevastatingChargeTalentDamage,VitalFractionMax[Life]" Value="0.05"/>
    </CEffectModifyPlayer>
    <CEffectModifyTokenCount id="DiabloShadowChargeDevastatingChargeTalentModifyTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="TargetNotInvulnerable"/>
        <ValidatorArray value="TargetIsHero"/>
        <ValidatorArray value="DiabloHasDevastatingChargeTalent"/>
        <ValidatorArray value="DiabloDoesNotHave5DevastatingChargeTalentTokens"/>
        <TokenId value="DiabloShadowChargeDevastatingChargeTalentTokenCounter"/>
        <EffectCategory index="Quest" value="1"/>
    </CEffectModifyTokenCount>
    <CEffectSet id="DiabloShadowChargeTerrainCollisionDamageSet">
        <EffectArray value="DiabloShadowChargeProcDamage"/>
        <EffectArray value="DiabloShadowChargeDevastatingChargeTalentModifyTokenCount"/>
    </CEffectSet>
    <CEffectLaunchMissile id="DiabloBlackSoulstoneHeroTargetLaunchMissile">
        <ValidatorArray index="0" value="TargetIsHero"/>
        <ValidatorArray value="TargetWithin20Range"/>
        <ValidatorArray value="CasterNotUsingVehicle"/>
        <LaunchLocation Value="TargetUnit"/>
        <ImpactLocation Value="CasterUnit"/>
        <ImpactEffect value="DiabloBlackSoulstoneDummyImpactEffect"/>
        <AmmoUnit value="DiabloBlackSoulstoneHeroMissile"/>
        <ImpactRange value="0.5"/>
    </CEffectLaunchMissile>
    <CEffectModifyUnit id="DiabloBlackSoulstoneDummyImpactEffect"/>
    <CEffectLaunchMissile id="DiabloBlackSoulstoneNonHeroTargetLaunchMissile">
        <ValidatorArray index="0" value="TargetNotHero"/>
        <ValidatorArray value="TargetWithin20Range"/>
        <ValidatorArray value="CasterNotUsingVehicle"/>
        <LaunchLocation Value="TargetUnit"/>
        <ImpactLocation Value="CasterUnit"/>
        <ImpactEffect value="DiabloBlackSoulstoneDummyImpactEffect"/>
        <AmmoUnit value="DiabloBlackSoulstoneNonHeroMissile"/>
        <ImpactRange value="0.5"/>
    </CEffectLaunchMissile>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneAdd10DevilsDueTalentTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="HasDiabloDevilsDue"/>
        <TokenId value="DiabloBlackSoulstoneDevilsDueTokenCounter"/>
        <Value value="10"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneAddDynamicDevilsDueTalentTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="HasDiabloDevilsDue"/>
        <TokenId value="DiabloBlackSoulstoneDevilsDueTokenCounter"/>
    </CEffectModifyTokenCount>
    <CEffectSet id="DiabloBlackSoulstoneAdd10TokenSet">
        <ValidatorArray value="DiabloSourceHasLessThan100BlackSoulstoneTokens"/>
        <EffectArray value="DiabloBlackSoulstoneAdd10TokenCount"/>
        <EffectArray value="DiabloBlackSoulstoneAdd10DevilsDueTalentTokenCount"/>
    </CEffectSet>
    <CEffectSet id="DiabloBlackSoulstoneAdd1TokenSet">
        <ValidatorArray value="DiabloSourceHasLessThan100BlackSoulstoneTokens"/>
        <EffectArray value="DiabloBlackSoulstoneAddTokenCount"/>
        <EffectArray value="DiabloBlackSoulstoneAddDevilsDueTalentTokenCount"/>
    </CEffectSet>
    <CEffectSet id="DiabloBlackSoulstoneRemove100TokenSet">
        <EffectArray value="DiabloBlackSoulstoneRemove100TokenCount"/>
        <EffectArray value="DiabloBlackSoulstoneRemove100DevilsDueTalentTokenCount"/>
    </CEffectSet>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneAddDevilsDueTalentTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="DiabloSourceHasLessThan100BlackSoulstoneTokens"/>
        <ValidatorArray value="HasDiabloDevilsDue"/>
        <TokenId value="DiabloBlackSoulstoneDevilsDueTokenCounter"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneRemove100DevilsDueTalentTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="HasDiabloDevilsDue"/>
        <TokenId value="DiabloBlackSoulstoneDevilsDueTokenCounter"/>
        <Value value="-100"/>
    </CEffectModifyTokenCount>
    <CEffectSet id="DiabloBlackSoulstoneRemove80TokenSet">
        <EffectArray value="DiabloBlackSoulstoneRemove80TokenCount"/>
        <EffectArray value="DiabloBlackSoulstoneRemove80DevilsDueTalentTokenCount"/>
    </CEffectSet>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneRemove80DevilsDueTalentTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="HasDiabloDevilsDue"/>
        <TokenId value="DiabloBlackSoulstoneDevilsDueTokenCounter"/>
        <Value value="-80"/>
    </CEffectModifyTokenCount>
    <CEffectApplyBehavior id="DiabloFireStompApplyDebilitatingFlamesTalentSlow" parent="StormSlowApply">
        <ValidatorArray index="0" value="DiabloHasDebilitatingFlames"/>
        <ValidatorArray value="TargetIsHero"/>
        <Behavior value="DiabloFireStompDebilitatingFlamesTalentSlow"/>
    </CEffectApplyBehavior>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneAdd10TokenCount" parent="BaseEffectModifyTokenCount">
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
        <Value value="10"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneRemove80TokenCount" parent="BaseEffectModifyTokenCount">
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
        <Value value="-80"/>
    </CEffectModifyTokenCount>
    <CEffectCreatePersistent id="DiabloBlackSoulstoneHeroKillTokenPersistent">
        <WhichLocation Value="TargetUnit"/>
        <PeriodCount value="10"/>
        <PeriodicValidator value="DiabloSourceHasLessThan100BlackSoulstoneTokens"/>
        <PeriodicEffectArray value="DiabloBlackSoulstoneAddTokenCount"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneAddTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="DiabloSourceHasLessThan100BlackSoulstoneTokens"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloBlackSoulstoneRemove100TokenCount" parent="BaseEffectModifyTokenCount">
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
        <Value value="-100"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloFireStompHellfireTalentModifyTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="DiabloHasHellfireTalent"/>
        <ValidatorArray value="TargetIsHero"/>
        <TokenId value="DiabloFireStompHellfireTalentTokenCounter"/>
    </CEffectModifyTokenCount>
    <CEffectSet id="DiabloFireStompHellfireTalentResetSet">
        <EffectArray value="DiabloFireStompHellfireTalentResetTokenCount"/>
        <EffectArray value="DiabloFireStompResetHellfireTalentStacksModifyPlayer"/>
    </CEffectSet>
    <CEffectModifyTokenCount id="DiabloFireStompHellfireTalentResetTokenCount" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="DiabloHasHellfireTalent"/>
        <TokenId value="DiabloFireStompHellfireTalentTokenCounter"/>
        <Operation value="Set"/>
        <Value value="0"/>
    </CEffectModifyTokenCount>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent7StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent7StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent7StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent7StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent8StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent8StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent8StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent8StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent9StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent9StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent9StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent9StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent10StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent10StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent10StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent10StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply7HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="7"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply8HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="8"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply9HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="9"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply10HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="10"/>
    </CEffectModifyTokenCount>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent6StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent6StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent7StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent7StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent6StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent6StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent6StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent6StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply6HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="6"/>
    </CEffectModifyTokenCount>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent8StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent8StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent6StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply6HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent9StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent9StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent7StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply7HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent10StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent10StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent9StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply9HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent8StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply8HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent10StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply10HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent2StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent2StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent2StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent2StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent4StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent4StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent4StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent4StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent5StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent5StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent5StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent5StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply4HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="4"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply5HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="5"/>
    </CEffectModifyTokenCount>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent3StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent3StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent3StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent3StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent3StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent3StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply3HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="3"/>
    </CEffectModifyTokenCount>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent2StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent2StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply2HellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="2"/>
    </CEffectModifyTokenCount>
    <CEffectModifyTokenCount id="DiabloFireStompReturnApply1HellfireTalentToken" parent="BaseEffectModifyTokenCount">
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CEffectModifyTokenCount>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent3StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply3HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent4StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent4StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent2StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply2HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent1StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply1HellfireTalentToken"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent5StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent5StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent4StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply4HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectSet id="DiabloFireStompReturnHellfireTalent5StackMissileLaunchSet">
        <EffectArray value="DiabloFireStompReturnApply5HellfireTalentTokens"/>
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectSwitch id="DiabloFireStompReturnPersistentSwitch">
        <CaseArray Validator="DiabloSourceHas1StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent1StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas2StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent2StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas3StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent3StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas4StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent4StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas5StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent5StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas6StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent6StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas7StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent7StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas8StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent8StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas9StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent9StackCreatePersistent"/>
        <CaseArray Validator="DiabloSourceHas10StackFireStompHellfireTalentToken" Effect="DiabloFireStompReturnHellfireTalent10StackCreatePersistent"/>
        <CaseDefault value="FireStompReturnCreatePersistent"/>
    </CEffectSwitch>
    <CEffectModifyPlayer id="DiabloFireStompReturnHellfireTalentStacksModifyPlayer">
        <ValidatorArray value="DiabloHasHellfireTalent"/>
        <ValidatorArray value="TargetIsHero"/>
        <WhichPlayer Value="Caster"/>
        <EffectArray Reference="Effect,DiabloFireStompReturnApplyHellfireTalentStacks,Count" Value="1"/>
    </CEffectModifyPlayer>
    <CEffectApplyBehavior id="DiabloFireStompReturnApplyHellfireTalentStacks">
        <ValidatorArray index="0" value="DiabloHasHellfireTalent"/>
        <WhichUnit Value="Source"/>
        <Behavior value="DiabloFireStompHellfireTalentStack"/>
        <Count value="0"/>
    </CEffectApplyBehavior>
    <CEffectSet id="DiabloFireStompLaunchSet">
        <EffectArray value="FireStompApplyMissileScanDelayPersistent"/>
        <EffectArray value="DiabloFireStompApplyDynamicHellfireTalentTokens"/>
    </CEffectSet>
    <CEffectModifyPlayer id="DiabloFireStompResetHellfireTalentStacksModifyPlayer">
        <ValidatorArray value="DiabloHasHellfireTalent"/>
        <WhichPlayer Value="Caster"/>
        <EffectArray Operation="Set" Reference="Effect,DiabloFireStompApplyDynamicHellfireTalentTokens,Value" Value="0"/>
    </CEffectModifyPlayer>
    <CEffectModifyPlayer id="DiabloFireStompHellfireTalentStacksModifyPlayer">
        <ValidatorArray value="DiabloHasHellfireTalent"/>
        <ValidatorArray value="TargetIsHero"/>
        <WhichPlayer Value="Caster"/>
        <EffectArray Reference="Effect,DiabloFireStompApplyDynamicHellfireTalentTokens,Value" Value="1"/>
    </CEffectModifyPlayer>
    <CEffectCreatePersistent id="DiabloFireStompReturnHellfireTalent1StackCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloFireStompLaunchHellfireTalent1StackReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectLaunchMissile id="DiabloFireStompLaunchHellfireTalent1StackReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="DiabloFireStompReturnHellfireTalent1StackCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="DiabloFireStompReturnHellfireTalent1StackCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnHellfireTalent1StackMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
    </CEffectLaunchMissile>
    <CEffectModifyTokenCount id="DiabloFireStompApplyDynamicHellfireTalentTokens" parent="BaseEffectModifyTokenCount">
        <ValidatorArray value="DiabloHasHellfireTalent"/>
        <WhichUnit Value="Source"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
        <Value value="0"/>
    </CEffectModifyTokenCount>
    <CEffectCreatePersistent id="DiabloHellgateApocalypseCreatePersistent">
        <InitialEffect value="ApocalypseRevealer"/>
        <ExpireDelay value="1.75"/>
        <ExpireEffect value="ApocalypseSearch"/>
        <AINotifyEffect value="ApocalypseSearch"/>
    </CEffectCreatePersistent>
    <CEffectTeleport id="DiabloHellgateTeleport" parent="StormTeleportSelf">
        <PlacementRange value="11"/>
        <Range value="11"/>
        <TargetLocation Value="TargetPoint"/>
        <TeleportEffect value="DiabloHellgateApocalypseCreatePersistent"/>
        <ValidatorArray value="UserCategoryCasterNotRooted"/>
    </CEffectTeleport>
    <CEffectApplyBehavior id="DiabloFearfulPresenceApplyDamageResponseBehavior">
        <ValidatorArray index="0" value="AttackSpeedSlowValidatorCombine"/>
        <Behavior value="DiabloFearfulPresenceDebuff"/>
    </CEffectApplyBehavior>
    <CEffectEnumArea id="DiabloFearfulPresenceActivatedSearch">
        <SearchFilters value="Heroic;Self,Player,Ally,Tower,Minion,Merc,ImmuneToAOE,User1,Missile,Item,Stasis,Dead,MapBoss"/>
        <AreaArray Effect="DiabloFearfulPresenceApplyActivatedDebuff">
            <Radius value="5"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectApplyBehavior id="DiabloFearfulPresenceApplyActivatedDebuff">
        <ValidatorArray index="0" value="TargetIsSummonedOrHeroic"/>
        <Behavior value="DiabloFearfulPresence"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="DiabloBlackSoulstoneLifeLeechTalentCreatePersistent">
        <WhichLocation Value="SourceUnit"/>
        <PeriodCount value="2"/>
        <PeriodicEffectArray value="DiabloBlackSoulstoneAddTokenCount"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="DiabloBlackSoulstoneDevilsDueTalentApplyBehavior">
        <ValidatorArray index="0" value="DiabloSourceHasLessThan100BlackSoulstoneStacks"/>
        <ValidatorArray value="SourceNotDead"/>
        <WhichUnit Value="Source"/>
        <Behavior value="BlackSoulstone"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloBlackSoulstoneLifeLeechTalentApplyBehavior">
        <ValidatorArray index="0" value="DiabloSourceHasLessThan100BlackSoulstoneStacks"/>
        <ValidatorArray value="SourceNotDead"/>
        <WhichUnit Value="Source"/>
        <Behavior value="BlackSoulstone"/>
    </CEffectApplyBehavior>
    <CEffectSet id="DiabloHeroWeaponLifeLeechTalentSet">
        <ValidatorArray value="TargetIsHero"/>
        <ValidatorArray value="CasterNotBlindedandTargetNotEvading"/>
        <ValidatorArray value="HasDiabloLifeLeech"/>
        <EffectArray value="DiabloHeroWeaponLifeLeechTalentDamage"/>
    </CEffectSet>
    <CEffectDamage id="DiabloShadowChargeProcDamage" parent="StormSpell">
        <Amount value="150"/>
    </CEffectDamage>
    <CEffectSwitch id="DiabloShadowChargeImpactSwitch">
        <CaseArray Validator="TargetWithin2point5RangeofCaster" Effect="DiabloShadowChargeSecondaryImpactSet"/>
        <CaseDefault value="DiabloShadowChargeNoTravelRefund"/>
    </CEffectSwitch>
    <CEffectSwitch id="DiabloShadowChargeKnockbackSwitch">
        <CaseArray Validator="TargetIsNotGroundMover" Effect="DiabloShadowChargeMissileKnockbackSet"/>
        <CaseDefault value="DiabloShadowChargeKnockbackLocationPersistent"/>
        <ValidatorArray value="TargetNotUnstoppable"/>
    </CEffectSwitch>
    <CEffectModifyUnit id="DiabloShadowChargeNoTravelRefund">
        <ValidatorArray value="DiabloShadowChargeCasterWithin2unitsofOrigin"/>
        <ImpactUnit Value="Caster"/>
        <Cost Abil="DiabloShadowCharge,Execute" CooldownOperation="Set"/>
        <VitalArray index="Energy">
            <Change value="60"/>
        </VitalArray>
    </CEffectModifyUnit>
    <CEffectRedirectMissile id="DiabloShadowChargeRedirectTargetMissile"/>
    <CEffectCreatePersistent id="DiabloShadowChargeUnpathableReLaunchDelayPersistent">
        <InitialDelay value="0.125"/>
        <FinalEffect value="HeroGenericMissileInterruptLaunchMissile"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloShadowChargeMissileKnockbackSet">
        <EffectArray value="DiabloShadowChargeDelayedKnockbackLocationPersistent"/>
        <EffectArray value="DiabloShadowChargeRedirectTargetMissile"/>
    </CEffectSet>
    <CEffectIssueOrder id="DiabloShadowChargeIssueStopOrder">
        <WhichUnit Value="Source"/>
        <Abil value="stop"/>
    </CEffectIssueOrder>
    <CEffectApplyBehavior id="DiabloShadowChargeApplyTargetImpactedBehavior">
        <ValidatorArray value="CasterNotDeadOrUserCategoryStunnedOrUserCategoryRootedOrStasisOrDazed"/>
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloShadowChargeTargetFoundBehavior"/>
    </CEffectApplyBehavior>
    <CEffectModifyUnit id="DiabloLightningBreathInterruptCooldownRefund">
        <ValidatorArray value="CasterisDeadorStasis"/>
        <ImpactUnit Value="Caster"/>
        <Cost Abil="DiabloLightningBreath,Execute" CooldownOperation="Set" CooldownTimeUse="10"/>
    </CEffectModifyUnit>
    <CEffectModifyUnit id="DiabloLightningBreathApplyCancelCooldown">
        <ImpactUnit Value="Caster"/>
        <Cost Abil="LightningBreathCancel,Execute" CooldownOperation="Set" CooldownTimeUse="0.625"/>
    </CEffectModifyUnit>
    <CEffectApplyBehavior id="DiabloLightningBreathApplyChanneledCoolup">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloLightningBreathChanneledCoolup"/>
    </CEffectApplyBehavior>
    <CEffectSet id="DiabloLightningBreathInitialSet">
        <EffectArray value="DiabloLightningBreathApplyCancelCooldown"/>
        <EffectArray value="DiabloLightningBreathApplyUnstoppableBehavior"/>
        <EffectArray value="DiabloLightningBreathApplyChanneledCoolup"/>
    </CEffectSet>
    <CEffectSet id="DiabloLightningBreathSearchImpactSet">
        <EffectArray value="DiabloLightningBreathApplyTargetBehavior"/>
    </CEffectSet>
    <CEffectRedirectMissile id="DiabloOverpowerMissileRedirect">
        <WhichUnit Effect="DiabloOverpowerInitialSet"/>
        <ImpactLocation Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
        <Movers Link="DiabloOverpowerRedirectMover"/>
    </CEffectRedirectMissile>
    <CEffectApplyBehavior id="DiabloBlackSoulstoneApplyBehavior">
        <ValidatorArray index="0" value="DiabloSourceHasLessThan100BlackSoulstoneStacks"/>
        <WhichUnit Value="Source"/>
        <Behavior value="BlackSoulstone"/>
    </CEffectApplyBehavior>
    <CEffectDamage id="DiabloHeroWeaponLifeLeechTalentDamage" parent="StormSpellPercentDamage">
        <ImpactLocation Value="TargetUnit"/>
        <VitalFractionMax index="Life" value="0.01"/>
        <LeechFraction index="Life" value="1"/>
    </CEffectDamage>
    <CEffectModifyUnit id="DiabloLordOfTerrorModifyUnitDummy"/>
    <CEffectSet id="DiabloLordOfTerrorImpactSet">
        <EffectArray value="DiabloLordOfTerrorDamage"/>
        <EffectArray value="DiabloLordOfTerrorModifyUnitDummy"/>
        <EffectArray value="ApplyAbilityImpactReveal"/>
    </CEffectSet>
    <CEffectApplyBehavior id="DiabloOverpowerApplyDemonicStrengthSlow" parent="StormSlowApply">
        <Chance value="0"/>
        <WhichUnit Value="Source"/>
        <Behavior value="DiabloDemonicStrengthSlow"/>
    </CEffectApplyBehavior>
    <CEffectModifyUnit id="DiabloOverpowerDominationMasteryCooldownReduction">
        <ImpactUnit Value="Caster"/>
        <Cost Abil="DiabloShadowCharge,Execute" CooldownOperation="Set"/>
        <ValidatorArray value="HasDiabloDomination"/>
    </CEffectModifyUnit>
    <CEffectSet id="DiabloOverpowerImpactSet">
        <EffectArray value="DiabloOverpowerApplyStunToTarget"/>
        <EffectArray value="DiabloOverpowerDamage"/>
        <EffectArray value="ApplyAbilityImpactReveal"/>
    </CEffectSet>
    <CEffectSet id="DiabloFireDevilImpactSet">
        <EffectArray value="DiabloFireStompFireDevilTalentDamage"/>
        <EffectArray value="ApplyAbilityImpactReveal"/>
    </CEffectSet>
    <CEffectCreatePersistent id="DiabloOverpowerChanneledPersistent">
        <WhichLocation Value="CasterUnit"/>
        <Flags index="Channeled" value="1"/>
        <FinalEffect value="DiabloOverpowerRedirectSet"/>
        <PeriodCount value="10"/>
        <PeriodicValidator value="DiabloOverpowerCasterAndTargetCombine"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectDestroyPersistent id="DiabloOverpowerDestroyWalkableTargetPersistent">
        <WhichLocation Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
        <Effect value="DiabloOverpowerWalkableTargetPersistent"/>
        <Count value="1"/>
        <Radius value="0.25"/>
    </CEffectDestroyPersistent>
    <CEffectDestroyPersistent id="DiabloOverpowerDestroyNotWalkableTargetPersistent">
        <WhichLocation Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
        <Effect value="DiabloOverpowerNotWalkableTargetPersistent"/>
        <Count value="1"/>
        <Radius value="0.25"/>
    </CEffectDestroyPersistent>
    <CEffectSet id="DiabloOverpowerRedirectSet">
        <EffectArray value="DiabloOverpowerCancelOrder"/>
        <EffectArray value="DiabloOverpowerRemoveTargetBehavior"/>
        <EffectArray value="DiabloOverpowerDestroyNotWalkableTargetPersistent"/>
        <EffectArray value="DiabloOverpowerDestroyWalkableTargetPersistent"/>
        <EffectArray value="DiabloOverpowerRemoveCasterBehavior"/>
        <EffectArray value="DiabloOverpowerMissileRedirect"/>
    </CEffectSet>
    <CEffectCancelOrder id="DiabloOverpowerCancelOrder">
        <AbilCmd value="DiabloOverpower,Execute"/>
        <Flags index="Queued" value="1"/>
        <Flags index="Uninterruptible" value="1"/>
        <WhichUnit Value="Caster"/>
    </CEffectCancelOrder>
    <CEffectDamage id="DiabloLordOfTerrorDamage" parent="StormSpellPercentDamage">
        <ImpactLocation Value="TargetUnit"/>
        <VitalFractionMax index="Life" value="0.1"/>
        <LeechFraction index="Life" value="1"/>
    </CEffectDamage>
    <CEffectEnumArea id="DiabloLordOfTerrorSearch">
        <ValidatorArray value="DiabloLordOfTerrorEnemyProximityValidator"/>
        <ImpactLocation Value="CasterPoint"/>
        <SearchFilters value="Heroic;Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
        <AreaArray Effect="DiabloLordOfTerrorImpactSet">
            <Radius value="6"/>
        </AreaArray>
        <RevealerParams HeightMap="Ground" Duration="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
    </CEffectEnumArea>
    <CEffectRemoveBehavior id="DiabloLightningBreathRemoveUnstoppableBehavior">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="DiabloLightningBreathUnstoppable"/>
        <Count value="1"/>
    </CEffectRemoveBehavior>
    <CEffectCreatePersistent id="DiabloLightningBreathOffsetPersistent">
        <WhichLocation Value="CasterUnit"/>
        <OffsetVectorEndLocation Value="CasterUnit"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloLightningBreathSearchArea"/>
        <PeriodicOffsetArray value="0,-5.25,0" Y="-5.25"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectEnumArea id="DiabloLightningBreathSearchArea">
        <ImpactLocation Value="TargetPoint"/>
        <SearchFilters value="-;Self,Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Stasis,Invulnerable"/>
        <SearchFlags index="DoActorSearch" value="1"/>
        <AreaArray Effect="DiabloLightningBreathSearchImpactSet">
            <RectangleWidth value="3"/>
            <RectangleHeight value="10.5"/>
        </AreaArray>
        <RevealerParams Duration="0.75" ShapeExpansion="1">
            <RevealFlags index="Unfog" value="1"/>
        </RevealerParams>
    </CEffectEnumArea>
    <CEffectApplyBehavior id="DiabloLightningBreathApplyUnstoppableBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloLightningBreathUnstoppable"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="DiabloLightningBreathInitialPersistent">
        <TimeScaleSource Value="Caster"/>
        <Flags index="Channeled" value="1"/>
        <InitialEffect value="DiabloLightningBreathInitialSet"/>
        <ExpireEffect value="DiabloLightningBreathStartBreathSet"/>
        <PeriodCount value="8"/>
        <PeriodicValidator value="DoesNotHaveChanneledAbilityFullStopBehavior"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloOverpowerCheckForDisplaceableInitialSet">
        <ValidatorArray value="NotVehicle"/>
        <ValidatorArray value="TargetIsGroundMover"/>
        <EffectArray value="DiabloOverpowerApplyCasterBehavior"/>
        <EffectArray value="DiabloOverpowerInitialSet"/>
        <EffectArray value="DiabloOverpowerDominationMasteryCooldownReduction"/>
        <EffectArray value="HeroGenericMercDefenderAggroDamage"/>
    </CEffectSet>
    <CEffectSet id="DiabloLightningBreathStartBreathSet">
        <EffectArray value="DiabloLightningBreathApplyControllerBehavior"/>
        <TargetLocationType value="Point"/>
    </CEffectSet>
    <CEffectApplyBehavior id="DiabloLightningBreathApplyControllerBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloLightningBreathController"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="DiabloBlackSoulstoneResurrectDummyPersistent"/>
    <CEffectDamage id="DiabloFireStompFireDevilTalentDamage" parent="StormSpell">
        <Amount value="20"/>
    </CEffectDamage>
    <CEffectEnumArea id="DiabloFireStompFireDevilTalentSearch">
        <SearchFilters value="-;Self,Player,Ally,Neutral,ImmuneToAOE,Missile,Stasis,Dead,Hidden,Invulnerable"/>
        <AreaArray Effect="DiabloFireDevilImpactSet">
            <Radius value="2.5"/>
        </AreaArray>
        <SearchFlags index="ExtendByUnitRadius" value="1"/>
    </CEffectEnumArea>
    <CEffectApplyBehavior id="DiabloFireStompApplyFireDevilTalentBuff">
        <ValidatorArray index="0" value="HasDiabloFireDevil"/>
        <WhichUnit Value="Caster"/>
        <Behavior value="FireDevil"/>
    </CEffectApplyBehavior>
    <CEffectDestroyPersistent id="DiabloOverpowerDestroyInitialPersistent">
        <WhichLocation Value="SourceUnit"/>
        <Effect value="DiabloOverpowerInitialPersistent"/>
        <Count value="4294967295"/>
    </CEffectDestroyPersistent>
    <CEffectSet id="DiabloOverpowerInitialTargetSet">
        <EffectArray value="DiabloOverpowerApplyTargetBehavior"/>
    </CEffectSet>
    <CEffectSet id="DiabloShadowChargeDummySet"/>
    <!-- Shadow Charge -->
    <CEffectEnumArea id="DiabloShadowChargeDummySearch">
        <SearchFilters value="Visible;Self,Player,Ally,ImmuneToAOE,ImmuneToSkillshots,Structure,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
        <AreaArray Effect="DiabloShadowChargeDummySet">
            <Radius value="0.125"/>
        </AreaArray>
    </CEffectEnumArea>
    <!-- Shadow Charge Launch Diablo Effects -->
    <CEffectSet id="DiabloShadowChargeLaunchDiabloSet">
        <EffectArray value="DiabloShadowChargeLaunchDiabloSwitch"/>
        <TargetLocationType value="UnitOrPoint"/>
    </CEffectSet>
    <CEffectSwitch id="DiabloShadowChargeLaunchDiabloSwitch">
        <CaseArray Validator="DiabloShadowChargeTargetIsStructure" Effect="DiabloShadowChargeLaunchDiabloStructureTarget"/>
        <CaseDefault value="DiabloShadowChargeLaunchDiablo"/>
    </CEffectSwitch>
    <CEffectCreatePersistent id="DiabloOverpowerWalkableTargetPersistent">
        <WhichLocation Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
        <Flags index="Channeling" value="1"/>
        <InitialDelay value="0.1875"/>
        <PeriodCount value="1"/>
        <PeriodicValidator value="DiabloOverpowerCasterAndTargetCombine"/>
        <PeriodicEffectArray value="DiabloOverpowerLaunchTargetMissileWalkable"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <!-- Initial Set -->
    <CEffectSet id="DiabloShadowChargeInitialSet">
        <ValidatorArray value="UserCategoryCasterNotRooted"/>
        <ValidatorArray value="CasterNotSilenced"/>
        <ValidatorArray value="TargetisWalkableOrStructureOrPseudoStructure"/>
        <ValidatorArray value="TargetIsEnemy"/>
        <EffectArray value="DiabloShadowChargeApplyCasterBehavior"/>
        <EffectArray value="DiabloShadowChargeLaunchDiabloSwitch"/>
        <EffectArray value="DiabloShadowChargePersistent"/>
    </CEffectSet>
    <!-- Initial Set Effects -->
    <CEffectApplyBehavior id="DiabloShadowChargeApplyCasterBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloShadowChargeCasterBehavior"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="DiabloShadowChargePersistent">
        <WhichLocation Value="TargetUnit"/>
        <TimeScaleSource Value="Caster"/>
        <Flags index="Channeled" value="1"/>
        <RevealRadius value="1"/>
        <RevealFlags index="Unfog" value="1"/>
    </CEffectCreatePersistent>
    <CEffectLaunchMissileAdvanced id="DiabloShadowChargeLaunchDiablo" parent="StormLaunchUnitTargetUnitValidated">
        <Movers Link="DiabloShadowChargeMissile"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <Flags index="Relaunch" value="1"/>
        <PlacementRange value="2.5"/>
        <ImpactRange value="2"/>
        <InterruptEffect value="DiabloShadowChargeRemoveCasterBehavior"/>
        <FinishEffect value="DiabloShadowChargeImpactSet"/>
        <ImpactEffect value="DiabloShadowChargeApplyTargetImpactedBehavior"/>
        <ImpactLocation Effect="DiabloShadowChargeInitialSet"/>
        <RelaunchRangeLimit value="2.5"/>
    </CEffectLaunchMissileAdvanced>
    <!-- Caster Effects -->
    <CEffectCreatePersistent id="DiabloShadowChargeDiabloKnockbackPersistent">
        <WhichLocation Value="CasterUnit"/>
        <InitialEffect value="DiabloShadowChargeApplyDiabloKnockbackForce"/>
        <PeriodCount value="3"/>
        <PeriodicValidator value="DiabloShadowChargeDiabloKnockbackValidator"/>
        <PeriodicEffectArray value="DiabloShadowChargeApplyDiabloKnockbackForce"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="DiabloShadowChargeAttackCancelPersistent">
        <WhichLocation Value="CasterUnit"/>
        <InitialDelay value="0.25"/>
        <PeriodCount value="12"/>
        <PeriodicEffectArray value="DiabloShadowChargeCancelAttackSet"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectCancelOrder id="DiabloShadowChargeCancelAttackOrder">
        <WhichUnit Value="Caster"/>
        <AbilCmd value="attack,Execute"/>
        <Flags index="Queued" value="1"/>
    </CEffectCancelOrder>
    <CEffectSet id="DiabloShadowChargeCancelAttackSet">
        <ValidatorArray value="DiabloShadowChargeCancelAttackCombineValidator"/>
        <EffectArray value="DiabloShadowChargeCancelAttackOrder"/>
        <EffectArray value="DiabloShadowChargeDestroyAttackPersistent"/>
    </CEffectSet>
    <CEffectApplyForce id="DiabloShadowChargeApplyDiabloKnockbackForce">
        <WhichLocation Effect="DiabloShadowChargeKnockbackSet" Value="TargetPoint"/>
        <WhichUnit Effect="DiabloShadowChargeInitialSet" Value="Caster"/>
        <Amount value="-60"/>
    </CEffectApplyForce>
    <CEffectLaunchMissileAdvanced id="DiabloShadowChargeLaunchDiabloStructureTarget" parent="DiabloShadowChargeLaunchDiablo">
        <Name value="Effect/Name/DiabloShadowChargeLaunchDiabloStructureTarget"/>
        <Flags index="Placement" value="1"/>
        <Flags index="PlacementOriginSideOfFootprints" value="1"/>
        <PeriodicValidator value="CasterNotDeadOrUserCategoryStunnedOrUserCategoryRootedOrStasisOrDazed"/>
        <PlacementRange value="10"/>
        <ImpactRange value="0.85"/>
    </CEffectLaunchMissileAdvanced>
    <CEffectIssueOrder id="DiabloShadowChargeIssueAttackOrder">
        <ValidatorArray value="CasterHasLE1Orders"/>
        <WhichUnit Effect="DiabloShadowChargeInitialSet" Value="Caster"/>
        <Abil value="attack"/>
        <Target Effect="DiabloShadowChargeInitialSet" Value="TargetUnit"/>
    </CEffectIssueOrder>
    <!-- Shadow Charge Impact Set -->
    <CEffectSet id="DiabloShadowChargeImpactSet">
        <EffectArray value="DiabloShadowChargeUnpathableReLaunchDelayPersistent"/>
        <EffectArray value="DiabloShadowChargeRemoveCasterBehavior"/>
        <EffectArray value="DiabloShadowChargeImpactSwitch"/>
    </CEffectSet>
    <CEffectSet id="DiabloShadowChargeKnockbackCheckPathableSetBigHeroes">
        <ValidatorArray value="DiabloShadowChargeLocationIsNotWalkableOrTargetHasHitPathingBlocker"/>
        <ValidatorArray value="DiabloShadowChargeTargetIsFat"/>
        <EffectArray value="DiabloShadowChargeApplyBonusStun"/>
        <EffectArray value="DiabloShadowChargeRemoveTargetKnockbackBehavior"/>
        <EffectArray value="DiabloShadowChargeRemoveTargetSpeedBehavior"/>
        <EffectArray value="DiabloShadowChargeApplyStunLimiter"/>
        <TargetLocationType value="Point"/>
    </CEffectSet>
    <!-- Target Effects -->
    <!-- Knockback Effects -->
    <!-- Check 3 points behind the Shadow Charge target and determine if they are pathable. -->
    <CEffectCreatePersistent id="DiabloShadowChargeKnockbackCheckPathablePersistent">
        <WhichLocation Effect="DiabloShadowChargeImpactSet" Value="TargetUnit"/>
        <OffsetVectorEndLocation Effect="DiabloShadowChargeKnockbackSet"/>
        <InitialEffect value="DiabloShadowChargeApplyKnockbackForce"/>
        <PeriodCount value="5"/>
        <!-- We have 5 Periodic Effects because 2 are excluded through validation (Big Heroes vs. Small Heroes). -->
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackCheckPathableSet"/>
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackCheckPathableSetSmallHeroes"/>
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackCheckPathableSetSmallHeroes"/>
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackCheckPathableSetBigHeroes"/>
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackCheckPathableSetBigHeroes"/>
        <PeriodicOffsetArray value="0,-1,0" Y="-1"/>
        <PeriodicOffsetArray value="0.5,-1,0" X="0.5" Y="-1"/>
        <PeriodicOffsetArray value="-0.5,-1,0" X="-0.5" Y="-1"/>
        <PeriodicOffsetArray value="0.8,-1,0" X="0.8" Y="-1"/>
        <PeriodicOffsetArray value="-0.8,-1,0" X="-0.8" Y="-1"/>
    </CEffectCreatePersistent>
    <!-- These three Check Pathable sets do the same thing, but use different validators to check if the target has the IsFat behavior -->
    <CEffectSet id="DiabloShadowChargeKnockbackCheckPathableSet">
        <ValidatorArray value="DiabloShadowChargeLocationIsNotWalkableOrTargetHasHitPathingBlocker"/>
        <EffectArray value="DiabloShadowChargeApplyBonusStun"/>
        <EffectArray value="DiabloShadowChargeRemoveTargetKnockbackBehavior"/>
        <EffectArray value="DiabloShadowChargeRemoveTargetSpeedBehavior"/>
        <EffectArray value="DiabloShadowChargeApplyStunLimiter"/>
        <TargetLocationType value="Point"/>
    </CEffectSet>
    <CEffectSet id="DiabloShadowChargeSecondaryImpactSet">
        <EffectArray value="DiabloShadowChargeDamage"/>
        <EffectArray value="CameraShakeMediumCasterDummySet"/>
        <EffectArray value="DiabloShadowChargeApplyResistant"/>
        <EffectArray value="CameraShakeMediumTauntingTotemSet"/>
        <!--EffectArray value="ShadowChargeModifyWeaponCooldown"/-->
        <EffectArray value="DiabloShadowChargeKnockbackSwitch"/>
        <!--EffectArray value="DiabloShadowChargeAttackCancelPersistent"/-->
        <EffectArray value="ApplyAbilityImpactReveal"/>
        <EffectArray value="DismountDecloakCasterSet"/>
        <ValidatorArray value="TargetWithin2point5RangeofCaster"/>
        <ValidatorArray value="DiabloShadowChargeHasImpactedTarget"/>
        <ValidatorArray value="CasterNotDeadOrStunnedOrRootedOrPolymorphedOrStasisOrDazedOrFearedExceptTimeStop"/>
    </CEffectSet>
    <CEffectSet id="DiabloShadowChargeKnockbackCheckPathableSetSmallHeroes">
        <ValidatorArray value="DiabloShadowChargeLocationIsNotWalkableOrTargetHasHitPathingBlocker"/>
        <ValidatorArray value="DiabloShadowChargeTargetIsNotFat"/>
        <EffectArray value="DiabloShadowChargeApplyBonusStun"/>
        <EffectArray value="DiabloShadowChargeRemoveTargetKnockbackBehavior"/>
        <EffectArray value="DiabloShadowChargeRemoveTargetSpeedBehavior"/>
        <EffectArray value="DiabloShadowChargeApplyStunLimiter"/>
        <TargetLocationType value="Point"/>
    </CEffectSet>
    <!-- Shadow Charge Impact Set Effects -->
    <CEffectDamage id="DiabloShadowChargeDamage" parent="StormSpell">
        <ImpactLocation Value="TargetUnit"/>
        <Amount value="75"/>
    </CEffectDamage>
    <CEffectCreatePersistent id="DiabloShadowChargeLaunchPersistent">
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloShadowChargeLaunchDiabloSet"/>
        <PeriodicOffsetArray value="0,-5,0" Y="-5"/>
    </CEffectCreatePersistent>
    <CEffectRemoveBehavior id="DiabloShadowChargeRemoveCasterBehavior">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="DiabloShadowChargeCasterBehavior"/>
    </CEffectRemoveBehavior>
    <CEffectApplyBehavior id="DiabloShadowChargeApplyCasterBehaviorAfterImpact">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloShadowChargeCasterPostChargeBehavior"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloShadowChargeApplyCasterPostChargeBehaviorChannel">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloShadowChargeCasterPostChargeBehaviorChannel"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="DiabloShadowChargeKnockbackPersistent">
        <InitialEffect value="DiabloShadowChargeKnockbackCheckPathablePersistent"/>
        <PeriodCount value="3"/>
        <PeriodicValidator value="DiabloShadowChargeDiabloKnockbackValidator"/>
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackCheckPathablePersistent"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectModifyUnit id="ShadowChargeModifyWeaponCooldown">
        <ImpactUnit Value="Caster"/>
        <Weapon Weapon="HeroDiablo" CooldownOperation="Set" CooldownAmount="0.3125"/>
    </CEffectModifyUnit>
    <CEffectApplyBehavior id="DiabloShadowChargeApplyResistant">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloShadowChargeArmorIncrease"/>
    </CEffectApplyBehavior>
    <!-- These are the actual effects that run if the target collides with an unpathable point-->
    <CEffectApplyBehavior id="DiabloShadowChargeApplyBonusStun">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Behavior value="DiabloShadowChargeExtraStun"/>
        <ValidatorArray index="0" value="DiabloShadowChargeTargetDoesNotHaveStunLimiter"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloShadowChargeApplyTargetMoveSpeedBehavior">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Behavior value="DiabloShadowChargeTargetMoveSpeedBehavior"/>
    </CEffectApplyBehavior>
    <CEffectSet id="DiabloShadowChargeKnockbackSet">
        <EffectArray value="DiabloShadowChargeApplyCasterBehaviorAfterImpact"/>
        <EffectArray value="DiabloShadowChargeApplyCasterPostChargeBehaviorChannel"/>
        <EffectArray value="DiabloShadowChargeKnockbackStunApplyBehavior"/>
        <EffectArray value="DiabloShadowChargeApplyTargetMoveSpeedBehavior"/>
        <EffectArray value="DiabloShadowChargeKnockbackPersistent"/>
        <EffectArray value="DiabloShadowChargeDiabloKnockbackPersistent"/>
    </CEffectSet>
    <CEffectRemoveBehavior id="DiabloShadowChargeRemoveTargetKnockbackBehavior">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <BehaviorLink value="DiabloShadowChargeKnockbackStun"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="DiabloShadowChargeRemoveTargetSpeedBehavior">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <BehaviorLink value="DiabloShadowChargeTargetMoveSpeedBehavior"/>
    </CEffectRemoveBehavior>
    <CEffectApplyBehavior id="DiabloShadowChargeKnockbackStunApplyBehavior">
        <Behavior value="DiabloShadowChargeKnockbackStun"/>
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="DiabloShadowChargeKnockbackLocationPersistent">
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackSet"/>
        <PeriodicOffsetArray value="0,-5,0" Y="-5"/>
        <OffsetVectorStartLocation Effect="DiabloShadowChargeInitialSet" Value="OriginPoint"/>
        <ValidatorArray value="TargetNotInStasis"/>
        <ValidatorArray value="TargetNotUnstoppable"/>
        <ValidatorArray value="DiabloFacingShadowChargeTargetWithin30"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="DiabloShadowChargeDelayedKnockbackLocationPersistent">
        <ValidatorArray value="TargetNotInStasis"/>
        <ValidatorArray value="TargetNotUnstoppable"/>
        <ValidatorArray value="DiabloFacingShadowChargeTargetWithin30"/>
        <OffsetVectorStartLocation Effect="DiabloShadowChargeInitialSet" Value="OriginPoint"/>
        <PeriodCount value="1"/>
        <PeriodicValidator value="DiabloFacingShadowChargeTargetWithin30"/>
        <PeriodicEffectArray value="DiabloShadowChargeKnockbackSet"/>
        <PeriodicOffsetArray value="0,-5,0" Y="-5"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectApplyForce id="DiabloShadowChargeApplyKnockbackForce">
        <WhichLocation Effect="DiabloShadowChargeKnockbackSet" Value="TargetPoint"/>
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Amount value="-60"/>
    </CEffectApplyForce>
    <CEffectApplyBehavior id="FireStompApplyDummyBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="FireStompDummyBehavior"/>
    </CEffectApplyBehavior>
    <CEffectDamage id="FireStompMissileMasterySuicide" parent="StormSuicideParent"/>
    <CEffectSet id="FireStompMissileImpactSet">
        <EffectArray value="DiabloFireStompReturnPersistentSwitch"/>
        <EffectArray value="FireStompMissileMasterySuicideDelay"/>
    </CEffectSet>
    <CEffectCreatePersistent id="FireStompMissileMasterySuicideDelay">
        <WhichLocation Value="SourceUnit"/>
        <InitialEffect value="FireStompMissileMasterySuicide"/>
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="DiabloFireStompApplyReturnMissilePause">
        <WhichUnit Value="Source"/>
        <Behavior value="DiabloFireStompReturnMissilePause"/>
    </CEffectApplyBehavior>
    <CEffectIssueOrder id="DiabloOverpowerIssueAttackOrder">
        <ValidatorArray value="CasterHasLE1Orders"/>
        <WhichUnit Effect="DiabloOverpowerInitialSet" Value="Caster"/>
        <Abil value="attack"/>
        <CmdFlags index="Queued" value="1"/>
        <Target Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
    </CEffectIssueOrder>
    <CEffectCreatePersistent id="DiabloOverpowerInitialPersistent">
        <WhichLocation Value="CasterUnit"/>
        <InitialEffect value="DiabloOverpowerInitialTargetSet"/>
        <ExpireOffset value="0,2,0" Y="2"/>
        <PeriodCount value="2"/>
        <PeriodicEffectArray value="DiabloOverpowerWalkableSet"/>
        <PeriodicEffectArray value="DiabloOverpowerNotWalkableSet"/>
        <PeriodicOffsetArray value="0,2,0" Y="2"/>
        <PeriodicOffsetArray value="0,2,0" Y="2"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloOverpowerEndSetWalkable">
        <EffectArray value="DiabloOverpowerIssueAttackOrder"/>
        <EffectArray value="DiabloOverpowerModifyWeaponCooldown"/>
        <EffectArray value="DiabloOverpowerRemoveTargetBehavior"/>
        <EffectArray value="CameraShakeMediumCasterDummySet"/>
        <EffectArray value="CameraShakeMediumTauntingTotemSet"/>
    </CEffectSet>
    <CEffectSet id="DiabloOverpowerEndSetNotWalkable">
        <EffectArray value="DiabloOverpowerIssueAttackOrder"/>
        <EffectArray value="DiabloOverpowerModifyWeaponCooldown"/>
        <EffectArray value="CameraShakeMediumCasterDummySet"/>
        <EffectArray value="CameraShakeMediumTauntingTotemSet"/>
    </CEffectSet>
    <CEffectSet id="DiabloOverpowerInitialSet">
        <ValidatorArray value="TargetIsDisplaceableCombine"/>
        <EffectArray value="DiabloOverpowerInitialPersistent"/>
        <EffectArray value="DiabloOverpowerChanneledPersistent"/>
    </CEffectSet>
    <CEffectLaunchMissileAdvanced id="DiabloOverpowerLaunchTargetMissileNotWalkable">
        <ValidatorArray index="0" value="DiabloOverpowerCasterAndTargetCombine"/>
        <LaunchLocation Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
        <ImpactLocation Value="CasterPoint"/>
        <ImpactOffset value="0,-1,0" Y="-1"/>
        <ImpactEffect value="DiabloOverpowerEndSetNotWalkable"/>
        <SharedFlags index="2D" value="1"/>
        <Flags index="Placement" value="1"/>
        <Flags index="PlacementIgnoreBlockers" value="1"/>
        <PlacementRange value="10"/>
        <Movers Link="DiabloOverpowerTargetMover"/>
        <DeathType value="Unknown"/>
    </CEffectLaunchMissileAdvanced>
    <CEffectSet id="DiabloOverpowerNotWalkableSet">
        <ValidatorArray value="NotWalkable"/>
        <EffectArray value="DiabloOverpowerNotWalkableTargetPersistent"/>
        <EffectArray value="DiabloOverpowerNotWalkableCasterPersistent"/>
        <TargetLocationType value="UnitOrPoint"/>
    </CEffectSet>
    <CEffectCreatePersistent id="DiabloOverpowerNotWalkableTargetPersistent">
        <WhichLocation Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
        <TimeScaleSource Value="Caster"/>
        <Flags index="Channeling" value="1"/>
        <InitialDelay value="0.1875"/>
        <PeriodCount value="1"/>
        <PeriodicValidator value="DiabloOverpowerCasterAndTargetCombine"/>
        <PeriodicEffectArray value="DiabloOverpowerLaunchTargetMissileNotWalkable"/>
    </CEffectCreatePersistent>
    <CEffectCreatePersistent id="DiabloOverpowerNotWalkableCasterPersistent">
        <WhichLocation Effect="DiabloOverpowerInitialSet" Value="CasterUnit"/>
        <OffsetVectorStartLocation Value="CasterUnit"/>
        <OffsetVectorEndLocation Value="CasterUnit"/>
        <OffsetFacingFallback Value="CasterUnit"/>
        <InitialDelay value="0.0625"/>
        <InitialEffect value="DiabloOverpowerLaunchCasterMissile"/>
        <InitialOffset value="0,-1,0" Y="-1"/>
        <PeriodicValidator value="CasterNotDead"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloLightningBreathDummy"/>
    <CEffectApplyBehavior id="DiabloOverpowerApplyCasterBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloOverpowerCasterBehavior"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloOverpowerApplyStunToTarget">
        <WhichUnit Value="Source"/>
        <Behavior value="DiabloOverpowerStun"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloOverpowerApplyTargetBehavior">
        <WhichUnit Effect="DiabloOverpowerInitialSet"/>
        <Behavior value="DiabloOverpowerTargetBehavior"/>
    </CEffectApplyBehavior>
    <CEffectLaunchMissileAdvanced id="DiabloOverpowerLaunchTargetMissileWalkable">
        <ValidatorArray index="0" value="DiabloOverpowerCasterAndTargetCombine"/>
        <LaunchLocation Effect="DiabloOverpowerInitialSet" Value="TargetUnit"/>
        <ImpactLocation Value="CasterPoint"/>
        <ImpactOffset value="0,-2,0" Y="-2"/>
        <ImpactEffect value="DiabloOverpowerEndSetWalkable"/>
        <SharedFlags index="2D" value="1"/>
        <Flags index="Placement" value="1"/>
        <Flags index="PlacementIgnoreBlockers" value="1"/>
        <Movers Link="DiabloOverpowerTargetMover"/>
        <DeathType value="Unknown"/>
    </CEffectLaunchMissileAdvanced>
    <CEffectDamage id="DiabloOverpowerDamage" parent="StormSpell">
        <ImpactLocation Value="SourceUnit"/>
        <Amount value="73"/>
    </CEffectDamage>
    <CEffectLaunchMissileAdvanced id="DiabloOverpowerLaunchCasterMissile">
        <ImpactLocation Value="TargetPoint"/>
        <SharedFlags index="2D" value="1"/>
        <Flags index="Placement" value="1"/>
        <Flags index="PlacementIgnoreBlockers" value="1"/>
        <Flags index="PlacementIgnoreCliffTest" value="1"/>
        <PlacementRange value="2"/>
        <Movers Link="DiabloOverpowerCasterMover" IfRangeLTE="500"/>
        <DeathType value="Unknown"/>
    </CEffectLaunchMissileAdvanced>
    <CEffectSet id="DiabloOverpowerWalkableSet">
        <ValidatorArray value="Walkable"/>
        <EffectArray value="DiabloOverpowerWalkableTargetPersistent"/>
        <TargetLocationType value="UnitOrPoint"/>
    </CEffectSet>
    <CEffectRemoveBehavior id="DiabloOverpowerRemoveCasterBehavior">
        <WhichUnit Effect="DiabloOverpowerInitialSet" Value="Caster"/>
        <BehaviorLink value="DiabloOverpowerCasterBehavior"/>
        <Count value="1"/>
    </CEffectRemoveBehavior>
    <CEffectRemoveBehavior id="DiabloOverpowerRemoveTargetBehavior">
        <WhichUnit Effect="DiabloOverpowerInitialSet"/>
        <BehaviorLink value="DiabloOverpowerTargetBehavior"/>
        <Count value="1"/>
    </CEffectRemoveBehavior>
    <CEffectModifyUnit id="DiabloOverpowerModifyWeaponCooldown">
        <ImpactUnit Effect="DiabloOverpowerInitialSet" Value="Caster"/>
        <Weapon Weapon="HeroDiablo" CooldownOperation="Set" CooldownAmount="0.4125"/>
    </CEffectModifyUnit>
    <CEffectSet id="DiabloLightningBreathDummyEffect"/>
    <CEffectSet id="DiabloFireStompInitialSet">
        <EffectArray value="DiabloPassiveNightmarishSet"/>
        <EffectArray value="FireStompInitialPersistent"/>
        <EffectArray value="FireStompApplyDummyBehavior"/>
        <EffectArray value="DiabloFireStompApplyFireDevilTalentBuff"/>
        <EffectArray value="DiabloFireStompApplyRampage"/>
    </CEffectSet>
    <CEffectSet id="FireStompReturnSoundDummy">
        <TargetLocationType value="Point"/>
        <Chance value="0"/>
    </CEffectSet>
    <CEffectApplyBehavior id="FireStompApplyAntiGibBehavior">
        <Behavior value="FireStompAntiGibBehavior"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="FireStompApplyMissileScanDelayPersistent">
        <WhichLocation Value="TargetUnit"/>
        <InitialEffect value="FireStompInitialSearch"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="FireStompApplySearchBehavior"/>
        <PeriodicPeriodArray value="0.0625"/>
    </CEffectCreatePersistent>
    <CEffectSet id="FireStompInitialImpactSet">
        <ValidatorArray value="TargetIsEnemy"/>
        <ValidatorArray value="HasNoFireStompAntiGib"/>
        <EffectArray value="FireStompApplyAntiGibBehavior"/>
        <EffectArray value="FireStompDamage"/>
        <EffectArray value="FireStompSuicideRemove"/>
        <EffectArray value="ApplyAbilityImpactReveal"/>
    </CEffectSet>
    <CEffectEnumArea id="FireStompInitialSearch">
        <SearchFilters value="-;Player,Ally,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden"/>
        <AreaArray Arc="90" MaxCount="1" Effect="FireStompInitialImpactSet">
            <Radius value="0.25"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectRemoveBehavior id="DiabloLightningBreathRemoveControllerBehavior">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="DiabloLightningBreathController"/>
        <Count value="1"/>
    </CEffectRemoveBehavior>
    <CEffectCreatePersistent id="FireStompInitialPersistent">
        <WhichLocation Value="SourcePoint"/>
        <InitialEffect value="CameraShakeMediumCasterDummySet"/>
        <!--ExpireDelay value="0.9"/-->
        <PeriodCount value="8"/>
        <PeriodicEffectArray value="FireStompLaunchPersistent"/>
        <PeriodicOffsetArray value="0,-1,0" Y="-1"/>
        <PeriodicOffsetArray value="0,1,0" Y="1"/>
        <PeriodicOffsetArray value="-1,0,0" X="-1"/>
        <PeriodicOffsetArray value="1,0,0" X="1"/>
        <PeriodicOffsetArray value="0.707,0.707,0" X="0.707" Y="0.707"/>
        <PeriodicOffsetArray value="-0.707,0.707,0" X="-0.707" Y="0.707"/>
        <PeriodicOffsetArray value="-0.707,-0.707,0" X="-0.707" Y="-0.707"/>
        <PeriodicOffsetArray value="0.707,-0.707,0" X="0.707" Y="-0.707"/>
        <FinalEffect value="DiabloFireStompHellfireTalentResetSet"/>
        <!--ExpireEffect value="FireStompReturnSoundDummy"/-->
    </CEffectCreatePersistent>
    <CEffectApplyBehavior id="FireStompApplySearchBehavior">
        <WhichUnit Value="Source"/>
        <Behavior value="FireStompMissileSearch"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="FireStompReturnApplySearchBehavior">
        <WhichUnit Value="Source"/>
        <Behavior value="FireStompReturnMissileSearch"/>
    </CEffectApplyBehavior>
    <CEffectDamage id="FireStompDamage" parent="StormSpell">
        <ImpactLocation Value="TargetUnit"/>
        <Amount value="54"/>
        <MultiplicativeModifierArray index="Hellfire" Validator="DiabloHasHellfireTalent" Accumulator="HellfireMissileDamageAccumulator"/>
        <CritValidatorArray index="0" value="DiabloFireStompHellfireCritCombine"/>
    </CEffectDamage>
    <CEffectSet id="DiabloFireStompReturnMissileLaunchSet">
        <EffectArray value="FireStompReturnApplySearchBehavior"/>
        <EffectArray value="DiabloFireStompApplyReturnMissileSuicideBehavior"/>
    </CEffectSet>
    <CEffectDamage id="FireStompReturnDamage" parent="StormSpell">
        <ImpactLocation Value="TargetUnit"/>
        <Amount value="81"/>
        <MultiplicativeModifierArray index="Hellfire" Validator="DiabloHasHellfireTalent" Accumulator="HellfireMissileDamageAccumulator"/>
        <CritValidatorArray index="0" value="DiabloFireStompHellfireCritCombine"/>
    </CEffectDamage>
    <CEffectSet id="FireStompImpactDummy"/>
    <CEffectSet id="FireStompImpactSet">
        <ValidatorArray value="TargetIsEnemy"/>
        <ValidatorArray value="HasNoFireStompAntiGib"/>
        <ValidatorArray value="noMarkers"/>
        <EffectArray value="FireStompApplyAntiGibBehavior"/>
        <EffectArray value="FireStompDamage"/>
        <EffectArray value="DiabloFireStompHellfireTalentStacksModifyPlayer"/>
        <EffectArray value="DiabloFireStompHellfireTalentModifyTokenCount"/>
        <EffectArray value="FireStompSuicideRemove"/>
        <EffectArray value="DiabloFireStompApplyDebilitatingFlamesTalentSlow"/>
        <EffectArray value="ApplyAbilityImpactReveal"/>
    </CEffectSet>
    <CEffectSet id="FireStompReturnImpactSet">
        <ValidatorArray value="TargetIsEnemy"/>
        <ValidatorArray value="HasNoFireStompAntiGib"/>
        <EffectArray value="FireStompApplyAntiGibBehavior"/>
        <EffectArray value="FireStompReturnDamage"/>
        <EffectArray value="FireStompSuicideRemove"/>
        <EffectArray value="DiabloFireStompHellfireTalentStacksModifyPlayer"/>
        <EffectArray value="DiabloFireStompHellfireTalentModifyTokenCount"/>
        <EffectArray value="DiabloFireStompApplyDebilitatingFlamesTalentSlow"/>
        <EffectArray value="ApplyAbilityImpactReveal"/>
    </CEffectSet>
    <CEffectLaunchMissile id="FireStompLaunchMissile">
        <ImpactLocation Value="TargetPoint"/>
        <LaunchEffect value="DiabloFireStompLaunchSet"/>
        <ImpactEffect value="FireStompMissileImpactSet"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompMissile"/>
        <LaunchOffset value="0,-1,0" Y="-1"/>
        <DeathType value="Unknown"/>
    </CEffectLaunchMissile>
    <CEffectCreatePersistent id="FireStompLaunchPersistent">
        <WhichLocation Value="CasterPoint"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="FireStompLaunchMissile"/>
        <PeriodicOffsetArray value="0,-10.5,0" Y="-10.5"/>
        <PeriodicPeriodArray value="0"/>
        <Marker>
            <MatchFlags index="Id" value="1"/>
        </Marker>
    </CEffectCreatePersistent>
    <CEffectEnumArea id="FireStompSearch">
        <LaunchLocation Value="OriginPoint"/>
        <SearchFilters value="-;Player,Ally,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden"/>
        <SearchFlags index="DoActorSearch" value="1"/>
        <AreaArray MaxCount="1" Effect="FireStompImpactSet">
            <Radius value="0.66"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectLaunchMissile id="FireStompLaunchReturnMissile">
        <ValidatorArray index="0" value="CasterNotDead"/>
        <LaunchLocation Effect="FireStompReturnCreatePersistent" Value="TargetPoint"/>
        <ImpactLocation Effect="FireStompReturnCreatePersistent" Value="CasterUnit"/>
        <LaunchEffect value="DiabloFireStompReturnMissileLaunchSet"/>
        <ImpactEffect value="FireStompImpactDummy"/>
        <SharedFlags index="TravelValidation" value="1"/>
        <SharedFlags index="ValidateAbil" value="0"/>
        <AmmoUnit value="DiabloFireStompReturnMissile"/>
        <Marker>
            <MatchFlags index="Id" value="1"/>
        </Marker>
    </CEffectLaunchMissile>
    <CEffectApplyBehavior id="DiabloFireStompApplyReturnMissileSuicideBehavior">
        <WhichUnit Value="Source"/>
        <Behavior value="FireStompReturnMissileSuicideBehavior"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="FireStompReturnCreatePersistent">
        <WhichLocation Effect="FireStompLaunchMissile"/>
        <PeriodCount value="1"/>
        <PeriodicEffectArray value="FireStompLaunchReturnMissile"/>
        <PeriodicPeriodArray value="0"/>
    </CEffectCreatePersistent>
    <CEffectEnumArea id="FireStompReturnSearch">
        <SearchFilters value="-;Player,Ally,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden"/>
        <AreaArray MaxCount="1" Effect="FireStompReturnImpactSet">
            <Radius value="0.66"/>
        </AreaArray>
    </CEffectEnumArea>
    <CEffectApplyBehavior id="DiabloLightningBreathApplyActiveBehavior">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloLightningBreathActive"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloLightningBreathApplyTargetBehavior">
        <Behavior value="DiabloLightningBreathTarget"/>
    </CEffectApplyBehavior>
    <CEffectSet id="DiabloLightningBreathDamageSet">
        <EffectArray value="DiabloLightningBreathDamage"/>
        <EffectArray value="ApplyAbilityImpactReveal"/>
    </CEffectSet>
    <CEffectDamage id="DiabloLightningBreathDamage" parent="StormSpell">
        <DamageModifierSource Value="Caster"/>
        <Amount value="50"/>
    </CEffectDamage>
    <CEffectRemoveBehavior id="DiabloLightningBreathRemoveActiveBehavior">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="DiabloLightningBreathActive"/>
        <Count value="1"/>
    </CEffectRemoveBehavior>
    <CEffectSet id="DiabloSoulstonePeriodicSet">
        <EffectArray value="DiabloSoulstoneReadyApplyBehavior"/>
    </CEffectSet>
    <CEffectApplyBehavior id="DiabloSoulstoneReadyApplyBehavior">
        <ValidatorArray index="0" value="DiabloSoulStoneReadyCombine"/>
        <ValidatorArray value="DiabloSoulstoneNotReady"/>
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloSoulstoneReady"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloSoulstoneStackApplyBehavior">
        <WhichUnit Effect="DiabloSoulstoneDebuffApplyBehavior" Value="Source"/>
        <Behavior value="DiabloSoulstoneStack"/>
    </CEffectApplyBehavior>
    <CEffectApplyBehavior id="DiabloSoulstoneStackHeroicApplyBehavior">
        <WhichUnit Effect="DiabloSoulstoneDebuffHeroicApplyBehavior" Value="Source"/>
        <Behavior value="DiabloSoulstoneStack"/>
        <Count value="5"/>
    </CEffectApplyBehavior>
    <CEffectRemoveBehavior id="DiabloSoulstoneStackRemoveBehavior">
        <WhichUnit Value="Caster"/>
        <BehaviorLink value="DiabloSoulstoneStack"/>
        <Count value="50"/>
    </CEffectRemoveBehavior>
    <CEffectApplyBehavior id="DiabloSoulstoneDebuffApplyBehavior">
        <Behavior value="DiabloSoulstoneDebuff"/>
    </CEffectApplyBehavior>
    <CEffectDamage id="FireStompSuicideRemove" parent="StormSuicideRemove">
        <Name value="Effect/Name/FireStompSuicideRemove"/>
        <ValidatorArray index="0" removed="1"/>
        <Chance value="0"/>
        <FloaterCreation value="Auto"/>
    </CEffectDamage>
    <CEffectApplyBehavior id="DiabloStyleAttackApplyMissileScan">
        <WhichUnit Value="Source"/>
        <Behavior value="DiabloStyleAttackMissileScan"/>
    </CEffectApplyBehavior>
    <CEffectCreatePersistent id="DiabloSoulstoneReincarnationModelPersistent">
        <WhichLocation Value="CasterPoint"/>
        <ExpireDelay value="1"/>
        <PeriodCount value="1"/>
        <PeriodicPeriodArray value="5"/>
        <RevealRadius value="2"/>
        <RevealFlags index="Unfog" value="1"/>
    </CEffectCreatePersistent>
    <CEffectSet id="DiabloHeroWeaponImpactSet">
        <EffectArray value="UniversalWeaponImpact"/>
        <EffectArray value="DiabloHeroWeaponDiabolicalMomentumTalentModifyCooldowns"/>
        <EffectArray value="DiabloHeroWeaponDamage"/>
        <EffectArray value="UniversalWeaponLaunchSet"/>
        <EffectArray value="DiabloHeroWeaponLifeLeechTalentSet"/>
    </CEffectSet>
    <CEffectDamage id="DiabloHeroWeaponDamage" parent="StormWeapon">
        <Amount value="105"/>
    </CEffectDamage>
    <CEffectApplyBehavior id="ApocalypseApplyBehavior">
        <Behavior value="ApocalypseStun"/>
    </CEffectApplyBehavior>
    <CEffectDamage id="ApocalypseDamage" parent="StormSpell">
        <Amount value="137"/>
        <Visibility value="Hidden"/>
        <ValidatorArray value="noMarkers"/>
    </CEffectDamage>
    <CEffectCreatePersistent id="ApocalypseCreatePersistent">
        <InitialEffect value="ApocalypseRevealer"/>
        <ExpireDelay value="1.75"/>
        <ExpireEffect value="ApocalypseSearch"/>
        <ValidatorArray value="DiabloApocalypseIsValidTargetNotInNydusWormCombine"/>
        <AINotifyEffect value="ApocalypseSearch"/>
    </CEffectCreatePersistent>
    <CEffectEnumArea id="ApocalypseSearch">
        <ImpactLocation Value="TargetPoint"/>
        <SearchFilters value="-;Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
        <SearchFlags index="DoActorSearch" value="1"/>
        <AreaArray Effect="ApocalypseSet">
            <Radius value="2.5"/>
        </AreaArray>
        <AINotifyFlags index="HurtEnemy" value="1"/>
    </CEffectEnumArea>
    <CEffectCreatePersistent id="ApocalypseRevealer">
        <ExpireDelay value="5"/>
        <RevealRadius value="6"/>
        <RevealFlags index="Unfog" value="1"/>
    </CEffectCreatePersistent>
    <CEffectSet id="ApocalypseSet">
        <EffectArray value="ApocalypseDamage"/>
        <EffectArray value="ApocalypseApplyBehavior"/>
        <EffectArray value="CameraShakeMediumTauntingTotemSet"/>
    </CEffectSet>
    <CEffectModifyUnit id="DiabloHeroWeaponDiabolicalMomentumTalentModifyCooldowns">
        <ValidatorArray value="DiabloHasDiabolicalMomentum"/>
        <ValidatorArray value="UserCategoryTargetNotEvading"/>
        <ImpactUnit Value="Caster"/>
        <Cost Abil="DiabloShadowCharge,Execute" CooldownOperation="Add" CooldownTimeUse="-1.5"/>
        <Cost Abil="DiabloOverpower,Execute" ChargeTimeUse="-1.5" CooldownOperation="Add"/>
    </CEffectModifyUnit>
    <CItemAbil id="DiabloHellgateItem">
        <Face value="DiabloHellgateTalent"/>
        <Class value="Item"/>
        <Abil value="DiabloHellgate"/>
    </CItemAbil>
    <CItemAbil id="DiabloFearfulPresence">
        <Class value="Item"/>
    </CItemAbil>
    <CItemAbil id="DiabloTalentLordOfTerror">
        <Face value="DiabloLordOfTerror"/>
        <Class value="Item"/>
    </CItemAbil>
    <CModel id="DiabloHellgateTeleportInModel" parent="PersistentSpellFX">
        <Model value="Assets\Effects\Storm_Effect_Talent_BoltoftheStorm_In\Storm_Effect_Talent_BoltoftheStorm_In.m3"/>
        <Priority value="16"/>
    </CModel>
    <CModel id="DiabloHellgateTeleportOutModel" parent="PersistentSpellFX">
        <Model value="Assets\Effects\Storm_Effect_Talent_BoltoftheStorm_Out\Storm_Effect_Talent_BoltoftheStorm_Out.m3"/>
        <Priority value="16"/>
    </CModel>
    <CModel id="DiabloHellgateCursorSplat" parent="UI">
        <Model value="Assets\UI\Cursors\Storm_UI_AOECursor_Fantasy\Storm_UI_AOECursor_Fantasy.m3"/>
        <EditorCategories value="Race:Neutral"/>
    </CModel>
    <CModel id="DiabloFearfulPresenceCastModel" parent="OneShotSpellFX">
        <Model value="Assets\Effects\Storm_FX_Talent_ImposingPresence_AOE\Storm_FX_Talent_ImposingPresence_AOE.m3"/>
    </CModel>
    <CMoverMissile id="DiabloOverpowerRedirectMover">
        <Flags index="IgnoreMovementSuppression" value="1"/>
        <MotionPhases>
            <Driver value="Guidance"/>
            <Acceleration value="3200"/>
            <Speed value="70"/>
            <MaxSpeed value="70"/>
            <ArrivalTestType value="3D"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="5759.6484"/>
        </MotionPhases>
        <RotationIgnoredByUnit value="1"/>
    </CMoverMissile>
    <CMoverMissile id="DiabloOverpowerTargetMover">
        <Flags index="IgnoreMovementSuppression" value="1"/>
        <MotionPhases>
            <Driver value="Throw"/>
            <Acceleration value="400"/>
            <ArrivalTestType value="Never"/>
            <Outro value="1"/>
            <Timeout value="0.25"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <ThrowVector value="0,0,1.5" Z="1.5"/>
            <Overlays/>
            <Overlays/>
        </MotionPhases>
        <MotionPhases>
            <Driver value="Throw"/>
            <Acceleration value="600"/>
            <ArrivalTestType value="Never"/>
            <Outro value="1.05"/>
            <Timeout value="0.125"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <ThrowVector value="0,-0.5,0" Y="-0.5"/>
            <Overlays/>
            <Overlays/>
        </MotionPhases>
        <MotionPhases>
            <Driver value="Ballistic"/>
            <Gravity value="1000"/>
            <RotationActorType value="Upright"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="5759.6484"/>
            <FlightTime value="0.125"/>
        </MotionPhases>
        <RotationIgnoredByUnit value="1"/>
    </CMoverMissile>
    <CMoverMissile id="DiabloOverpowerCasterMover">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Speed value="5"/>
            <MaxSpeed value="5"/>
            <RotationLaunchActorType value="LaunchToTarget"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="MAX"/>
        </MotionPhases>
    </CMoverMissile>
    <CMoverMissile id="DiabloShadowChargeMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Acceleration value="175"/>
            <Speed value="0"/>
            <MaxSpeed value="300"/>
            <ActorTracking value="Actual"/>
            <RotationLaunchActorType value="LaunchToTarget"/>
            <RotationActorType value="LookAtTarget2D"/>
            <Timeout value="1"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="5759.6484"/>
        </MotionPhases>
        <RestoreHeightDuration value="0.0625"/>
    </CMoverMissile>
    <CMoverMissile id="DiabloBlackSoulstoneMissileMover">
        <MotionPhases>
            <Driver value="Throw"/>
            <Speed value="5"/>
            <MaxSpeed value="5"/>
            <ArrivalTestType value="Never"/>
            <Outro value="0.5,3"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <ThrowVector value="0,0,4" Z="4"/>
            <ThrowForward value="0,0,4" Z="4"/>
            <Overlays/>
            <Overlays/>
        </MotionPhases>
        <MotionPhases>
            <Driver value="Guidance"/>
            <Speed value="15"/>
            <MaxSpeed value="15"/>
            <IgnoresClearanceChecks value="1"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="5759.6484"/>
            <Overlays/>
            <Overlays/>
        </MotionPhases>
    </CMoverMissile>
    <CMoverMissile id="FireStompMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Acceleration value="-5"/>
            <Speed value="10"/>
            <MinSpeed value="7.5"/>
            <MaxSpeed value="15"/>
            <IgnoresClearanceChecks value="1"/>
            <Outro value="-2,-1.5"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="5759.6484"/>
        </MotionPhases>
        <MotionPhases>
            <Driver value="Guidance"/>
            <MaxSpeed value="15"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="5759.6484"/>
        </MotionPhases>
        <RotationIgnoredByUnit value="1"/>
    </CMoverMissile>
    <CMoverMissile id="FireStompReturnMissile">
        <MotionPhases>
            <Driver value="Guidance"/>
            <Acceleration value="15"/>
            <Speed value="5"/>
            <MinSpeed value="7.5"/>
            <MaxSpeed value="30"/>
            <IgnoresClearanceChecks value="1"/>
            <Timeout value="10"/>
            <ThrowBandYaw value="-360,-360,-360,-360"/>
            <ThrowBandPitch value="-360,-360,-360,-360"/>
            <YawPitchRoll value="5759.6484"/>
        </MotionPhases>
    </CMoverMissile>
    <CRequirement id="DiabloHasBlackSoulstoneActivationController">
        <NodeArray index="Show" Link="AndEqCountBehaviorDiabloBlackSoulstoneActivationControllerCompleteOnlyAtUnit1EqCountBehaviorDiabloBlackSoulstoneResurrectActiveCompleteOnlyAtUnit0"/>
    </CRequirement>
    <CRequirementAnd id="AndEqCountBehaviorDiabloBlackSoulstoneActivationControllerCompleteOnlyAtUnit1EqCountBehaviorDiabloBlackSoulstoneResurrectActiveCompleteOnlyAtUnit0">
        <OperandArray value="EqCountBehaviorDiabloBlackSoulstoneActivationControllerCompleteOnlyAtUnit1"/>
        <OperandArray value="EqCountBehaviorDiabloBlackSoulstoneResurrectActiveCompleteOnlyAtUnit0"/>
    </CRequirementAnd>
    <CRequirementCountBehavior id="CountBehaviorDiabloBlackSoulstoneActivationControllerCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="DiabloBlackSoulstoneActivationController" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementCountBehavior id="CountBehaviorDiabloBlackSoulstoneResurrectActiveCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="DiabloBlackSoulstoneResurrectActive" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementEq id="EqCountBehaviorDiabloBlackSoulstoneActivationControllerCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorDiabloBlackSoulstoneActivationControllerCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementEq>
    <CRequirementEq id="EqCountBehaviorDiabloBlackSoulstoneResurrectActiveCompleteOnlyAtUnit0">
        <OperandArray index="0" value="CountBehaviorDiabloBlackSoulstoneResurrectActiveCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="0"/>
    </CRequirementEq>
    <CRequirementCountBehavior id="CountBehaviorDiabloSoulEmpowermentAvailabilityControllerCompleteOnlyAtUnit">
        <Flags index="TechTreeCheat" value="0"/>
        <Count Link="DiabloSoulEmpowermentAvailabilityController" State="CompleteOnlyAtUnit"/>
    </CRequirementCountBehavior>
    <CRequirementGTE id="GTECountBehaviorDiabloSoulEmpowermentAvailabilityControllerCompleteOnlyAtUnit1">
        <OperandArray index="0" value="CountBehaviorDiabloSoulEmpowermentAvailabilityControllerCompleteOnlyAtUnit"/>
        <OperandArray index="1" value="1"/>
    </CRequirementGTE>
    <CRequirementConst id="50">
        <Value value="50"/>
    </CRequirementConst>
    <CSound id="Diablo_FearfulPresence_Cast_Self" parent="_FX_Hero_Spell_Launch">
        <AssetArray File="Assets\Sounds\Talents\Talent_ImposingPresence_Launch_01.wav" FacialGroup=""/>
        <AssetArray File="Assets\Sounds\Talents\Talent_ImposingPresence_Launch_02.wav" FacialGroup=""/>
        <AssetArray File="Assets\Sounds\Talents\Talent_ImposingPresence_Launch_03.wav" FacialGroup=""/>
        <PanLevel value="0.750000"/>
        <PanLevelNonLocal value="0.900000"/>
        <ReverbBalance Room="-10000"/>
        <SustainFade index="0" Time="205"/>
        <SustainFade index="1" Time="1231"/>
        <PanLevelLocalAlly value="1.000000"/>
        <Volume value="-2.000000,-2.000000"/>
    </CSound>
    <CTalent id="DiabloDevastatingCharge">
        <Face value="DiabloDevastatingCharge"/>
        <Abil value="DiabloShadowCharge"/>
        <RankArray>
            <BehaviorArray value="DiabloShadowChargeDevastatingChargeTalentTokenCounter"/>
            <BehaviorArray value="DiabloShadowChargeDevastatingChargeTalentCarry"/>
        </RankArray>
        <QuestData StackBehavior="DiabloShadowChargeDevastatingChargeTalentTokenCounter" TargetCount="5"/>
    </CTalent>
    <CTalent id="DiabloSoulShield">
        <Face value="DiabloSoulShield"/>
        <RankArray>
            <BehaviorArray value="DiabloSoulShieldCarry"/>
        </RankArray>
        <Trait value="1"/>
    </CTalent>
    <CTalent id="DiabloHellgate">
        <Face value="DiabloHellgateTalent"/>
        <Abil value="DiabloHellgate"/>
        <RankArray Item="DiabloHellgateItem"/>
        <Active value="1"/>
    </CTalent>
    <CTalent id="DiabloFearfulPresence">
        <Face value="DiabloFearfulPresenceTalent"/>
        <Abil value="DiabloFearfulPresence"/>
        <RankArray Item="DiabloFearfulPresence">
            <BehaviorArray value="DiabloFearfulPresenceCarry"/>
        </RankArray>
        <Active value="1"/>
    </CTalent>
    <CTalent id="DiabloHellfire">
        <Face value="DiabloHellfire"/>
        <Abil value="DiabloFireStomp"/>
        <RankArray>
            <BehaviorArray value="DiabloFireStompHellfireTalentTokenCounter"/>
        </RankArray>
    </CTalent>
    <CTalent id="DiabloTalentDominationOverpower">
        <Face value="DiabloOverpowerDominationTalent"/>
        <Abil value="DiabloOverpower"/>
        <RankArray/>
    </CTalent>
    <CTalent id="DiabloLifeLeech">
        <Face value="DiabloLifeLeechTalent"/>
        <RankArray/>
    </CTalent>
    <CTalent id="DiabloTalentLordOfTerror">
        <Face value="DiabloLordOfTerror"/>
        <Abil value="DiabloTalentLordOfTerror"/>
        <RankArray Item="DiabloTalentLordOfTerror"/>
        <Active value="1"/>
    </CTalent>
    <CTalent id="DiabloDebilitatingFlames">
        <Face value="DiabloDebilitatingFlames"/>
        <Abil value="DiabloFireStomp"/>
        <RankArray/>
    </CTalent>
    <CTalent id="DiabloBulwark">
        <Face value="DiabloBulwark"/>
        <Abil value="DiabloShadowCharge"/>
        <RankArray/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="DiabloShadowChargeArmorIncrease"/>
                <Field value="Duration"/>
                <Value value="2.000000"/>
            </Modifications>
        </AbilityModificationArray>
    </CTalent>
    <CTalent id="DiabloMasteryDemonicStrength">
        <Face value="DiabloOverpowerDemonicStrengthTalent"/>
        <RankArray/>
        <AbilityModificationArray ModifyAbil="DiabloOverpower" TooltipAddendum="Talent/Diablo/Overpower/DemonicStrength">
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="DiabloOverpowerApplyDemonicStrengthSlow"/>
                <Field value="Chance"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
        <Abil value="DiabloOverpower"/>
    </CTalent>
    <CTalent id="DiabloMasteryDevilsDueBlackSoulstone">
        <Face value="DiabloBlackSoulstoneDevilsDueTalent"/>
        <RankArray>
            <BehaviorArray value="DiabloBlackSoulstoneDevilsDueTalentTokenCounter"/>
        </RankArray>
        <Trait value="1"/>
    </CTalent>
    <CTalent id="DiabloMasteryDyingBreathApocalypse">
        <Face value="DiabloApocalypseDyingBreathTalent"/>
        <AbilityModificationArray ModifyAbil="DiabloApocalypse" TooltipAddendum="Talent/Diablo/Apocalypse/DyingBreath">
            <Modifications>
                <Type value="FlatModification"/>
                <Entry value="DiabloApocalypse"/>
                <Field value="Cost[0].Cooldown.TimeUse"/>
                <Value value="-20.000000"/>
            </Modifications>
        </AbilityModificationArray>
        <Abil value="DiabloApocalypse"/>
    </CTalent>
    <CTalent id="DiabloMasteryHellstormLightningBreath">
        <Face value="DiabloLightningBreathHellstormTalent"/>
        <RankArray/>
        <AbilityModificationArray ModifyAbil="DiabloLightningBreath">
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="DiabloLightningBreathOffsetPersistent"/>
                <Field value="PeriodicOffsetArray[0]"/>
                <Value value="-2.250000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="DiabloLightningBreathSearchArea"/>
                <Field value="AreaArray[0].RectangleHeight"/>
                <Value value="4.500000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="DiabloLightningBreathController"/>
                <Field value="Duration"/>
                <Value value="2.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="DiabloLightningBreathUnstoppable"/>
                <Field value="Duration"/>
                <Value value="2.000000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Actor"/>
                <Entry value="DiabloLightningBreathChargeBreatheInModel"/>
                <Field value="Scale"/>
                <Value value="0.500000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Actor"/>
                <Entry value="DiabloLightningBreathChargeBreatheOutModel"/>
                <Field value="Scale"/>
                <Value value="0.500000"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Actor"/>
                <Entry value="DiabloLightningBreathGuide"/>
                <Field value="Height"/>
                <Value value="4.500000"/>
            </Modifications>
            <Modifications>
                <Type value="CatalogReplacement"/>
                <Catalog value="Sound"/>
                <Entry value="Diablo_LightningBreath_Launch"/>
                <StringReplacement value="Diablo_LightningEndless_Launch"/>
            </Modifications>
        </AbilityModificationArray>
        <Abil value="DiabloLightningBreath"/>
    </CTalent>
    <CTalent id="DiabloSpeedDemon">
        <Face value="DiabloSpeedDemon"/>
        <RankArray/>
    </CTalent>
    <CTalent id="DiabloMasteryFireDevilFireStomp">
        <Face value="DiabloFirestompFireDevilTalent"/>
        <RankArray/>
        <Abil value="DiabloFireStomp"/>
    </CTalent>
    <CTalent id="DiabloMasteryFromTheShadowsShadowCharge">
        <Face value="DiabloShadowChargeFromTheShadowsTalent"/>
        <RankArray/>
        <AbilityModificationArray ModifyAbil="DiabloShadowCharge">
            <Modifications>
                <Type value="MultiplyLevelModification"/>
                <Entry value="DiabloShadowCharge"/>
                <Field value="Range[0]"/>
                <Value value="1.400000"/>
            </Modifications>
            <Modifications>
                <Type value="MultiplyLevelModification"/>
                <Catalog value="Actor"/>
                <Entry value="DiabloShadowChargeRangeSplat"/>
                <Field value="Scale"/>
                <Value value="1.400000"/>
            </Modifications>
        </AbilityModificationArray>
        <Abil value="DiabloShadowCharge"/>
    </CTalent>
    <CTalent id="DiabloMasterySoulFeastBlackSoulstone">
        <Face value="DiabloBlackSoulstoneSoulFeastTalent"/>
        <RankArray>
            <BehaviorArray value="DiabloBlackSoulstoneSoulFeastTalentCarry"/>
        </RankArray>
        <Trait value="1"/>
    </CTalent>
    <CTalent id="DiabloMasterySoulStealBlackSoulstone">
        <Face value="DiabloBlackSoulstoneSoulStealTalent"/>
        <RankArray/>
        <AbilityModificationArray>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Behavior"/>
                <Entry value="BlackSoulstone"/>
                <Field value="Modification.VitalMaxAdditiveMultiplierArray[0]"/>
                <Value value="0.001000"/>
            </Modifications>
        </AbilityModificationArray>
        <Trait value="1"/>
    </CTalent>
    <!-- ...... -->
    <!-- Diablo -->
    <!-- ...... -->
    <!--CTalent id="DiabloCombatStyleFast">-->
    <!--        <Face value="WeaponDiabloFast"/>-->
    <!--        <RankArray Face="WeaponDiabloFastSimple">-->
    <!--            <BehaviorArray value="WeaponCarryDiabloFast"/>-->
    <!--        </RankArray>-->
    <!--    </CTalent-->
    <!--CTalent id="DiabloCombatStyleNightmarish">-->
    <!--        <Face value="WeaponDiabloNightmarish"/>-->
    <!--        <RankArray Face="WeaponDiabloNightmarishSimple">-->
    <!--            <BehaviorArray value="WeaponCarryDiabloNightmarish"/>-->
    <!--        </RankArray>-->
    <!--    </CTalent-->
    <CTalent id="DiabloHeroicAbilityLightningBreath">
        <Face value="DiabloLightningBreath"/>
        <RankArray>
            <BehaviorArray value="Ultimate2Unlocked"/>
        </RankArray>
        <Active value="1"/>
        <Abil value="DiabloLightningBreath"/>
    </CTalent>
    <CTalent id="DiabloHeroicAbilityApocalypse">
        <Face value="DiabloApocalypse"/>
        <RankArray>
            <BehaviorArray value="Ultimate1Unlocked"/>
        </RankArray>
        <Active value="1"/>
        <Abil value="DiabloApocalypse"/>
    </CTalent>
    <CTalent id="DiabloMasteryFirestorm">
        <Face value="DiabloFireStompFirestormTalent"/>
        <AbilityModificationArray ModifyAbil="DiabloFireStomp">
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="FireStompReturnCreatePersistent"/>
                <Field value="Chance"/>
                <Value value="1.000000"/>
            </Modifications>
            <Modifications>
                <Type value="CatalogReplacement"/>
                <Catalog value="Model"/>
                <Entry value="DiabloFireStompMissile"/>
                <Field value="Model"/>
                <StringReplacement value="DiabloFireStormMissile"/>
            </Modifications>
            <Modifications>
                <Type value="FlatModification"/>
                <Catalog value="Effect"/>
                <Entry value="FireStompReturnSoundDummy"/>
                <Field value="Chance"/>
                <Value value="1.000000"/>
            </Modifications>
        </AbilityModificationArray>
        <RankArray>
            <BehaviorArray value="DiabloFireStompMasteryCarryBehavior"/>
        </RankArray>
        <Abil value="DiabloFireStomp"/>
    </CTalent>
    <CTalent id="DiabloDiabolicalMomentum">
        <Face value="DiabloDiabolicalMomentum"/>
        <RankArray/>
    </CTalent>
    <CUnit id="DiabloBlackSoulstoneHeroMissile" parent="MISSILE_INVULNERABLE">
        <Mover value="DiabloBlackSoulstoneMissileMover"/>
    </CUnit>
    <CUnit id="DiabloBlackSoulstoneNonHeroMissile" parent="MISSILE_INVULNERABLE">
        <Mover value="DiabloBlackSoulstoneMissileMover"/>
    </CUnit>
    <CUnit id="DiabloHellgateItem" parent="ITEM"/>
    <CUnit id="DiabloFearfulPresence" parent="ITEM"/>
    <CUnit id="DiabloTalentLordOfTerror" parent="ITEM"/>
    <CUnit id="DiabloFireStompReturnMissile" parent="MISSILE_INVULNERABLE">
        <Mover value="FireStompReturnMissile"/>
        <Sight value="3"/>
        <FlagArray index="UseLineOfSight" value="1"/>
        <BehaviorArray Link="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CUnit>
    <CUnit id="DiabloFireStompMissile" parent="MISSILE_INVULNERABLE">
        <Mover value="FireStompMissile"/>
        <Sight value="3"/>
        <FlagArray index="UseLineOfSight" value="1"/>
        <BehaviorArray Link="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CUnit>
    <CUnit id="HeroDiablo" parent="StormHeroMounted">
        <LifeStart value="2567"/>
        <LifeMax value="2567"/>
        <LifeRegenRate value="5.3515"/>
        <AbilArray Link="DiabloLightningBreath"/>
        <AbilArray Link="DiabloFireStomp"/>
        <AbilArray Link="DiabloApocalypse"/>
        <AbilArray Link="LightningBreathCancel"/>
        <AbilArray Link="DiabloShadowCharge"/>
        <AbilArray Link="DiabloOverpower"/>
        <BehaviorArray Link="BlackSoulstoneCarryBehavior"/>
        <BehaviorArray Link="ExcellentMana"/>
        <BehaviorArray Link="HeroGenericIsFat"/>
        <BehaviorArray Link="UsesLargeBlobShadow"/>
        <BehaviorArray Link="DiabloBlackSoulstoneTokenCounter"/>
        <WeaponArray Link="HeroDiablo"/>
        <CardLayouts index="0">
            <LayoutButtons Face="DiabloApocalypse" Type="AbilCmd" Row="0" Column="3">
                <AbilCmd value="DiabloApocalypse,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="DiabloLightningBreathCancel" Type="AbilCmd" Row="0" Column="3">
                <AbilCmd value="LightningBreathCancel,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="DiabloLightningBreath" Type="AbilCmd" Row="0" Column="3">
                <AbilCmd value="DiabloLightningBreath,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="Move" Type="AbilCmd" Row="2" Column="4">
                <AbilCmd value="move,Move" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="DiabloShadowCharge" Type="AbilCmd" Row="0" Column="0">
                <AbilCmd value="DiabloShadowCharge,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="DiabloOverpower" Type="AbilCmd" Row="0" Column="2">
                <AbilCmd value="DiabloOverpower,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="DiabloFireStomp" Type="AbilCmd" Row="0" Column="1">
                <AbilCmd value="DiabloFireStomp,Execute" index="0"/>
            </LayoutButtons>
            <LayoutButtons Face="DiabloBlackSoulstone" Type="Passive" Behavior="DiabloBlackSoulstoneTokenCounter" Row="1" Column="0"/>
        </CardLayouts>
        <Radius value="1.25"/>
        <InnerRadius value="1"/>
        <TacticalAIThink value="AIThinkDiablo"/>
        <InitializerFunction value="libGDHL_gf_HeroDiabloIncrementHeroCountFunction"/>
        <DestructionFunction value="libGDHL_gf_HeroDiabloDecrementHeroCountFunction"/>
    </CUnit>
    <CValidatorUnitCompareBehaviorCount id="DiabloLightningBreathCasterDoesNotHaveActive">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloLightningBreathActive"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloLightningBreathTargetDoesNotHaveActive">
        <Behavior value="DiabloLightningBreathActive"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloLightningBreathTargetHasActive">
        <Value value="1"/>
        <Behavior value="DiabloLightningBreathActive"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloOverpowerCasterHasOverpower">
        <WhichUnit Value="Caster"/>
        <Value value="1"/>
        <Behavior value="DiabloOverpowerTargetBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloOverpowerCasterDoesNotHaveOverpower">
        <WhichUnit Value="Caster"/>
        <Behavior value="DiabloOverpowerTargetBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloShadowChargeTargetDoesNotHaveStunLimiter">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Behavior value="DiabloShadowChargeStunLimiter"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareTokenCount id="DiabloDoesNotHave5DevastatingChargeTalentTokens">
        <WhichUnit Value="Caster"/>
        <Compare value="LT"/>
        <Value value="5"/>
        <TokenId value="DiabloShadowChargeDevastatingChargeTalentTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorPlayerTalent id="DiabloHasDevastatingChargeTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloDevastatingCharge"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DiabloHasSoulShieldTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloSoulShield"/>
    </CValidatorPlayerTalent>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHasGTE1BlackSoulstoneTokens">
        <Compare value="GE"/>
        <Value value="1"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloHasBlackSoulstoneAvailable">
        <Value value="1"/>
        <Behavior value="DiabloBlackSoulstoneActivationController"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareTokenCount id="DiabloHasGT100BlackSoulstoneTokens">
        <WhichUnit Value="Target"/>
        <Compare value="GE"/>
        <Value value="100"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorPlayerTalent id="DiabloHasDiabolicalMomentum">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloDiabolicalMomentum"/>
    </CValidatorPlayerTalent>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHasGTE50BlackSoulstoneTokens">
        <Compare value="GE"/>
        <Value value="50"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHasLessThan100BlackSoulstoneTokens">
        <Compare value="LT"/>
        <Value value="100"/>
        <TokenId value="DiabloBlackSoulstoneTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas5StackFireStompHellfireTalentToken">
        <Value value="5"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas6StackFireStompHellfireTalentToken">
        <Value value="6"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas7StackFireStompHellfireTalentToken">
        <Value value="7"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas8StackFireStompHellfireTalentToken">
        <Value value="8"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas9StackFireStompHellfireTalentToken">
        <Value value="9"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas10StackFireStompHellfireTalentToken">
        <Value value="10"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorPlayerTalent id="DiabloHasHellfireTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloHellfire"/>
    </CValidatorPlayerTalent>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas1StackFireStompHellfireTalentToken">
        <Value value="1"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas2StackFireStompHellfireTalentToken">
        <Value value="2"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHasGT2StackFireStompHellfireTalentToken">
        <Compare value="GT"/>
        <Value value="2"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorCombine id="DiabloFireStompHellfireCritCombine">
        <CombineArray value="CritAliasSpellDamage"/>
        <CombineArray value="DiabloSourceHasGT2StackFireStompHellfireTalentToken"/>
    </CValidatorCombine>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas3StackFireStompHellfireTalentToken">
        <Value value="3"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorUnitCompareTokenCount id="DiabloSourceHas4StackFireStompHellfireTalentToken">
        <Value value="4"/>
        <TokenId value="DiabloFireStompHellfireTalentMissileTokenCounter"/>
    </CValidatorUnitCompareTokenCount>
    <CValidatorPlayerTalent id="DiabloHasSpeedDemonTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloSpeedDemon"/>
    </CValidatorPlayerTalent>
    <CValidatorCombine id="DiabloApocalypseIsEnemyHeroOrCocoonCombine">
        <CombineArray value="DiabloApocalypseIsEnemyHero"/>
        <CombineArray value="IsCocoonedEnemyHeroCombine"/>
    </CValidatorCombine>
    <CValidatorCombine id="DiabloApocalypseIsValidTargetNotInNydusWormCombine">
        <Type value="And"/>
        <CombineArray value="DiabloApocalypseIsEnemyHeroOrCocoonCombine"/>
        <CombineArray value="UnitNotinNydusWorm"/>
    </CValidatorCombine>
    <CValidatorUnitFilters id="DiabloApocalypseIsEnemyHero">
        <Filters value="Heroic;Player,Ally,Neutral,ImmuneToAOE,Missile,Item,Dead,Hidden"/>
    </CValidatorUnitFilters>
    <CValidatorCombine id="DiabloShadowChargeLocationIsNotWalkableOrTargetHasHitPathingBlocker">
        <CombineArray value="DiabloShadowChargeTargetHasHitPathingBlocker"/>
        <CombineArray value="NotWalkable"/>
    </CValidatorCombine>
    <CValidatorUnitState id="DiabloShadowChargeTargetHasHitPathingBlocker" parent="UnitIsInContactWithPathingBlocker">
        <WhichUnit Effect="DiabloShadowChargeLaunchDiablo" Value="Target"/>
    </CValidatorUnitState>
    <CValidatorLocationCompareRange id="DiabloShadowChargeCasterWithin2unitsofOrigin">
        <WhichLocation Value="OriginPoint"/>
        <Compare value="LT"/>
        <Range value="2"/>
    </CValidatorLocationCompareRange>
    <CValidatorLocationArc id="DiabloFacingShadowChargeTargetWithin30">
        <WhichLocation Value="CasterUnit"/>
        <Arc value="29.9926"/>
        <Value Effect="DiabloShadowChargeLaunchDiablo" Value="TargetUnit"/>
    </CValidatorLocationArc>
    <CValidatorLocationCompareRange id="DiabloShadowChargeTargetIsNotClose">
        <WhichLocation Effect="DiabloShadowChargeInitialSet" Value="TargetUnit"/>
        <Compare value="GT"/>
        <Range value="1"/>
        <Value Effect="DiabloShadowChargeInitialSet"/>
    </CValidatorLocationCompareRange>
    <CValidatorUnitFilters id="DiabloShadowChargeTargetNotDeadOrUnstoppable">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Filters value="-;Dead,Unstoppable"/>
    </CValidatorUnitFilters>
    <CValidatorUnitCompareBehaviorCount id="DiabloOverpowerTargetDoesNotHaveOverpower">
        <Behavior value="DiabloOverpowerTargetBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloShadowChargeTargetIsFat">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Value value="1"/>
        <Behavior value="HeroGenericIsFat"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloShadowChargeHasImpactedTarget">
        <WhichUnit Effect="DiabloShadowChargeInitialSet" Value="Caster"/>
        <Value value="1"/>
        <Behavior value="DiabloShadowChargeTargetFoundBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloShadowChargeTargetIsNotFat">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Behavior value="HeroGenericIsFat"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitFilters id="DiabloShadowChargeTargetIsStructure">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Filters value="Structure;-"/>
    </CValidatorUnitFilters>
    <CValidatorUnitHasBehavior id="DiabloShadowChargeTargetNotInBonusStun">
        <WhichUnit Effect="DiabloShadowChargeInitialSet"/>
        <Behavior value="DiabloShadowChargeExtraStun"/>
        <IncludeDisabled value="1"/>
        <Negate value="1"/>
    </CValidatorUnitHasBehavior>
    <CValidatorCombine id="DiabloShadowChargeDiabloKnockbackValidator">
        <Type value="And"/>
        <CombineArray value="DiabloShadowChargeTargetNotInBonusStun"/>
        <CombineArray value="DiabloShadowChargeTargetNotDeadOrUnstoppable"/>
        <CombineArray value="CasterNotDeadOrStunnedOrRootedOrPolymorphedOrStasisOrDazedOrFearedExceptTimeStop"/>
    </CValidatorCombine>
    <CValidatorUnitFilters id="FireStompReturnMissileSuicideValidator">
        <WhichUnit Effect="DiabloFireStompInitialSet" Value="Caster"/>
    </CValidatorUnitFilters>
    <CValidatorUnitCompareBehaviorCount id="DiabloHasShadowChargeCasterBehaviorSource">
        <WhichUnit Value="Source"/>
        <Value value="1"/>
        <Behavior value="DiabloShadowChargeCasterBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloShadowChargeCasterHasPostChargeBehavior">
        <Value value="1"/>
        <Behavior value="DiabloShadowChargeCasterPostChargeBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorLocationEnumArea id="DiabloLordOfTerrorEnemyProximityValidator">
        <WhichLocation Value="CasterUnit"/>
        <AreaArray Compare="GT">
            <Radius value="6"/>
        </AreaArray>
        <SearchFilters value="Heroic,Visible;Self,Player,Ally,Neutral,Worker,Missile,Item,Stasis,Dead,Hidden,Invulnerable"/>
    </CValidatorLocationEnumArea>
    <CValidatorUnitCompareBehaviorCount id="DiabloSourceHasLessThan100BlackSoulstoneStacks">
        <WhichUnit Value="Source"/>
        <Compare value="LT"/>
        <Value value="100"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorPlayerTalent id="HasDiabloCripplingCharge">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloTalentCripplingChargeShadowCharge"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloLifeLeech">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloLifeLeech"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloDomination">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloTalentDominationOverpower"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DiabloHasDebilitatingFlames">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloDebilitatingFlames"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DiabloHasBulwarkTalent">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloBulwark"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloOverwhelmingForce">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloTalentOverwhelmingForceShadowCharge"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloEssenceoftheSlain">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloTalentEssenceOfTheSlain"/>
    </CValidatorPlayerTalent>
    <CValidatorCombine id="DiabloShadowChargeCancelAttackCombineValidator">
        <CombineArray value="DiabloOverpowerCasterHasOverpowerOrder"/>
        <CombineArray value="DiabloFireStompIsOrder"/>
        <CombineArray value="DiabloApocalypseIsOrder"/>
        <CombineArray value="DiabloLightningBreathCasterHasOrder"/>
        <CombineArray value="DiabloLordOfTerrorIsOrder"/>
        <CombineArray value="DiabloBoltOfTheStormIsOrder"/>
        <CombineArray value="DiabloSiphonTheDeadIsOrder"/>
    </CValidatorCombine>
    <CValidatorUnitCompareOrderCount id="DiabloOverpowerCasterHasOverpowerOrder">
        <AbilLink value="DiabloOverpower"/>
        <Value value="1"/>
    </CValidatorUnitCompareOrderCount>
    <CValidatorUnitCompareOrderCount id="DiabloFireStompIsOrder">
        <AbilLink value="DiabloFireStomp"/>
        <Value value="1"/>
    </CValidatorUnitCompareOrderCount>
    <CValidatorUnitCompareOrderCount id="DiabloApocalypseIsOrder">
        <AbilLink value="DiabloApocalypse"/>
        <Value value="1"/>
    </CValidatorUnitCompareOrderCount>
    <CValidatorUnitCompareOrderCount id="DiabloLightningBreathCasterHasOrder">
        <AbilLink value="DiabloLightningBreath"/>
        <Value value="1"/>
    </CValidatorUnitCompareOrderCount>
    <CValidatorUnitCompareOrderCount id="DiabloLordOfTerrorIsOrder">
        <AbilLink value="StormInventory"/>
        <Value value="1"/>
        <AbilCmdIndex value="3"/>
    </CValidatorUnitCompareOrderCount>
    <CValidatorUnitCompareOrderCount id="DiabloBoltOfTheStormIsOrder">
        <AbilLink value="StormInventory"/>
        <Value value="1"/>
        <AbilCmdIndex value="4"/>
    </CValidatorUnitCompareOrderCount>
    <CValidatorPlayerTalent id="HasDiabloDemonicStrength">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryDemonicStrength"/>
    </CValidatorPlayerTalent>
    <CValidatorUnitCompareBehaviorCount id="TargetisaShadowChargeMissile">
        <Value value="1"/>
        <Behavior value="DiabloShadowChargeCasterBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloHasLTE95SoulstoneStacks">
        <WhichUnit Value="Caster"/>
        <Compare value="LE"/>
        <Value value="95"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloHas96SoulstoneStacks">
        <WhichUnit Value="Caster"/>
        <Value value="96"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloHas97SoulstoneStacks">
        <WhichUnit Value="Caster"/>
        <Value value="97"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloHas98SoulstoneStacks">
        <WhichUnit Value="Caster"/>
        <Value value="98"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloHas99SoulstoneStacks">
        <WhichUnit Value="Caster"/>
        <Value value="99"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloHasGTE100SoulstoneStacks">
        <WhichUnit Value="Caster"/>
        <Compare value="GE"/>
        <Value value="100"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="BlackSoulstoneGTE1">
        <WhichUnit Value="Source"/>
        <Compare value="GE"/>
        <Value value="1"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DiabloDoesNotHaveFireStompDummy">
        <WhichUnit Value="Caster"/>
        <Behavior value="FireStompDummyBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="OverpowerTargetHasOverpower">
        <WhichUnit Effect="DiabloOverpowerInitialSet"/>
        <Value value="1"/>
        <Behavior value="DiabloOverpowerTargetBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="DoesNotHaveDiabloFireStompMastery">
        <WhichUnit Effect="DiabloFireStompInitialSet" Value="Caster"/>
        <Behavior value="DiabloFireStompMasteryCarryBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitCompareBehaviorCount id="HasDiabloFireStompMastery">
        <WhichUnit Effect="DiabloFireStompInitialSet" Value="Caster"/>
        <Value value="1"/>
        <Behavior value="DiabloFireStompMasteryCarryBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitFilters id="DiabloOverpowerTargetNotDead">
        <WhichUnit Effect="DiabloOverpowerInitialSet"/>
        <Filters value="-;Dead"/>
    </CValidatorUnitFilters>
    <CValidatorUnitFilters id="DiabloOverpowerNotInStasis">
        <WhichUnit Effect="DiabloOverpowerInitialSet"/>
        <Filters value="-;Stasis"/>
    </CValidatorUnitFilters>
    <CValidatorCombine id="DiabloOverpowerCasterAndTargetCombine">
        <Type value="And"/>
        <CombineArray value="DiabloOverpowerTargetNotDead"/>
        <CombineArray value="DiabloOverpowerNotInStasis"/>
        <CombineArray value="CasterNotPushPullAndNotDeadOrStunnedOrSilencedOrStasis"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="SourceHasGTE100SoulstoneStacks">
        <WhichUnit Value="Source"/>
        <Compare value="GE"/>
        <Value value="50"/>
        <Behavior value="BlackSoulstone"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorUnitOrderQueue id="DiabloInfernoBreathing">
        <AbilLink value="DiabloLightningBreath"/>
        <Target Value="TargetUnit"/>
    </CValidatorUnitOrderQueue>
    <CValidatorUnitType id="IsDiablo">
        <Value value="HeroDiablo"/>
    </CValidatorUnitType>
    <CValidatorCombine id="LordofTerrorCombine">
        <CombineArray value="TargetLifeLT30Percent"/>
        <CombineArray value="LordofTerrorNotRevealed"/>
    </CValidatorCombine>
    <CValidatorUnitCompareBehaviorCount id="LordofTerrorNotRevealed">
        <Behavior value="LordofTerror"/>
    </CValidatorUnitCompareBehaviorCount>
    <CValidatorLocationCompareRange id="TargetWithBehaviorWithin30Range">
        <WhichLocation Effect="LordofTerrorTraitApplyBehavior" Value="TargetUnit"/>
        <Compare value="LE"/>
        <Range value="30"/>
        <Value Effect="LordofTerrorTraitSearchArea"/>
    </CValidatorLocationCompareRange>
    <CValidatorUnitCompareBehaviorCount id="HasNoFireStompAntiGib">
        <Behavior value="FireStompAntiGibBehavior"/>
    </CValidatorUnitCompareBehaviorCount>
    <!-- Diablo Talent Validators -->
    <CValidatorPlayerTalent id="HasDiabloDevilsDue">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryDevilsDueBlackSoulstone"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloDevilsDue">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasteryDevilsDueBlackSoulstone"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloSoulFeast">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasterySoulFeastBlackSoulstone"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloSoulFeast">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasterySoulFeastBlackSoulstone"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloSoulSteal">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasterySoulStealBlackSoulstone"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloSoulSteal">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasterySoulStealBlackSoulstone"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloFirestorm">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryFirestorm"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloFirestorm">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasteryFirestorm"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloMoltenImpact">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloSpeedDemon"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloFromTheShadows">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryFromTheShadowsShadowCharge"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloFromTheShadows">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasteryFromTheShadowsShadowCharge"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloCripplingShadows">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryCripplingShadowsShadowCharge"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloSwallowingFlames">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasterySwallowingFlamesFireStomp"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloFireDevil">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryFireDevilFireStomp"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloFireDevil">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasteryFireDevilFireStomp"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloDyingBreath">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryDyingBreathApocalypse"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloDyingBreath">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasteryDyingBreathApocalypse"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="HasDiabloHellstorm">
        <WhichPlayer Value="Caster"/>
        <Find value="1"/>
        <Value value="DiabloMasteryHellstormLightningBreath"/>
    </CValidatorPlayerTalent>
    <CValidatorPlayerTalent id="DoesNotHaveDiabloHellstorm">
        <WhichPlayer Value="Caster"/>
        <Value value="DiabloMasteryHellstormLightningBreath"/>
    </CValidatorPlayerTalent>
    <CWeaponLegacy id="HeroDiablo" parent="StormHeroMediumWeapon">
        <Options index="Melee" value="1"/>
        <Icon value="Assets\Textures\storm_temp_war3_btnorcmeleeuptwo.dds"/>
        <DisplayEffect value="DiabloHeroWeaponDamage"/>
        <MinScanRange value="4"/>
        <Range value="1.25"/>
        <Period value="1.1"/>
        <PreswingBeforeAttack value="0.1875"/>
        <PreswingBetweenAttacks value="0.1875"/>
        <Effect value="DiabloHeroWeaponImpactSet"/>
    </CWeaponLegacy>
</Catalog>

